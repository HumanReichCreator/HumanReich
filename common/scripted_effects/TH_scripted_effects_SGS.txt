#expectes a temp variable country_to_initiate which should contain original_tag to instantiate as a collabration government
SGS_effect_civil_war_begin = {
    custom_effect_tooltip = SGS_civil_war_begin_ins
    hidden_effect = {
    }
}

#鹰鸽派机制
SGS_init_hawk_dove_value = {
    set_variable = {sgs_hawk_infl = 50}
    set_variable = {sgs_dove_infl = 50}
}
SGS_deal_after_hawk_cal = {
    clamp_variable = {
        var = sgs_hawk_infl
        min = 0
        max = 100
    }
    set_temp_variable = { temp1 = 100 }
    subtract_from_temp_variable = { temp1 = sgs_hawk_infl }
    set_variable = { sgs_dove_infl = temp1 }
}
SGS_deal_after_dove_cal = {
    clamp_variable = {
        var = sgs_dove_infl
        min = 0
        max = 100
    }
    set_temp_variable = { temp1 = 100 }
    subtract_from_temp_variable = { temp1 = sgs_dove_infl }
    set_variable = { sgs_hawk_infl = temp1 }
}
SGS_hawk_reduce5 = {
    custom_effect_tooltip = SGS_hawk_reduce5_tooltip
    add_to_variable = { sgs_hawk_infl = -5}
    SGS_deal_after_hawk_cal = yes
}
SGS_hawk_rise5 = {
    custom_effect_tooltip = SGS_hawk_rise5_tooltip
    add_to_variable = { sgs_hawk_infl = 5}
    SGS_deal_after_hawk_cal = yes
}
SGS_hawk_rise10 = {
    custom_effect_tooltip = SGS_hawk_rise10_tooltip
    add_to_variable = { sgs_hawk_infl = 10}
    SGS_deal_after_hawk_cal = yes
}
SGS_hawk_rise20 = {
    custom_effect_tooltip = SGS_hawk_rise20_tooltip
    add_to_variable = { sgs_hawk_infl = 20}
    SGS_deal_after_hawk_cal = yes
}
SGS_dove_reduce5 = {
    custom_effect_tooltip = SGS_dove_reduce5_tooltip
    add_to_variable = { sgs_dove_infl = -5}
    SGS_deal_after_dove_cal = yes
}
SGS_dove_rise5 = {
    custom_effect_tooltip = SGS_dove_rise5_tooltip
    add_to_variable = { sgs_dove_infl = 5}
    SGS_deal_after_dove_cal = yes
}
SGS_dove_rise10 = {
    custom_effect_tooltip = SGS_dove_rise10_tooltip
    add_to_variable = { sgs_dove_infl = 10}
    SGS_deal_after_dove_cal = yes
}
SGS_dove_rise20 = {
    custom_effect_tooltip = SGS_dove_rise20_tooltip
    add_to_variable = { sgs_dove_infl = 20}
    SGS_deal_after_dove_cal = yes
}

SGS_calculate_black_market_repo_kappa = {
    every_country = {
        limit = {
            has_idea = Kappa
        }
        
        add_to_variable = {global.sgs_equip_num = num_equipment@var:global.sgs_equip_type }
    }
    multiply_variable = {global.sgs_equip_num = 0.2}
}
SGS_calculate_black_market_repo_fairy = {
    every_neighbor_country = {
               
        add_to_variable = {global.sgs_equip_num = num_equipment@var:global.sgs_equip_type }
    }
    multiply_variable = {global.sgs_equip_num = 0.1}
}

SGS_calculate_black_market_repo_human = {
    every_neighbor_country = {
        limit = {
            has_idea = Human
        }    
        add_to_variable = {global.sgs_equip_num = num_equipment@var:global.sgs_equip_type }
    }
    multiply_variable = {global.sgs_equip_num = 0.5}
}

SGS_calculate_black_market_repo = {
    if = {
        limit = {
            check_variable = {sgs_current_black_marketer = 1} #河童
        }
        #gun
        set_variable = {global.sgs_equip_num = 1575} #315*5
        set_variable = { global.sgs_equip_type = token:gun_a }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_gun = global.sgs_equip_num}
        #sc 
        set_variable = {global.sgs_equip_num = 1800} #360*5
        set_variable = { global.sgs_equip_type = token:magic_core_a }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_SC = global.sgs_equip_num}
        #melee
        set_variable = {global.sgs_equip_num = 3600} #720*5
        set_variable = { global.sgs_equip_type = token:melee_a }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_knife = global.sgs_equip_num}
        #support
        set_variable = {global.sgs_equip_num = 180} #36*5
        set_variable = { global.sgs_equip_type = token:support_equipment }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_support = global.sgs_equip_num}
        #shield
        set_variable = {global.sgs_equip_num = 1125} #225*5
        set_variable = { global.sgs_equip_type = token:shield_a }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_shield = global.sgs_equip_num}
        #motar
        set_variable = {global.sgs_equip_num = 180} #36*5
        set_variable = { global.sgs_equip_type = token:mortar_a }
        SGS_calculate_black_market_repo_kappa = yes
        set_variable = {sgs_black_market_repo_motar = global.sgs_equip_num}
        
        else_if = {
            limit = {
                check_variable = {sgs_current_black_marketer = 2} #妖精
            }
            #gun
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:gun_a }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_gun = global.sgs_equip_num}
            #sc 
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:magic_core_a }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_SC = global.sgs_equip_num}
            #melee
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:melee_a }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_knife = global.sgs_equip_num}
            #support
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:support_equipment }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_support = global.sgs_equip_num}
            #shield
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:shield_a }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_shield = global.sgs_equip_num}
            #motar
            set_variable = {global.sgs_equip_num = 0} #
            set_variable = { global.sgs_equip_type = token:mortar_a }
            SGS_calculate_black_market_repo_fairy = yes
            set_variable = {sgs_black_market_repo_motar = global.sgs_equip_num}
        }
        else = { #人类
            
            #gun
            set_variable = {global.sgs_equip_num = 350} #
            set_variable = { global.sgs_equip_type = token:gun_a }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_gun = global.sgs_equip_num}
            #sc 
            set_variable = {global.sgs_equip_num = 400} #
            set_variable = { global.sgs_equip_type = token:magic_core_a }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_SC = global.sgs_equip_num}
            #melee
            set_variable = {global.sgs_equip_num = 800} #
            set_variable = { global.sgs_equip_type = token:melee_a }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_knife = global.sgs_equip_num}
            #support
            set_variable = {global.sgs_equip_num = 40} #
            set_variable = { global.sgs_equip_type = token:support_equipment }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_support = global.sgs_equip_num}
            #shield
            set_variable = {global.sgs_equip_num = 250} #
            set_variable = { global.sgs_equip_type = token:shield_a }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_shield = global.sgs_equip_num}
            #motar
            set_variable = {global.sgs_equip_num = 40} #
            set_variable = { global.sgs_equip_type = token:mortar_a }
            SGS_calculate_black_market_repo_human = yes
            set_variable = {sgs_black_market_repo_motar = global.sgs_equip_num}
        }
    }
}
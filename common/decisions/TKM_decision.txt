TKM_join_tech_sharing_category = {

    TKM_For_common_prosperity_dec = {

		icon = generic_political_actions
        allowed = {
          or = {
            tag = RNS
            tag = SBK
            tag = KYK
          }
        }
        visible = {
            is_subject = no 
            is_in_faction = no
            TKM = { has_completed_focus = TKM_Progressive_leader }
            TKM = { has_country_flag = TKM_Priyoukai_Co_Prosperity_Circle_flag }
        }
		    target_trigger = {
			    FROM = {
			      original_tag = TKM
          }
        }
        targets = {
          TKM
        }

        available = {
            TKM = { is_faction_leader = yes }
            NOT = { has_war_with = TKM } 
            or = {
              has_defensive_war = yes
              TKM = { 
                or = {
                  has_defensive_war = yes
                  any_enemy_country = {
                    is_major = yes
                  }
                  threat > 0.50
                  surrender_progress > 0
                  casualties > 499
                }
              }
            }
        }

        cost = 0

        fire_only_once = yes 

        complete_effect = {

          if = {
            limit = {
              tag = RNS
            }
            TKM = {
              add_to_faction = RNS
            }
          }

          if = {
            limit = {
              tag = SBK
            }
            TKM = {
              add_to_faction = SBK
            }
          }

          if = {
            limit = {
              tag = KYK
            }
            TKM = {
              add_to_faction = KYK
            }
          }

        }

        ai_will_do = {
            factor = 30
        }

    }

    TKM_For_HUM_TKM_dec = {

		icon = generic_political_actions
        allowed = {
          tag = HUM
        }
        visible = {
            has_government = guli
            is_subject = no 
            is_in_faction = no
            TKM = { has_completed_focus = TKM_Business_as_usual }
            TKM = { has_country_flag = TKM_Priyoukai_Co_Prosperity_Circle_flag }
            TKM = { has_idea = TKM_Guardian_of_mankind_idea }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = TKM
          }
        }
        targets = {
          TKM
        }

        available = {
            TKM = { is_faction_leader = yes }
            NOT = { has_war_with = TKM } 
        }

        cost = 0

        fire_only_once = yes 

        complete_effect = {
          if = {
            limit = {
              tag = HUM
            }
            TKM = {
              add_to_faction = HUM
            }
          }
        }

        ai_will_do = {
          factor = 30
          modifier = {
            NMS = {
              has_war_with = TKM
              is_subject = no
              NOT = { surrender_progress > 0 }
            }
            factor = 0
          }
          modifier = {
            SRB = {
              has_war_with = TKM
              is_subject = no
              NOT = { surrender_progress > 0 }
            }
            factor = 0
          }
          modifier = {
            TKM = { surrender_progress > 0 }
            factor = 0
          }
        }

    }

    TKM_join_lihuaxueyanjiusuo_dec = {

		icon = generic_research

        visible = {
            NOT = { tag = TKM }
            is_subject = no 
            TKM = { has_completed_focus = TKM_Guide_the_progress_of_the_youkai }
            is_in_faction_with = TKM
        }

		    target_trigger = {
			    FROM = {
			      original_tag = TKM
          }
        }
        targets = {
          TKM
        }
        available = {
          is_in_faction_with = TKM
        }

        cost = 0

        fire_only_once = yes 

        complete_effect = {

          if = {
            limit = {
              NOT = {
                is_in_tech_sharing_group = lihuaxueyanjiusuo
              }
            }
            add_to_tech_sharing_group = lihuaxueyanjiusuo
          }

        }

        ai_will_do = {
            factor = 30
        }

    }

    TKM_join_jingjihezuoshe_dec = {

		icon = generic_research

        visible = {
            NOT = { tag = TKM }
            is_subject = no 
            TKM = { has_completed_focus = TKM_The_beacon_of_revolution_in_the_south }
            is_in_faction_with = TKM
            has_government = fandong
        }

		    target_trigger = {
			    FROM = {
			      original_tag = TKM
          }
        }
        targets = {
          TKM
        }

        available = {
            is_in_faction_with = TKM
            has_government = fandong
        }

        cost = 0

        fire_only_once = yes 

        complete_effect = {

          if = {
            limit = {
              NOT = {
                is_in_tech_sharing_group = jingjihezuoshe
              }
            }
            add_to_tech_sharing_group = jingjihezuoshe
          }

        }

        ai_will_do = {
            factor = 30
        }

    }

}

TKM_Manage_human_affairs_category = {

    TKM_Mankind_is_open_dec = {
		    icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Revolutionary_vanguard }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        targets = {
          HUM
        }

        available = {
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60
        fire_only_once = yes 


        complete_effect = {



        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

          custom_effect_tooltip = TKM_renleikaifang_tt
          every_country = {
            limit = {
              or = {
                has_idea = Tenggu
                has_idea = Kappa
                has_idea = Youkai
                has_idea = Pri_youkai
                has_idea = God
                tag = SCA
              }
              capital_scope = {
                is_on_continent = Gensokyo
              }
              not = {
                tag = OKI
                tag = YKR
                tag = KAS
                tag = TKM
              }
            }
            country_event = { id = kog2.55 days = 2}
          }
          hidden_effect = {
            news_event = { id = kog2.41 days = 32}
          }

        }
        ai_will_do = {
            factor = 30
        }

    }

    TKM_Set_up_border_demilitarized_zone_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Returning_props }
        }
		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        targets = {
          HUM
        }

        available = {
            NOT = { is_in_faction_with = HUM }
            NOT = { HUM = { is_subject_of = TKM } }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
            }
            250 = {
                is_demilitarized_zone = no
            }
        }

        modifier = {

        }

        cost = 50

        days_remove = 90
        days_re_enable = 182
        fire_only_once = no 


        complete_effect = {

            if = {
              limit = { 
                NOT = { has_country_flag = TKM_first_Demilitarized_zone_flag }
              }			
              set_country_flag = TKM_first_Demilitarized_zone_flag
              HMIF_daily_factor_minus0.1 = yes
            }

            250 = {
                set_demilitarized_zone = yes
              }

        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {



        }
        ai_will_do = {
            factor = 1
            modifier = {
                has_country_flag = TKM_First_disarmament_flag
                factor = 30
            }
            modifier = {
                has_country_flag = TKM_First_sweep_flag
                factor = 30
            }
        }

    }

    TKM_Ask_for_more_compensation_dec = {

		icon = generic_oppression
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Returning_props }
            num_of_factories < 50
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        targets = {
          HUM
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
            }
            num_of_factories < 50
        	  HUM = { num_of_civilian_factories_available_for_projects > 5 }
        }

        days_remove = 120
        days_re_enable = 182
        fire_only_once = no

        cost = tkm_mingong_cost


        complete_effect = {
            HUM = {
                add_ideas = TKM_fulfil_requirements_idea
            }
            add_offsite_building = {
                type = industrial_complex
                level = 5
            }
            add_to_variable = {
                tkm_mingong_cost = 50
            }
            custom_effect_tooltip = tkm_zujie_tt
        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {
            HUM = {
                remove_ideas = TKM_fulfil_requirements_idea
            }
            add_offsite_building = {
                type = industrial_complex
                level = -5
            }
        }

        ai_will_do = {
            factor = 60
        }

    }

    TKM_Expansion_warning_dec = {

		icon = generic_oppression
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Returning_props }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        targets = {
          HUM
        }

        available = {
            NOT = { HUM = { is_subject_of = TKM } }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
            }
			      strength_ratio = { tag = HUM ratio < 0.90 }
			      HUM = { has_army_manpower = { size > 1999 } }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.2
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            HUM = {
                add_ideas = TKM_Military_sanctions_idea
                country_event = { id = kog2.72 days = 2}
            }
        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

            set_country_flag = TKM_First_disarmament_flag

            HUM = {
                remove_ideas = TKM_Military_sanctions_idea
            }
        }

        ai_will_do = {
            factor = 1
        }

    }

    TKM_Expansion_warning_2_dec = {

		icon = generic_oppression
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Returning_props }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        targets = {
          HUM
        }

        available = {
            NOT = { HUM = { is_subject_of = TKM } }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
            }
			      strength_ratio = { tag = HUM ratio < 0.90 }
			      HUM = { has_army_manpower = { size > 1999 } }
            has_country_flag = TKM_First_disarmament_flag
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.2
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            HMIF_daily_factor_minus0.1 = yes

            add_war_support = 0.10

            HUM = {
                add_ideas = TKM_Military_sanctions_2_idea
                country_event = { id = kog2.73 days = 2}
            }
        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM 
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

            set_country_flag = TKM_sec_disarmament_flag

            HUM = {
                remove_ideas = TKM_Military_sanctions_2_idea
            }
        }

        ai_will_do = {
            factor = 1
        }

    }

    TKM_Suppress_extreme_forces_in_people_dec = {

		icon = generic_oppression
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            NOT = { HUM = { is_subject_of = TKM } }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Returning_props
            }
            or = {
              HUM = { qinwai > 0.35 }
              HUM = { fandong > 0.35 }
              HUM = { neworder > 0.35 }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.2
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            HUM = {
                add_ideas = TKM_Suppress_extreme_forces_idea
                country_event = { id = kog2.74 days = 2}
            }
        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

            set_country_flag = TKM_First_sweep_flag

            HUM = {
                remove_ideas = TKM_Suppress_extreme_forces_idea
            }
        }

        ai_will_do = {
            factor = 1
        }

    }

    TKM_Suppress_extreme_forces_in_people_2_dec = {

		icon = generic_oppression

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            NOT = { HUM = { is_subject_of = TKM } }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Returning_props
            }
            or = {
              HUM = { qinwai > 0.35 }
              HUM = { fandong > 0.35 }
              HUM = { neworder > 0.35 }
            }
            has_country_flag = TKM_First_sweep_flag
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.2
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            HMIF_daily_factor_minus0.1 = yes

            add_war_support = 0.10

            HUM = {
                add_ideas = TKM_Suppress_extreme_forces_2_idea
                country_event = { id = kog2.75 days = 2}
            }
        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

            set_country_flag = TKM_sec_sweep_flag

            HUM = {
                remove_ideas = TKM_Suppress_extreme_forces_2_idea
            }
        }

         ai_will_do = {
            factor = 1
        }

    }

    TKM_emergency_plan_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no
				    NOT = { is_in_faction_with = HUM }
            NOT = { HUM = { is_subject_of = TKM } }
            NOT = { TKM = { owns_state = 246 } }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            or = {
              AND = {
                has_country_flag = TKM_sec_disarmament_flag
                strength_ratio = { tag = HUM ratio < 0.90 }
              }
              AND = {
                has_country_flag = TKM_sec_sweep_flag
                or = {
                  HUM = { qinwai > 0.35 }
                  HUM = { fandong > 0.35 }
                  HUM = { neworder > 0.35 }
                }
              }
              HUM = { has_government = qinwai }
              HUM = { has_government = fandong }
              HUM = { has_government = neworder }
              AND = {
                HUM = { is_subject = yes }
                NOT = { HUM = { is_subject_of = TKM } }
              }
              AND = {
                HUM = { is_in_faction = yes }
                NOT = { HUM = { is_in_faction_with = TKM } }
              }
              AND = {
                country_exists = ZBT
                NOT = { ZBT = { is_subject_of = HUM } }
              }
              AND = {
                ZBT = { is_in_faction = yes }
                NOT = { ZBT = { is_in_faction_with = TKM } }
              }
              NOT = { country_exists = HUM }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
            HUM = {
              before_declare_war = yes
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        days_remove = 60

        fire_only_once = yes

        cost = 0


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_HUM_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_guaranteed = HUM
              }			
              diplomatic_relation = {
                  country = HUM
                  relation = guarantee
                  active = no
              }
            }

            if = {
              limit = { 
                has_military_access_to = HUM
              }			
              diplomatic_relation = {
                  country = HUM
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                HUM = { has_military_access_to = TKM }
              }			
              HUM = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                has_military_access_to = ZBT
              }			
              diplomatic_relation = {
                  country = ZBT
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                ZBT = { has_military_access_to = TKM }
              }			
              ZBT = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                250 = {
                  is_demilitarized_zone = yes
                }
              }			
              add_state_claim = 250
		          transfer_state = 250
            }

            if = {
              limit = { 
                country_exists = HUM
                NOT = { has_war_with = HUM }
                NOT = { HUM = { is_in_faction_with = TKM } }
                NOT = { HUM = { is_subject_of = TKM } }
              }			
              HUM = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                HUM = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    HUM = { is_subject_of = TKM }
                  }
                }
              }
              HUM = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

            if = {
              limit = { 
                country_exists = ZBT
                NOT = { has_war_with = ZBT }
                NOT = { ZBT = { is_in_faction_with = TKM } }
                NOT = { ZBT = { is_subject_of = TKM } }
              }			
              ZBT = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                ZBT = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    ZBT = { is_subject_of = TKM }
                    ZBT = { is_subject_of = HUM }
                  }
                }
              }
              ZBT = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

            if = {
              limit = { 
                country_exists = HKR
                HKR = { owns_state = 246 }
                NOT = { has_war_with = HKR }
                NOT = { HKR = { is_in_faction_with = TKM } }
                NOT = { HKR = { is_subject_of = TKM } }
              }			
              HKR = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

		        add_timed_idea = { idea = tkm_angry_idea days = 60 }

            if = {
              limit = { 
			          is_ai = yes
                country_exists = HUM
                NOT = { has_war_with = HUM }
                NOT = { HUM = { is_in_faction_with = TKM } }
                NOT = { HUM = { is_subject_of = TKM } }
              }			
              declare_war_on = {
                type = puppet_wargoal_focus
                target = HUM
              } 
            }

            if = {
              limit = {
			          is_ai = no
                country_exists = HUM
                NOT = { has_war_with = HUM }
                NOT = { HUM = { is_in_faction_with = TKM } }
                NOT = { HUM = { is_subject_of = TKM } }
              }
              create_wargoal = {
                type = puppet_wargoal_focus
                target = HUM
              } 

            }

            if = {
              limit = { 
			          is_ai = yes
                country_exists = ZBT
                NOT = { has_war_with = ZBT }
                NOT = { ZBT = { is_in_faction_with = TKM } }
                NOT = { ZBT = { is_subject_of = TKM } }
              }			
              declare_war_on = {
                type = puppet_wargoal_focus
                target = ZBT
              } 
            }

            if = {
              limit = { 
			          is_ai = no
                country_exists = ZBT
                NOT = { has_war_with = ZBT }
                NOT = { ZBT = { is_in_faction_with = TKM } }
                NOT = { ZBT = { is_subject_of = TKM } }
              }			
              create_wargoal = {
                type = puppet_wargoal_focus
                target = ZBT
              } 
            }

            if = {
              limit = { 
			          is_ai = yes
                country_exists = HKR
                HKR = { owns_state = 246 }
                NOT = { has_war_with = HKR }
                NOT = { HKR = { is_in_faction_with = TKM } }
                NOT = { HKR = { is_subject_of = TKM } }
              }			
              246 = {
                owner = {
                  TKM = {
                    declare_war_on = {
                      type = take_state_focus
                      target = PREV
                      generator = { 246 }
                    }
                  }
                }
              }
            }

            if = {
              limit = { 
			          is_ai = no
                country_exists = HKR
                HKR = { owns_state = 246 }
                NOT = { has_war_with = HKR }
                NOT = { HKR = { is_in_faction_with = TKM } }
                NOT = { HKR = { is_subject_of = TKM } }
              }			
              246 = {
                owner = {
                  TKM = {
                    create_wargoal = {
                      type = take_state_focus
                      target = PREV
                      generator = { 246 }
                    }
                  }
                }
              }
            }

        }

        ai_will_do = {
          factor = 1000
          modifier = {
	    			date < 148.1.1
            HUM = { is_subject = no }
            factor = 0
          }
          modifier = {
            any_country = {
              has_country_flag = HUM_defence
              NOT = { has_war_with = TKM }
              has_war_together_with = HUM
            }
            has_war_together_with = HUM
            factor = 0
          }
        }

    }

    TKM_Liberation_Item_Agreement_dec = {

		    icon = generic_political_actions

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_The_liberation_of_props
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            custom_trigger_tooltip = {
                tooltip = TKM_chengweizhenzhengdeshenming_tt
                or = {
                  check_variable = { HMIF_influence > 99.99}
                  is_ai = yes
                }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        cost = 50

        fire_only_once = yes 


        complete_effect = {

            set_global_flag = TKM_Liberation_Item_Agreement_flag

		        HMIF_daily_factor_minus0.1 = yes
            set_variable = { HMIF_influence = 0}

            HUM = {
                add_ideas = TKM_Liberation_Item_Agreement_idea
                country_event = { id = kog2.77 days = 2}
            }

            ZBT = {
                add_ideas = TKM_Liberation_Item_Agreement_idea
                country_event = { id = kog2.77 days = 2}
            }

            add_ideas = TKM_New_props_from_people_idea


        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

        }
        ai_will_do = {
            factor = 200
        }

    }

    TKM_Help_human_beings_dec = {

		    icon = generic_political_actions

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Progressive_leader }
            NOT = { has_completed_focus = TKM_Revolutionary_vanguard }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }
        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Returning_props
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        days_remove = 60

        fire_only_once = yes

        cost = 0


        complete_effect = {


        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

          set_country_flag = TKM_Help_human_beings_flag

          PO_add5 = yes
          OL_add2 = yes
          HMIF_daily_factor_add0.1 = yes
          HUM = {
              ROOT = {
                add_ai_strategy = {
                  type = befriend
                  id = PREV
                  value = 60
                }
              }
              add_ai_strategy = {
                type = befriend
                id = ROOT
                value = 60
              }
              add_opinion_modifier = { target = ROOT modifier = TKM_bangzhurenleichengweifusangshenshi_op}
              reverse_add_opinion_modifier = { target = ROOT modifier = TKM_bangzhurenleichengweifusangshenshi_op}
          }
          hidden_effect = {
              news_event = { days = 2 id = kog2.44 }
          }

        }

        ai_will_do = {
            factor = 1
        }

    }

    TKM_Expansion_of_the_Human_Freikorps_dec = {

		    icon = ger_reichskommissariats

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            NOT = { has_completed_focus = TKM_Progressive_leader }
            NOT = { has_completed_focus = TKM_Revolutionary_vanguard }
            has_full_control_of_state = 196
            num_of_civilian_factories_available_for_projects > 3
            NOT = { has_country_flag = TKM_Recruiting_the_Freikorps_for_3_flag }
            has_country_flag = TKM_Help_human_beings_flag
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Returning_props
            }
            has_completed_focus = TKM_Accept_human_veterans
        }

        modifier = {
				    civilian_factory_use = 3
        }

        days_remove = 60

        fire_only_once = no

        cost = tkm_Freikorps_cost


        complete_effect = {

            if = {
              limit = { 
              has_country_flag = TKM_Recruiting_the_Freikorps_for_2_flag
              NOT = { has_country_flag = TKM_Recruiting_the_Freikorps_for_3_flag }              
              }	
              			
              set_country_flag = TKM_Recruiting_the_Freikorps_for_3_flag
            }

            if = {
              limit = { 
              has_country_flag = TKM_Recruiting_the_Freikorps_for_1_flag
              NOT = { has_country_flag = TKM_Recruiting_the_Freikorps_for_2_flag }              
              }	
              			
              set_country_flag = TKM_Recruiting_the_Freikorps_for_2_flag
            }

            if = {
              limit = { NOT = { has_country_flag = TKM_Recruiting_the_Freikorps_for_1_flag } }	
              			
              set_country_flag = TKM_Recruiting_the_Freikorps_for_1_flag

              division_template = {
                name = "自由军团" 
                priority = 1
                is_locked = yes

                regiments = {
                  sc_infantry = { x = 0 y = 0 }
                  sc_infantry = { x = 0 y = 1 }
                  sc_infantry = { x = 0 y = 2 }
                  sc_infantry = { x = 0 y = 3 }				
                  sc_mortar_brigade = { x = 0 y = 4 }

                }

              }

            }

            add_to_variable = {
                tkm_Freikorps_cost = 50
            }
            custom_effect_tooltip = tkm_Freikorps_tt

        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
          NOT = { has_full_control_of_state = 196 }
        }

        remove_effect = {

			      army_experience = 5

            custom_effect_tooltip = tkm_Freikorps_1_tt

            hidden_effect = {
              load_oob = "TKM_Korp"
            }

            HUM = {
               add_manpower = -50
            }
        }

        ai_will_do = {
            factor = 30
        }

    }

    TKM_mefo_bills_dec = {

      icon = ger_mefo_bills

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Armaments_payment_promissory_note
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            NOT = { has_idea = TKM_mefo_bills_1_idea }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        days_remove = 60

        fire_only_once = yes

        cost = 0


        complete_effect = {



        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

		        HMIF_daily_factor_minus0.1 = yes

            set_country_flag = TKM_Loan_date_flag

            set_country_flag = {
              flag = TKM_Repayment_date_flag
              days = 1095
              value = 1
            }

		        add_timed_idea = { idea = TKM_mefo_bills_2_idea days = 365 }

            HUM = {
		          add_timed_idea = { idea = TKM_Buy_promissory_note_idea days = 365 }
              country_event = { id = kog2.82 days = 2}
            }

            ZBT = {
		          add_timed_idea = { idea = TKM_Buy_promissory_note_idea days = 365 }
              country_event = { id = kog2.82 days = 2}
            }

        }

      ai_will_do = {
        factor = 1
      }
    }

    TKM_Define_Tsukumogami_dec = {

		icon = generic_political_discourse

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Tsukumogami
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.3
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {



        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

          set_country_flag = TKM_Define_Tsukumogami_flag

          set_country_flag = OL_to_weixin
          add_war_support = 0.05
          EXHC_exhaustion_factor_add15 = yes
          lobbyincrease = yes

          hidden_effect = {
              news_event = { days = 2 id = kog2.20 }
          }

        }

      ai_will_do = {
        factor = 1
      }
    }

    TKM_Become_true_god_dec = {

		    icon = generic_political_discourse

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Tsukumogami
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            has_country_flag = TKM_Define_Tsukumogami_flag
            custom_trigger_tooltip = {
                tooltip = TKM_chengweizhenzhengdeshenming_tt
                or = {
                  check_variable = { HMIF_influence > 99.99}
                  is_ai = yes
                }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        days_remove = 60

        fire_only_once = yes

        cost = 0


        complete_effect = {



        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

          set_country_flag = TKM_Become_true_god_flag
          custom_effect_tooltip = TKM_chengweizhenzhengdeshenming_tt2
          PO_influence_factor0.1 = yes
          add_ideas = God
          add_ideas = TKM_chengweizhenzhengdeshenming_idea
          set_variable = { HMIF_influence = 0}
          race_tech_clear = yes 

          hidden_effect = {
            every_owned_state = {
              limit = {
                or = {
                  is_core_of = TKM 
                  is_claimed_by = TKM
                }
              }
              set_variable = { ST_present_race = 3}
            }

            if = {
              limit = {
                MTM = { is_subject_of = TKM }
              }
              MTM = {
                every_owned_state = {
                  limit = {
                    is_core_of = MTM 
                  }
                  set_variable = { ST_present_race = 3}
                }
              }
            }
          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.21 }
          }

        }

      ai_will_do = {
        factor = 1
      }
    }

    TKM_Secretly_rearm_dec = {

		icon = generic_construction

        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Cooperative_Military_Project
            num_of_civilian_factories_available_for_projects > 3
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {

        }

        modifier = {
				    civilian_factory_use = 3
        }

        days_remove = 120

        fire_only_once = yes

        cost = 50


        complete_effect = {



        }

        cancel_trigger = {
          or = {
            NOT = { country_exists = HUM }
            has_war_with = HUM
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
          }
        }

        remove_effect = {

          set_country_flag = TKM_Secretly_rearm_flag

          HUM = {
          add_ideas = TKM_Circumvent_the_restrictions_of_the_treaty_idea
          add_offsite_building = {
              type = arms_factory
              level = 4
          }
          }

        }

      ai_will_do = {
        factor = 1
      }
    }

    TKM_Recoup_our_investment_dec = {

		icon = generic_construction

        visible = {
            is_subject = no
            num_of_civilian_factories_available_for_projects > 3
            has_country_flag = TKM_Secretly_rearm_flag
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
          or = {
              AND = {
                has_war = yes
                any_enemy_country = {
                  is_major = yes
                }
              }
              HUM = { qinwai > 0.35 }
              HUM = { fandong > 0.35 }
              HUM = { neworder > 0.35 }
              HUM = { has_government = qinwai }
              HUM = { has_government = fandong }
              HUM = { has_government = neworder }
              has_war_with = HUM
              AND = {
                HUM = { is_subject = yes }
                NOT = { HUM = { is_subject_of = TKM } }
              }
              AND = {
                country_exists = ZBT
                NOT = { ZBT = { is_subject_of = HUM } }
              }
              NOT = { country_exists = HUM }
          }
        }

        modifier = {
				    civilian_factory_use = 3
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {



        }

        cancel_trigger = {

        }

        remove_effect = {

          add_offsite_building = {
              type = arms_factory
              level = 4
          }

          HUM = {
          add_offsite_building = {
              type = arms_factory
              level = -4
          }
          }

        }

      ai_will_do = {
        factor = 1
        modifier = {
          or = {
            is_in_faction_with = HUM
            has_war_together_with = HUM
          }
          factor = 0
        }
      }
    }

    TKM_Regain_control_of_humanity_dec = {

		icon = generic_political_discourse

        visible = {
            is_subject = no
            NOT = { has_idea = TKM_Guardian_of_mankind_idea }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {
            HUM = { is_subject_of = TKM }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    civilian_factory_use = 3
				    political_power_cost = 0.5
        }

        days_remove = 60

        fire_only_once = no

        cost = 0


        complete_effect = {



        }

        cancel_trigger = {

        }

        remove_effect = {

            add_ideas = TKM_Guardian_of_mankind_idea

            if = {
              limit = { 
                has_global_flag = TKM_Liberation_Item_Agreement_flag
              }			
              add_ideas = TKM_New_props_from_people_idea
            }

            if = {
              limit = { 
                has_global_flag = TKM_Cooperative_Military_Project_flag
              }			
              add_ideas = TKM_jianliduoduolangduanzaogongsi_idea
            }

            if = {
              limit = { 
                has_global_flag = TKM_Return_to_the_original_owner_flag
              }			
              add_ideas = TKM_Human_immigration_idea
            }

            if = {
              limit = { 
                country_exists = HUM
                HUM = { is_subject_of = TKM }
              }			
              HUM = {
                add_ideas = TKM_Protection_of_props_idea

                if = {
                  limit = { 
                    has_global_flag = TKM_Liberation_Item_Agreement_flag
                  }			
                  add_ideas = TKM_Liberation_Item_Agreement_idea
                }

                if = {
                  limit = { 
                    has_global_flag = TKM_Cooperative_Military_Project_flag
                  }			
                  add_ideas = TKM_jianliduoduolangduanzaogongsi_idea
                }

                if = {
                  limit = { 
                    has_global_flag = TKM_Return_to_the_original_owner_flag
                  }			
                  swap_ideas = { add_idea = TKM_Protection_of_props_2_idea remove_idea = TKM_Protection_of_props_idea }
                }

              }
            }

            if = {
              limit = { 
                country_exists = ZBT
                ZBT = { is_subject_of = TKM }
              }			
              ZBT = {
                add_ideas = TKM_Protection_of_props_idea

                if = {
                  limit = { 
                    has_global_flag = TKM_Liberation_Item_Agreement_flag
                  }			
                  add_ideas = TKM_Liberation_Item_Agreement_idea
                }

                if = {
                  limit = { 
                    has_global_flag = TKM_Cooperative_Military_Project_flag
                  }			
                  add_ideas = TKM_jianliduoduolangduanzaogongsi_idea
                }

                if = {
                  limit = { 
                    has_global_flag = TKM_Return_to_the_original_owner_flag
                  }			
                  swap_ideas = { add_idea = TKM_Protection_of_props_2_idea remove_idea = TKM_Protection_of_props_idea }
                }

              }
            }

        }

      ai_will_do = {
        factor = 1
      }
    }

}

TKM_category = {

    TKM_Operation_No_99_dec = {
      icon = hol_draw_up_staff_plans

      available = {
        is_subject = no 
        has_war = no
      }
      allowed = {
        tag = TKM
      }
      is_good = no

      activation = {
        has_completed_focus = TKM_Operation_No_99
        NOT = { has_country_flag = TKM_Operation_No_99_flag }
      }

      days_mission_timeout = 365

      ai_will_do = { factor = 1000 }

      complete_effect = {
        add_political_power = 150
        add_stability = 0.15
        add_war_support = 0.15
        set_country_flag = TKM_Operation_No_99_flag
      }

      timeout_effect = {
        if = {
          limit = {
            TKM = { is_ai = no }
          }      
          add_political_power = -250
          add_stability = -0.25
          add_war_support = -0.25
          set_country_flag = TKM_Operation_No_99_flag
        }

        if = {
          limit = {
            TKM = { is_ai = yes }
          }      
          add_political_power = -150
          add_stability = -0.15
          add_war_support = -0.15
          set_country_flag = TKM_Operation_No_99_flag
        }

      }
    }

    TKM_War_against_pacifism_dec = {

		icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              has_idea = TKM_shell_shocked_spectator_5
              has_idea = TKM_shell_shocked_spectator_4
              has_idea = TKM_shell_shocked_spectator_3
              has_idea = TKM_shell_shocked_spectator_2
              has_idea = TKM_shell_shocked_spectator_1
            }
        }
        available = {

            if = {
              limit = { 
                has_idea = TKM_shell_shocked_spectator_5
              }
              or = {
                has_war = yes
                threat > 0.25
              }
            }

            if = {
              limit = { 
                has_idea = TKM_shell_shocked_spectator_4
              }
              or = {
                has_war = yes
                threat > 0.30
              }
            }

            if = {
              limit = { 
                has_idea = TKM_shell_shocked_spectator_3
              }
              or = {
                has_war = yes
                threat > 0.35
              }
            }

            if = {
              limit = { 
                has_idea = TKM_shell_shocked_spectator_2
              }
              or = {
                has_war = yes
                threat > 0.40
              }
            }

            if = {
              limit = { 
                has_idea = TKM_shell_shocked_spectator_1
              }
              or = {
                has_war = yes
                threat > 0.45
              }
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.25
            neworder_drift = 0.01
            fandong_drift = 0.01
            mobilization_speed = 0.25
        }

        cost = 0

        days_remove = 60
        fire_only_once = no 


        complete_effect = {

        }

        cancel_trigger = {
          or = {
            is_subject = yes 
            AND = {
              NOT = { has_idea = TKM_shell_shocked_spectator_5 }
              NOT = { has_idea = TKM_shell_shocked_spectator_4 }
              NOT = { has_idea = TKM_shell_shocked_spectator_3 }
              NOT = { has_idea = TKM_shell_shocked_spectator_2 }
              NOT = { has_idea = TKM_shell_shocked_spectator_1 }
            }
          }
        }

        remove_effect = {
            TKM_War_against_pacifism = yes

            if = {
              limit = {
                 has_idea = civilian_economy
              }
              swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation }
            }

            add_war_support = 0.05
        }
        ai_will_do = {
            factor = 10
        }

    }

    TKM_War_against_pacifism_2_dec = {

		icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              has_idea = TKM_shell_shocked_spectator_5
              has_idea = TKM_shell_shocked_spectator_4
              has_idea = TKM_shell_shocked_spectator_3
              has_idea = TKM_shell_shocked_spectator_2
              has_idea = TKM_shell_shocked_spectator_1
            }
        }
        available = {
            or = {
              has_defensive_war = yes
              any_enemy_country = {
                is_major = yes
              }
              threat > 0.50
              surrender_progress > 0
			        casualties > 499
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.50
            neworder_drift = 0.05
            fandong_drift = 0.05
        }

        cost = 0

        days_remove = 10
        fire_only_once = yes 


        complete_effect = {

        }

        cancel_trigger = {
            is_subject = yes 
        }

        remove_effect = {

            if = {
              limit = {
                 has_idea = low_economic_mobilisation
              }
              swap_ideas = { remove_idea = low_economic_mobilisation add_idea = partial_economic_mobilisation }
            }

            if = {
              limit = { has_idea = TKM_shell_shocked_spectator_5 }
              swap_ideas = {
                remove_idea = TKM_shell_shocked_spectator_5
                add_idea = TKM_shell_shocked_spectator_4
              }

              add_political_power = -25
              add_stability = -0.025
            }

            if = {
              limit = { has_idea = TKM_shell_shocked_spectator_4 }
              swap_ideas = {
                remove_idea = TKM_shell_shocked_spectator_4
                add_idea = TKM_shell_shocked_spectator_3
              }

              add_political_power = -25
              add_stability = -0.025
            }

            if = {
              limit = { has_idea = TKM_shell_shocked_spectator_3 }
              swap_ideas = {
                remove_idea = TKM_shell_shocked_spectator_3
                add_idea = TKM_shell_shocked_spectator_2
              }

              add_political_power = -25
              add_stability = -0.025
            }

            if = {
              limit = { has_idea = TKM_shell_shocked_spectator_2 }
              swap_ideas = {
                remove_idea = TKM_shell_shocked_spectator_2
                add_idea = TKM_shell_shocked_spectator_1
              }

              add_political_power = -25
              add_stability = -0.025
            }

            if = {
              limit = { has_idea = TKM_shell_shocked_spectator_1 }
              remove_ideas = { TKM_shell_shocked_spectator_1 }

              add_political_power = -25
              add_stability = -0.025
            }

        }
        ai_will_do = {
            factor = 10
        }

    }

    TKM_Proper_nationalism_dec = {
		    icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_completed_focus = TKM_Proper_nationalism
        }
        available = {
          or = {
            AND = {
                has_government = qinwai
                qinwai > 0.50
            }
            AND = {
                has_government = guli
                guli > 0.25
            }
          }

          custom_trigger_tooltip = {
              tooltip = TKM_Political_points_are_positive_tt
              or = {
                has_political_power > 0
                is_ai = yes
              }
          }

        }

        modifier = {
				    army_attack_factor = 0.10
				    army_morale_factor = 0.10
				    attrition = 0.02
            neworder_drift = 0.05
        }

        cost = 25

        days_remove = 120
        days_re_enable = 182
        fire_only_once = no 


        complete_effect = {

        }

        cancel_trigger = {
            is_subject = yes
        }

        remove_effect = {

        }
        ai_will_do = {
            factor = 25
            modifier = {
                has_war = no
                factor = 0
            }
        }

    }

    TKM_Compromise_with_radicals_dec = {
		    icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_completed_focus = TKM_Compromise_with_radicals
        }
        available = {
          or = {
            AND = {
                has_government = qinwai
                qinwai > 0.50
            }
            AND = {
                has_government = guli
                guli > 0.25
            }
          }

          custom_trigger_tooltip = {
              tooltip = TKM_Political_points_are_positive_tt
              or = {
                has_political_power > 0
                is_ai = yes
              }
          }

        }

        modifier = {
				    production_factory_efficiency_gain_factor = 0.10
            production_factory_max_efficiency_factor = 0.10
				    consumer_goods_factor = 0.02
            fandong_drift = 0.05
        }

        cost = 25

        days_remove = 120
        days_re_enable = 182
        fire_only_once = no 


        complete_effect = {

        }

        cancel_trigger = {
            is_subject = yes
        }

        remove_effect = {

        }
        ai_will_do = {
            factor = 25
            modifier = {
                has_idea = civilian_economy
                factor = 0
            }
        }

    }

    TKM_Unity_Return_Association_dec = {
		    icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_completed_focus = TKM_Proper_nationalism
            has_completed_focus = TKM_Compromise_with_radicals
            has_government = qinwai
        }
        available = {
            has_government = qinwai
            qinwai < 0.50
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.1
            qinwai_drift = 0.05
        }

        cost = 50

        days_remove = 120
        days_re_enable = 182
        fire_only_once = no 


        complete_effect = {
		        HMIF_daily_factor_add0.1 = yes
        }

        cancel_trigger = {
            is_subject = yes 
            NOT = { has_government = qinwai }
        }

        remove_effect = {
		        HMIF_daily_factor_minus0.1 = yes
        }
        ai_will_do = {
          factor = 1
          modifier = {
            qinwai < 0.50
            factor = 100
          }
        }

    }

    TKM_Fix_old_props_dec = {

		icon = generic_political_discourse
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_completed_focus = TKM_Pay_attention_to_old_props
        }
        available = {
            # has_war = no
            # has_idea = TEG_jianshaozhengbing_idea
        }

        modifier = {
            industrial_capacity_factory = -0.3
            weekly_manpower = 10
        }

        cost = 50

        days_remove = 182
        days_re_enable = 365
        fire_only_once = no 


        complete_effect = {

        }
        remove_effect = {

        }
        ai_will_do = {
            factor = 1
            modifier = {
                has_manpower < 1000
                factor = 1500
            }
        }

    }

    TKM_Mobilize_the_SS_1_dec = {
		  icon = ger_reichskommissariats
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Tsukumogami_Schutzstaffel
            has_full_control_of_state = 196
            num_of_civilian_factories_available_for_projects > 5
        }

        available = {
            has_war = yes
        }

        modifier = {
				    civilian_factory_use = 5
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            if = {
              limit = { NOT = { has_country_flag = TKM_Mobilize_the_SS_1_flag } }	
              			
              set_country_flag = TKM_Mobilize_the_SS_1_flag

              division_template = {
                name = "九十九近卫队编制" 
                priority = 1
                is_locked = yes

                regiments = {
                  sc_infantry = { x = 0 y = 0 }
                  sc_infantry = { x = 0 y = 1 }
                  sc_infantry = { x = 0 y = 2 }
                  sc_infantry = { x = 0 y = 3 }				
                  sc_mortar_brigade = { x = 0 y = 4 }

                  sc_infantry = { x = 1 y = 0 }
                  sc_infantry = { x = 1 y = 1 }
                  sc_infantry = { x = 1 y = 2 }			
                  sc_mortar_brigade = { x = 1 y = 3 }

                  melee_infantry = { x = 2 y = 0 }
                  melee_infantry = { x = 2 y = 1 }
                  sc_mortar_brigade = { x = 2 y = 2 }
              }

              }

            }

        }

        cancel_trigger = {
          NOT = { has_full_control_of_state = 196 }
        }

        remove_effect = {

            custom_effect_tooltip = TKM_Mobilize_the_SS_tt

            hidden_effect = {
              load_oob = "TKM_SS_1"
            }

               add_manpower = -100

        }

        ai_will_do = {
            factor = 30
        }

    }

    TKM_Mobilize_the_SS_2_dec = {

		icon = ger_reichskommissariats
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            has_idea = TKM_Guardian_of_mankind_idea
            has_completed_focus = TKM_Tsukumogami_Schutzstaffel
            has_full_control_of_state = 196
            num_of_civilian_factories_available_for_projects > 5
            has_country_flag = TKM_Mobilize_the_SS_1_flag
            has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag
            has_tech = zhiyuanzhuangbei
            has_tech = wunvzhiyuan149
        }

        available = {
            has_war = yes
        }

        modifier = {
				    civilian_factory_use = 5
        }

        days_remove = 120

        fire_only_once = yes

        cost = 0


        complete_effect = {

            if = {
              limit = { NOT = { has_country_flag = TKM_Mobilize_the_SS_2_flag } }	
              			
              set_country_flag = TKM_Mobilize_the_SS_2_flag

              division_template = {
                name = "九十九近卫队后期编制" 
                priority = 1
                is_locked = yes

                regiments = {
                  sc_infantry = { x = 0 y = 0 }
                  sc_infantry = { x = 0 y = 1 }
                  sc_infantry = { x = 0 y = 2 }
                  sc_infantry = { x = 0 y = 3 }				
                  sc_mortar_brigade = { x = 0 y = 4 }

                  sc_infantry = { x = 1 y = 0 }
                  sc_infantry = { x = 1 y = 1 }
                  sc_infantry = { x = 1 y = 2 }			
                  sc_mortar_brigade = { x = 1 y = 3 }

                  sc_infantry = { x = 2 y = 0 }
                  sc_infantry = { x = 2 y = 1 }
                  sc_mortar_brigade = { x = 2 y = 2 }
                }

                support = {
                  sp_wunv = { x = 0 y = 0 } 
                }  

              }

            }

        }

        cancel_trigger = {
          NOT = { has_full_control_of_state = 196 }
        }

        remove_effect = {

            custom_effect_tooltip = TKM_Mobilize_the_SS_tt

            hidden_effect = {
              load_oob = "TKM_SS_2"
            }

               add_manpower = -100

        }

        ai_will_do = {
            factor = 30
        }

    }

}

TKM_Support_the_building_of_allies_category = {

	TKM_Guide_the_progress_of_the_youkai_dec = {
        allowed = {
          tag = TKM
        }
		    icon = generic_construction
		
        fire_only_once = yes
        
        days_remove = 60
        
        visible = {
          has_capitulated = no
          is_subject = no
          is_faction_leader = yes
          has_completed_focus = TKM_Guide_the_progress_of_the_youkai
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = { exists = yes }
        }
        
        target_trigger = {
          FROM = {
            OR = {
              original_tag = SBK
              original_tag = RNS
              original_tag = MTM
              original_tag = MRS
              original_tag = ALI
              original_tag = MYK
              original_tag = NIB
              original_tag = SEJ
              original_tag = RMI
              original_tag = MSD
              original_tag = KAG
              original_tag = INB
              original_tag = BYA
              original_tag = WAK
              original_tag = KYK
            }
          }
        
        }
        targets = {
          SBK RNS MTM MRS ALI MYK NIB SEJ RMI MSD KAG INB BYA WAK KYK
        }

        available = {
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = {
            has_capitulated = no
          }
          FROM = { exists = yes }
        }

        cost = 50
	
        cancel_trigger = {
          or = {
            FROM = {
              NOT = { is_in_faction_with = TKM }
            }
            FROM = {
              is_subject = yes
            }
            FROM = {
              has_capitulated = yes
            }
            FROM = { exists = no }
          }
        }
	
        remove_effect = {
          FROM = {
            country_event = {
              id = kog2.78
            }				
          }
        }
        
        ai_will_do = {
          factor = 30
        }
  }

	TKM_Guide_the_progress_of_the_youkai_2_dec = {
	
		icon = generic_construction
		
        fire_only_once = yes
        
        days_remove = 60
        allowed = {
          tag = TKM
        }
        visible = {
          has_capitulated = no
          is_subject = no
          is_faction_leader = yes
          has_completed_focus = TKM_Guide_the_progress_of_the_youkai
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = { exists = yes }
        }
        
        target_trigger = {
          FROM = {
            OR = {
              original_tag = SBK
              original_tag = RNS
              original_tag = MTM
              original_tag = MRS
              original_tag = ALI
              original_tag = MYK
              original_tag = NIB
              original_tag = SEJ
              original_tag = RMI
              original_tag = MSD
              original_tag = KAG
              original_tag = INB
              original_tag = BYA
              original_tag = WAK
              original_tag = KYK
            }
          }
        }
        targets = {
          SBK RNS MTM MRS ALI MYK NIB SEJ RMI MSD KAG INB BYA WAK KYK
        }

        available = {
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = {
            has_capitulated = no
          }
          FROM = { exists = yes }
          FROM = {
            has_idea = TKM_Economic_Co_Prosperity_Circle_1_idea
          }
        }

        cost = 50
	
        cancel_trigger = {
          or = {
            FROM = {
              NOT = { is_in_faction_with = TKM }
            }
            FROM = {
              is_subject = yes
            }
            FROM = {
              has_capitulated = yes
            }
            FROM = { exists = no }
          }
        }
	
        remove_effect = {
          FROM = {
            country_event = {
              id = kog2.79
            }				
          }
        }
        
        ai_will_do = {
          factor = 30
        }
  }

	TKM_Guide_the_progress_of_the_youkai_3_dec = {
	
		icon = generic_construction
		
        fire_only_once = yes
        
        days_remove = 60
        allowed = {
          tag = TKM
        }
        visible = {
          has_capitulated = no
          is_subject = no
          is_faction_leader = yes
          has_completed_focus = TKM_Guide_the_progress_of_the_youkai
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = { exists = yes }
        }
        
        target_trigger = {
          FROM = {
            OR = {
              original_tag = SBK
              original_tag = RNS
              original_tag = MTM
              original_tag = MRS
              original_tag = ALI
              original_tag = MYK
              original_tag = NIB
              original_tag = SEJ
              original_tag = RMI
              original_tag = MSD
              original_tag = KAG
              original_tag = INB
              original_tag = BYA
              original_tag = WAK
              original_tag = KYK
            }
          }
        }
        targets = {
          SBK RNS MTM MRS ALI MYK NIB SEJ RMI MSD KAG INB BYA WAK KYK
        }

        available = {
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = {
            has_capitulated = no
          }
          FROM = { exists = yes }
          FROM = {
            has_idea = TKM_Economic_Co_Prosperity_Circle_2_idea
          }
        }

        cost = 50
	
        cancel_trigger = {
          or = {
            FROM = {
              NOT = { is_in_faction_with = TKM }
            }
            FROM = {
              is_subject = yes
            }
            FROM = {
              has_capitulated = yes
            }
            FROM = { exists = no }
          }
        }
	
        remove_effect = {
          FROM = {
            country_event = {
              id = kog2.80
            }				
          }
        }
        
        ai_will_do = {
          factor = 40
        }
  }

	TKM_The_beacon_of_revolution_in_the_south_dec = {
	
		icon = generic_construction
		
        fire_only_once = yes
        
        days_remove = 60
        allowed = {
          tag = TKM
        }
        visible = {
          has_capitulated = no
          is_subject = no
          is_in_faction = yes
          has_completed_focus = TKM_The_beacon_of_revolution_in_the_south
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = { exists = yes }
        }
        
        target_trigger = {
          FROM = {
            OR = {
              original_tag = SBK
              original_tag = RNS
              original_tag = MTM
              original_tag = MRS
              original_tag = ALI
              original_tag = MYK
              original_tag = NIB
              original_tag = SEJ
              original_tag = RMI
              original_tag = MSD
              original_tag = KAG
              original_tag = INB
              original_tag = BYA
              original_tag = WAK
              original_tag = KYK
              original_tag = CIR
            }
          }
        }
        targets = {
          SBK RNS MTM MRS ALI MYK NIB SEJ RMI MSD KAG INB BYA WAK KYK CIR
        }

        available = {
          FROM = {
            is_in_faction_with = TKM
          }
          FROM = {
            is_subject = no
          }
          FROM = {
            has_capitulated = no
          }
          FROM = { exists = yes }
          if = {
              limit = { FROM = { tag = MRS } }
              MRS = { has_government = fandong }
          }
          if = {
              limit = { FROM = { tag = ALI } }
              ALI = { has_government = fandong }
          }
        }

        cost = 50
	
        cancel_trigger = {
          or = {
            FROM = {
              NOT = { is_in_faction_with = TKM }
            }
            FROM = {
              is_subject = yes
            }
            FROM = {
              has_capitulated = yes
            }
            FROM = { exists = no }
          }
        }
	
        remove_effect = {
          FROM = {
            country_event = {
              id = kog2.81
            }				
          }
        }
        
        ai_will_do = {
          factor = 30
        }
  }

}

TKM_Foreign_policy_category = {

    TKM_You_touched_the_bottom_line_decision = {

      icon = hol_draw_up_staff_plans
      
      fire_only_once = no
      
      days_remove = 60
      allowed = {
        tag = TKM
      }
      visible = {
        has_capitulated = no
        is_subject = no
        is_faction_leader = yes
        has_idea = TKM_Guardian_of_mankind_idea
        FROM = { exists = yes }
        FROM = { is_subject = no }
        FROM = { is_in_faction_with = TKM }
        or = { 
          FROM = { is_justifying_wargoal_against = HUM }
          FROM = { is_justifying_wargoal_against = ZBT }
          FROM = { has_wargoal_against = HUM }
          FROM = { has_wargoal_against = ZBT }
          FROM = {
            NOT = { has_completed_focus = KYK_caiquwuzhuangduoquan }
            focus_progress = {
              focus = KYK_caiquwuzhuangduoquan
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = HKR_zheshiyichangguangronggeming }
            focus_progress = {
              focus = HKR_zheshiyichangguangronggeming
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = HKR_qiangxingruzhurenli }
            focus_progress = {
              focus = HKR_qiangxingruzhurenli
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = MNM_HUMqinru }
            focus_progress = {
              focus = MNM_HUMqinru
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = MRS_jiechurenleideshufu }
            focus_progress = {
              focus = MRS_jiechurenleideshufu
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = NMS_xiangrenleibaochou }
            focus_progress = {
              focus = NMS_xiangrenleibaochou
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = NMS_chentarenbubei }
            focus_progress = {
              focus = NMS_chentarenbubei
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = NUE_xiangrenleifuchou }
            focus_progress = {
              focus = NUE_xiangrenleifuchou
              progress > 0
            }
          }
          FROM = {
            NOT = { has_completed_focus = SRB_duoqurenleilingdaoquan }
            focus_progress = {
              focus = SRB_duoqurenleilingdaoquan
              progress > 0
            }
          }
        }
      }
      
      target_trigger = {
        FROM = {
          is_in_faction_with = ROOT
          or = { 
            is_justifying_wargoal_against = HUM
            is_justifying_wargoal_against = ZBT
            has_wargoal_against = HUM
            has_wargoal_against = ZBT
            focus_progress = {
              focus = KYK_caiquwuzhuangduoquan
              progress > 0
            }
            focus_progress = {
              focus = HKR_zheshiyichangguangronggeming
              progress > 0
            }
            focus_progress = {
              focus = HKR_qiangxingruzhurenli
              progress > 0
            }
            focus_progress = {
              focus = MNM_HUMqinru
              progress > 0
            }
            focus_progress = {
              focus = MRS_jiechurenleideshufu
              progress > 0
            }
            focus_progress = {
              focus = NMS_xiangrenleibaochou
              progress > 0
            }
            focus_progress = {
              focus = NMS_chentarenbubei
              progress > 0
            }
            focus_progress = {
              focus = NUE_xiangrenleifuchou
              progress > 0
            }
            focus_progress = {
              focus = SRB_duoqurenleilingdaoquan
              progress > 0
            }
          }
        }
      }
      target_array = faction_members

      available = {

      }

      modifier = {
          political_power_cost = 0.5
      }

      cost = 0

      complete_effect = {

        set_country_flag = {
          flag = TKM_war_preparation_flag
          days = 75
          value = 1
        }

        if = {
          limit = { 
            has_military_access_to = FROM
          }			
          diplomatic_relation = {
              country = FROM
              relation = military_access
              active = no
          }
        }

        if = {
          limit = { 
            FROM = { has_military_access_to = TKM }
          }			
          FROM = {
            diplomatic_relation = {
                country = TKM
                relation = military_access
                active = no
            }
          }
        }

        FROM = {
          country_event = { id = kog2.76 days = 2}	
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = 1000
          }
          ROOT = {
            remove_from_faction = PREV
            add_ai_strategy = {
              type = antagonize
              id = PREV
              value = 1000
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = 1000
            }
          }
        }

        every_other_country = {
          limit = {
            is_neighbor_of = TKM
            NOT = { TAG = FROM }
            or = {
              is_in_faction_with = FROM
              is_subject_of = FROM
            }
          }
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = 1000
          }
          ROOT = {
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = 1000
            }
          }
        }

      }
      
      remove_effect = {

        FROM = {
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = -1000
          }
          ROOT = {
            add_ai_strategy = {
              type = antagonize
              id = PREV
              value = -1000
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = -1000
            }
          }
        }

        every_other_country = {
          limit = {
            is_neighbor_of = TKM
            NOT = { TAG = FROM }
            or = {
              is_in_faction_with = FROM
              is_subject_of = FROM
            }
          }
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = -1000
          }
          ROOT = {
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = -1000
            }
          }
        }

        if = {
          limit = { 
            is_ai = yes
          }			
          FROM = {
            TKM = {
              declare_war_on = {
                type = annex_everything
                target = PREV
              }
            }				
          }
        }

        if = {
          limit = { 
            is_ai = no
          }			
          FROM = {
            TKM = {
              create_wargoal = {
                type = annex_everything
                target = PREV
                expire = 180
              }
            }				
          }
        }

      }
      
      ai_will_do = {
        factor = 1000
      }
    }

    TKM_Intervene_in_the_eastern_forest_area_decision = {

      icon = hol_draw_up_staff_plans
      
      fire_only_once = no
      
      days_remove = 60
      allowed = {
        tag = TKM
      }
      visible = {
        has_capitulated = no
        is_subject = no
        FROM = {
          before_declare_war = yes
        }
        or = { 
          FROM = { has_added_tension_amount > 30 }
          AND = {  
            FROM = { 
              NOT = { original_tag = RNS }
              OR = {
                OR = {
                  controls_state = 213
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 213
                  }
                }
                OR = {
                  controls_state = 225
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 225
                  }
                }
                OR = {
                  controls_state = 430
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 430
                  }
                }
              }
            }
          }
          AND = {  
            FROM = { 
              NOT = { original_tag = SBK }
              OR = {
                OR = {
                  controls_state = 240
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 240
                  }
                }
                OR = {
                  controls_state = 242
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 242
                  }
                }
                OR = {
                  controls_state = 260
                  any_other_country = {
                    is_subject_of = FROM
                    controls_state = 260
                  }
                }
              }
            }
          }
        }
      }
      
      target_trigger = {
        FROM = {
          OR = {
            original_tag = HKR
            original_tag = MSD
            original_tag = KAG
            original_tag = RNS
            original_tag = SBK
            original_tag = INB
            original_tag = BYA
            original_tag = MOK
            original_tag = HU8
          }
        }
      }
      targets = {
        HKR MSD KAG RNS SBK INB BYA MOK HU8
      }
      available = {

      }

      modifier = {
          political_power_cost = 0.5
      }

      cost = 0

      complete_effect = {

        set_country_flag = {
          flag = TKM_war_preparation_flag
          days = 75
          value = 1
        }

        if = {
          limit = { 
            has_military_access_to = FROM
          }			
          diplomatic_relation = {
              country = FROM
              relation = military_access
              active = no
          }
        }

        if = {
          limit = { 
            FROM = { has_military_access_to = TKM }
          }			
          FROM = {
            diplomatic_relation = {
                country = TKM
                relation = military_access
                active = no
            }
          }
        }

        FROM = {
          country_event = { id = kog2.76 days = 2}	
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = 1000
          }
          ROOT = {
            add_ai_strategy = {
              type = antagonize
              id = PREV
              value = 1000
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = 1000
            }
          }
        }

        every_other_country = {
          limit = {
            is_neighbor_of = TKM
            NOT = { TAG = FROM }
            or = {
              is_in_faction_with = FROM
              is_subject_of = FROM
            }
          }
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = 1000
          }
          ROOT = {
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = 1000
            }
          }
        }

      }
      
      remove_effect = {

        FROM = {
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = -1000
          }
          ROOT = {
            add_ai_strategy = {
              type = antagonize
              id = PREV
              value = -1000
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = -1000
            }
          }
        }

        every_other_country = {
          limit = {
            is_neighbor_of = TKM
            NOT = { TAG = FROM }
            or = {
              is_in_faction_with = FROM
              is_subject_of = FROM
            }
          }
          add_ai_strategy = {
            type = prepare_for_war
            id = ROOT
            value = -1000
          }
          ROOT = {
            add_ai_strategy = {
              type = prepare_for_war
              id = PREV
              value = -1000
            }
          }
        }

        if = {
          limit = { 
            is_ai = yes
          }			
          FROM = {
            TKM = {
              declare_war_on = {
                type = annex_everything
                target = PREV
              }
            }				
          }
        }

        if = {
          limit = { 
            is_ai = no
          }			
          FROM = {
            TKM = {
              create_wargoal = {
                type = annex_everything
                target = PREV
                expire = 180
              }
            }				
          }
        }

      }
      
      ai_will_do = {
        factor = 1000
        modifier = {
          has_country_flag = TKM_war_preparation_flag
          factor = 0
        }
        modifier = {
          any_country = {
            or = {
              tag = HUM
              tag = HKR
              tag = SCA 
              tag = WAK 
              tag = PRI 
              tag = SBK 
              tag = RNS
              tag = MRS
              tag = ALI
              tag = KYK 
              is_major = yes
              num_of_factories > 30
              surrender_progress < 0.7
              has_army_manpower = { size > 2500 }
            }
            has_war_with = TKM
            or = {
              is_neighbor_of = TKM
              any_neighbor_country = {
                is_subject_of = TKM
              }
            }
          }
          factor = 0
        }
      }
    }

    TKM_Complete_North_Industrial_Zone_dec = {

		    icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            country_exists = WAK
        }

		    target_trigger = {
			    FROM = {
			      original_tag = WAK
          }
        }
        targets = {
          WAK
        }

        available = {
            or = {
              threat > 0.70
              date > 150.1.1
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
              AND = {
                or = {
                  threat > 0.50
                  date > 149.6.1 
                }
                WAK = {
                  is_subject = no
                }
              }
            }

            WAK = {
              before_declare_war = yes
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_WAK_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = WAK
              }			
              diplomatic_relation = {
                  country = WAK
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                WAK = { has_military_access_to = TKM }
              }			
              WAK = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = WAK
                NOT = { has_war_with = WAK }
                NOT = { WAK = { is_in_faction_with = TKM } }
                NOT = { WAK = { is_subject_of = TKM } }
              }			
              WAK = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = WAK }
                or = {
                  is_in_faction_with = WAK
                  is_subject_of = WAK
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = WAK }
              or = {
                is_in_faction_with = WAK
                is_subject_of = WAK
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
              type = puppet_wargoal_focus
              target = WAK
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
              type = puppet_wargoal_focus
              target = WAK
            }
          }

        }
        ai_will_do = {
            factor = 25
            modifier = {
              WAK = { has_country_flag = WAK_kogdaying }
              factor = 0
            }
            modifier = {
              WAK = {
                is_subject = no
              }
              any_country = {
                or = {
                  tag = HUM
                  tag = HKR
                  tag = SCA
                  tag = PRI 
                  tag = SBK 
                  tag = RNS
                  tag = MRS
                  tag = ALI
                  tag = KYK 
                  tag = MSD
                  tag = KAG 
                  is_major = yes
                  num_of_factories > 30
                  surrender_progress < 0.7
                  has_army_manpower = { size > 2500 }
                }
                has_war_with = TKM
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                }
              }
              factor = 0
            }
            modifier = {
              WAK = {
                is_subject = yes
              }
              has_war = yes
              factor = 0
            }
            modifier = {
              WAK = {
                is_subject = no
              }
              factor = 5
            }
            modifier = {
              WAK = {
                has_war = yes
              }
              factor = 10
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              SCA = {
                has_war = no
                is_in_faction_with = WAK
              }
              factor = 0
            }
            modifier = {
              has_government = fandong
              NOT = { has_country_flag = TKM_Establish_Combined_Syndicates_flag }
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
        }

    }

    TKM_Complete_North_Industrial_Zone_2_dec = {

		    icon = hol_draw_up_staff_plans

        visible = {
          is_subject = no 
          WAK = { has_country_flag = WAK_kogdaying }
          WAK = { has_war_with = SCA } 
          NOT = { is_in_faction_with = WAK }
          NOT = { has_war_with = WAK }
          country_exists = WAK
        }

		    target_trigger = {
			    FROM = {
			      original_tag = WAK
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          WAK
        }

        available = {
            or = {
              AND = {
                NOT = { WAK = { has_idea = WAK_jushihunluan_idea } }
                or = {
                  WAK = { is_in_faction = no }
                  WAK = { is_subject = yes }
                }
              }
              AND = {
                WAK = { is_in_faction = yes }
                NOT = { WAK = { is_in_faction_with = TKM } }
              }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_WAK_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = WAK
              }			
              diplomatic_relation = {
                  country = WAK
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                WAK = { has_military_access_to = TKM }
              }			
              WAK = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = WAK
                NOT = { has_war_with = WAK }
                NOT = { WAK = { is_in_faction_with = TKM } }
                NOT = { WAK = { is_subject_of = TKM } }
              }			
              WAK = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = WAK }
                or = {
                  is_in_faction_with = WAK
                  is_subject_of = WAK
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          WAK = { has_country_flag = WAK_kogdaying }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = WAK }
              or = {
                is_in_faction_with = WAK
                is_subject_of = WAK
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

		      add_timed_idea = { idea = tkm_los_idea days = 60 }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
              type = puppet_wargoal_focus
              target = WAK
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
              type = puppet_wargoal_focus
              target = WAK
            }
          }

        }
        ai_will_do = {
            factor = 250
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              any_country = {
                or = {
                  tag = HUM
                  tag = HKR
                  tag = SCA
                  tag = PRI 
                  tag = SBK 
                  tag = RNS
                  tag = MRS
                  tag = ALI
                  tag = KYK 
                  tag = MSD
                  tag = KAG 
                  is_major = yes
                  num_of_factories > 30
                  surrender_progress < 0.7
                  has_army_manpower = { size > 2500 }
                }
                has_war_with = TKM
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                }
              }
              factor = 0
            }
        }

    }

    TKM_Ask_for_a_trade_transfer_station_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            KYK = { is_subject = no } 
            204 = { 
                is_core_of = KYK
                is_owned_by = KYK
            }
            country_exists = KYK
        }

		    target_trigger = {
			    FROM = {
			      original_tag = KYK
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          KYK
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            KYK = {
              before_declare_war = yes
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 30

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_KYK_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                country_exists = KYK
                NOT = { has_war_with = KYK }
                NOT = { KYK = { is_in_faction_with = TKM } }
                NOT = { KYK = { is_subject_of = TKM } }
              }			
              KYK = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

        }

        cancel_trigger = {

        }

        remove_effect = {
            KYK = {
              country_event = { id = kog2.87 days = 2}
            } 

        }
        ai_will_do = {
            factor = 1
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Intervene_in_the_civil_war_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            NMS = { is_subject = no } 
            NMS = { has_war_with = MNM }
            NMS = { has_war_with = NUE }
            187 = { 
                is_owned_by = NMS
            }
            204 = { 
                is_owned_by = NMS
            }
            country_exists = NMS
        }

		    target_trigger = {
			    FROM = {
			      original_tag = NMS
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          NMS
        }

        available = {
          NMS = {
            faqiqingqiu = yes
          }
          custom_trigger_tooltip = {
              tooltip = TKM_Political_points_are_positive_tt
              or = {
                has_political_power > 0
                is_ai = yes
              }
          }
        }

        modifier = {
				  political_power_cost = 10
        }

        cost = 0

        days_remove = 3

        fire_only_once = yes 


        complete_effect = {

        }

        cancel_trigger = {

        }

        remove_effect = {
          country_event = { id = kog2.101 }
        }
        ai_will_do = {
            factor = 1000
        }

    }

    TKM_Protection_of_diaspora_MNM_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
          is_subject = no 
          has_war = no
          MNM = { is_subject = no } 
          MNM = { has_war = no }
          NOT = { MNM = { has_completed_focus = MNM_zujianyaoguaizhengfu } }
          OR = {
            MNM = { owns_state = 187 }
            any_other_country = {
              NOT = { tag = MNM }
              is_subject_of = MNM
              owns_state = 187
            }
          }
          OR = {
            MNM = { owns_state = 204 }
            any_other_country = {
              NOT = { tag = MNM }
              is_subject_of = MNM
              owns_state = 204
            }
          }
          country_exists = MNM
        }

		    target_trigger = {
			    FROM = {
			      original_tag = MNM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          MNM
        }

        available = {
          country_exists = MNM
          custom_trigger_tooltip = {
              tooltip = TKM_Political_points_are_positive_tt
              or = {
                has_political_power > 0
                is_ai = yes
              }
          }
        }

        modifier = {
				  political_power_cost = 10
        }

        cost = 0

        days_remove = 3

        fire_only_once = yes 


        complete_effect = {

          add_ai_strategy = {
            type = send_volunteers_desire
            id = "MNM"			
            value = -100
          }

        }

        cancel_trigger = {

        }

        remove_effect = {

          transfer_state = 187
          transfer_state = 204

        }
        ai_will_do = {
            factor = 1000
        }

    }

    TKM_Protection_of_diaspora_NUE_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
          is_subject = no 
          has_war = no
          NUE = { is_subject = no } 
          NUE = { has_war = no }
          NOT = { NUE = { has_completed_focus = NUE_pingxigebuhunluan } }
          OR = {
            NUE = { owns_state = 187 }
            any_other_country = {
              NOT = { tag = NUE }
              is_subject_of = NUE
              owns_state = 187
            }
          }
          OR = {
            NUE = { owns_state = 204 }
            any_other_country = {
              NOT = { tag = NUE }
              is_subject_of = NUE
              owns_state = 204
            }
          }
          country_exists = NUE
        }

		    target_trigger = {
			    FROM = {
			      original_tag = NUE
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          NUE
        }

        available = {
          country_exists = NUE
          custom_trigger_tooltip = {
              tooltip = TKM_Political_points_are_positive_tt
              or = {
                has_political_power > 0
                is_ai = yes
              }
          }
        }

        modifier = {
				  political_power_cost = 10
        }

        cost = 0

        days_remove = 3

        fire_only_once = yes 


        complete_effect = {

          add_ai_strategy = {
            type = send_volunteers_desire
            id = "NUE"			
            value = -100
          }

        }

        cancel_trigger = {

        }

        remove_effect = {

          transfer_state = 187
          transfer_state = 204

        }
        ai_will_do = {
            factor = 1000
        }

    }

    TKM_Request_for_KYK_alliance_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = KYK
            KYK = { is_subject = no } 
            KYK = { is_in_faction = no } 
            NOT = { has_war_with = KYK }
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
            }

        }

		    target_trigger = {
			    FROM = {
			      original_tag = KYK
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          KYK
        }

        available = {

            is_faction_leader = yes

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 10

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

            KYK = {
              country_event = { id = kog2.104 days = 2}
            } 

        }
        ai_will_do = {
            factor = 750
        }

    }

    TKM_Ultimatum_to_KYK_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = KYK
            NOT = { has_war_with = KYK }
            NOT = { KYK = { is_in_faction_with = TKM } }
            NOT = { KYK = { is_subject_of = TKM } }
            country_exists = KYK
        }

		    target_trigger = {
			    FROM = {
			      original_tag = KYK
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          KYK
        }

        available = {

            or = {
              threat > 0.50
              date > 149.6.1
              NMS = {
                or = {
                  is_justifying_wargoal_against = KYK
                  focus_progress = {
                    focus = NMS_xiangKYKshiya
                    progress > 0
                  }
                }
              }
              SRB = {
                or = {
                  is_justifying_wargoal_against = KYK
                  focus_progress = {
                    focus = SRB_xiangdongqinxi
                    progress > 0
                  }
                }
              }
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
            }

            KYK = {
              before_declare_war = yes
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 30

        fire_only_once = yes 

        cancel_trigger = {
          KYK = {
            before_declare_war = no
          }
        }

        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_KYK_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = KYK
              }			
              diplomatic_relation = {
                  country = KYK
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                KYK = { has_military_access_to = TKM }
              }			
              KYK = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = KYK
                NOT = { has_war_with = KYK }
                NOT = { KYK = { is_in_faction_with = TKM } }
                NOT = { KYK = { is_subject_of = TKM } }
              }			
              KYK = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = KYK }
                or = {
                  is_in_faction_with = KYK
                  is_subject_of = KYK
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          KYK = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = KYK }
                or = {
                  is_in_faction_with = KYK
                  is_subject_of = KYK
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = -1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = -1000
                }
              }
            }

            if = {
              limit = { 
                KYK = { is_subject = no } 
              }			
              KYK = {
                country_event = kog2.105
              } 
              else = {
                declare_war_on = {
                  type = puppet_wargoal_focus
                  target = KYK
                }
              }
            }


        }
        ai_will_do = {
            factor = 275
            modifier = {
              NMS = {
                or = {
                  is_justifying_wargoal_against = KYK
                  focus_progress = {
                    focus = NMS_xiangKYKshiya
                    progress > 0
                  }
                }
              }
              factor = 3
            }
            modifier = {
              SRB = {
                or = {
                  is_justifying_wargoal_against = KYK
                  focus_progress = {
                    focus = SRB_xiangdongqinxi
                    progress > 0
                  }
                }
              }
              factor = 3
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
            modifier = {
              any_country = {
                or = {
                  tag = HUM
                  tag = HKR
                  tag = SCA 
                  tag = WAK 
                  tag = PRI 
                  tag = SBK 
                  tag = RNS
                  tag = MRS
                  tag = ALI
                  tag = MSD
                  tag = KAG 
                  is_major = yes
                  num_of_factories > 30
                  surrender_progress < 0.7
                  has_army_manpower = { size > 2500 }
                }
                has_war_with = TKM
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                }
              }
              factor = 0
            }
        }

    }

    TKM_Destroy_the_Yokai_Temple_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = NMS
        }

		    target_trigger = {
			    FROM = {
			      original_tag = NMS
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          NMS
        }

        available = {

            if = {
              limit = { 
                or = {
                  has_completed_focus = TKM_Progressive_leader
                  has_completed_focus = TKM_Returning_props
                }
              }
              or = {
                NMS = { is_subject = yes }
                NMS = { has_government = fandong }
                NMS = { has_government = neworder }
                AND = {
                  NMS = { has_government = qinwai }
                  NMS = { has_completed_focus = NMS_hepingkuangrezhe }
                }
              }
            }

            or = {
              threat > 0.70
              date > 150.1.1
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
            }

            NMS = {
              before_declare_war = yes
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_NMS_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = NMS
              }			
              diplomatic_relation = {
                  country = NMS
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                NMS = { has_military_access_to = TKM }
              }			
              NMS = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = NMS
                NOT = { has_war_with = NMS }
                NOT = { NMS = { is_in_faction_with = TKM } }
                NOT = { NMS = { is_subject_of = TKM } }
              }			
              NMS = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = NMS }
                or = {
                  is_in_faction_with = NMS
                  is_subject_of = NMS
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          NMS = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = NMS }
              or = {
                is_in_faction_with = NMS
                is_subject_of = NMS
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
                type = puppet_wargoal_focus
                target = NMS
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
                type = puppet_wargoal_focus
                target = NMS
            }
          }

        }
        ai_will_do = {
            factor = 10
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              NMS = { has_government = neworder }
              NMS = { is_subject = no }
              factor = 30
            }
            modifier = {
              has_government = fandong
              NOT = { has_country_flag = TKM_Establish_Combined_Syndicates_flag }
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
        }

    }

    TKM_Shipwreck_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = MNM
        }

		    target_trigger = {
			    FROM = {
			      original_tag = MNM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          MNM
        }

        available = {

            or = {
              threat > 0.70
              date > 150.1.1
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
            }

            MNM = {
              before_declare_war = yes
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_MNM_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = MNM
              }			
              diplomatic_relation = {
                  country = MNM
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                MNM = { has_military_access_to = TKM }
              }			
              MNM = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = MNM
                NOT = { has_war_with = MNM }
                NOT = { MNM = { is_in_faction_with = TKM } }
                NOT = { MNM = { is_subject_of = TKM } }
              }			
              MNM = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = MNM }
                or = {
                  is_in_faction_with = MNM
                  is_subject_of = MNM
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          MNM = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = MNM }
              or = {
                is_in_faction_with = MNM
                is_subject_of = MNM
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
                type = puppet_wargoal_focus
                target = MNM
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
                type = puppet_wargoal_focus
                target = MNM
            }
          }

        }
        ai_will_do = {
            factor = 10
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              MNM = { has_completed_focus = MNM_TKMshiliquan }
              factor = 0
            }
            modifier = {
              MNM = { is_subject = no }
              factor = 30
            }
            modifier = {
              has_government = fandong
              NOT = { has_country_flag = TKM_Establish_Combined_Syndicates_flag }
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
        }

    }

    TKM_Expel_the_darkness_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = NUE
        }

		    target_trigger = {
			    FROM = {
			      original_tag = NUE
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          NUE
        }

        available = {

            or = {
              threat > 0.70
              date > 150.1.1
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
            }

            NUE = {
              before_declare_war = yes
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_NUE_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = NUE
              }			
              diplomatic_relation = {
                  country = NUE
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                NUE = { has_military_access_to = TKM }
              }			
              NUE = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = NUE
                NOT = { has_war_with = NUE }
                NOT = { NUE = { is_in_faction_with = TKM } }
                NOT = { NUE = { is_subject_of = TKM } }
              }			
              NUE = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = NUE }
                or = {
                  is_in_faction_with = NUE
                  is_subject_of = NUE
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          NUE = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = NUE }
              or = {
                is_in_faction_with = NUE
                is_subject_of = NUE
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
                type = puppet_wargoal_focus
                target = NUE
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
                type = puppet_wargoal_focus
                target = NUE
            }
          }

        }
        ai_will_do = {
            factor = 10
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              NUE = { has_country_flag = NUE_heTKMyouhao }
              factor = 0
            }
            modifier = {
              NUE = { is_subject = no }
              factor = 30
            }
            modifier = {
              has_government = fandong
              NOT = { has_country_flag = TKM_Establish_Combined_Syndicates_flag }
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
        }

    }

    TKM_Witch_hunt_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            country_exists = MRS
        }

		    target_trigger = {
			    FROM = {
			      original_tag = MRS
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          MRS
        }

        available = {

            if = {
              limit = { 
                or = {
                  has_completed_focus = TKM_Progressive_leader
                  has_completed_focus = TKM_Returning_props
                }
              }
              or = {
                AND = {
                  or = {
                    AND = {                  
                      MRS = { is_subject = yes }
                      NOT = { MRS = { is_subject_of = ALI } }
                    }
                    MRS = { has_government = fandong }
                    MRS = { has_government = neworder }
                  }
                }
                AND = {
                  or = {
                    AND = {                  
                      ALI = { is_subject = yes }
                      NOT = { ALI = { is_subject_of = MRS } }
                    }
                    ALI = { has_government = fandong }
                    ALI = { has_government = neworder }
                  }
                }
              }
            }

            or = {
              threat > 0.70
              date > 150.1.1
              SCA = {
                or = {
                  NOT = { country_exists = SCA }
                  is_subject = yes
                  AND = {
                    has_war = yes
                    any_enemy_country = {
                      is_major = yes
                    }
                  }
                }
              }
            }

            or = {
              AND = {
                country_exists = MRS
                NOT = { has_war_with = MRS }
                NOT = { MRS = { is_in_faction_with = TKM } }
                NOT = { MRS = { is_subject_of = TKM } }
                not = {
                  has_non_aggression_pact_with = MRS
                }
              }
              AND = {
                country_exists = ALI
                NOT = { has_war_with = ALI }
                NOT = { ALI = { is_in_faction_with = TKM } }
                NOT = { ALI = { is_subject_of = TKM } }
                not = {
                  has_non_aggression_pact_with = ALI
                }
              }
            }

            or = {
              MRS = {
                before_declare_war = yes
              }
              ALI = {
                before_declare_war = yes
              }
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_MRS_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = MRS
              }			
              diplomatic_relation = {
                  country = MRS
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                MRS = { has_military_access_to = TKM }
              }			
              MRS = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                has_military_access_to = ALI
              }			
              diplomatic_relation = {
                  country = ALI
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                ALI = { has_military_access_to = TKM }
              }			
              ALI = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = MRS
                NOT = { has_war_with = MRS }
                NOT = { MRS = { is_in_faction_with = TKM } }
                NOT = { MRS = { is_subject_of = TKM } }
              }			
              MRS = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = { 
                country_exists = ALI
                NOT = { has_war_with = ALI }
                NOT = { ALI = { is_in_faction_with = TKM } }
                NOT = { ALI = { is_subject_of = TKM } }
              }			
              ALI = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = MRS }
                NOT = { TAG = ALI }
                or = {
                  is_in_faction_with = MRS
                  is_subject_of = MRS
                  is_in_faction_with = ALI
                  is_subject_of = ALI
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          MRS = {
            bypass_declare_war = yes
          }
          ALI = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = MRS }
              NOT = { TAG = ALI }
              or = {
                is_in_faction_with = MRS
                is_subject_of = MRS
                is_in_faction_with = ALI
                is_subject_of = ALI
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            declare_war_on = {
                type = puppet_wargoal_focus
                target = MRS
            }
            declare_war_on = {
                type = puppet_wargoal_focus
                target = ALI
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            create_wargoal = {
                type = puppet_wargoal_focus
                target = MRS
            }
            create_wargoal = {
                type = puppet_wargoal_focus
                target = ALI
            }
          }

        }
        ai_will_do = {
            factor = 10
            modifier = {
              or = {
                has_completed_focus = TKM_Progressive_leader
                has_government = fandong
                has_government = neworder
              }
              factor = 2
            }
            modifier = {
              or = {
                MRS = { is_ai = no }
                ALI = { is_ai = no }
              }
              factor = 2
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
            modifier = {
              any_country = {
                or = {
                  tag = HUM
                  tag = HKR
                  tag = SCA 
                  tag = WAK 
                  tag = PRI 
                  tag = SBK 
                  tag = RNS
                  tag = KYK 
                  tag = MSD
                  tag = KAG 
                  is_major = yes
                  num_of_factories > 30
                  surrender_progress < 0.7
                  has_army_manpower = { size > 2500 }
                }
                has_war_with = TKM
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                }
              }
              factor = 0
            }
            modifier = {
              NMS = {
                has_war_with = TKM
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              SRB = {
                has_war_with = TKM
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              or = {
                AND = {
                  MRS = { is_in_faction = yes } 
                  MRS = { is_faction_leader = no }
                  NOT = { MRS = { is_in_faction_with = SCA } } 
                  NOT = {
                    MRS = { is_in_faction_with = HKR } 
                    HKR = { is_faction_leader = yes } 
                  }
                }
                AND = {
                  ALI = { is_in_faction = yes } 
                  ALI = { is_faction_leader = no }
                  NOT = { ALI = { is_in_faction_with = SCA } } 
                  NOT = {
                    ALI = { is_in_faction_with = HKR } 
                    HKR = { is_faction_leader = yes } 
                  }
                }
                MRS = { has_war_together_with = TKM }
                ALI = { has_war_together_with = TKM }
              }
              any_enemy_country = {
                is_major = yes
              }
              factor = 0
            }
            modifier = {
              or = {
                AND = {
                  MRS = { is_in_faction = yes } 
                  MRS = { is_faction_leader = no }
                  NOT = { MRS = { is_in_faction_with = SCA } } 
                  NOT = {
                    MRS = { is_in_faction_with = HKR } 
                    HKR = { is_faction_leader = yes } 
                  }
                }
                AND = {
                  ALI = { is_in_faction = yes } 
                  ALI = { is_faction_leader = no }
                  NOT = { ALI = { is_in_faction_with = SCA } } 
                  NOT = {
                    ALI = { is_in_faction_with = HKR } 
                    HKR = { is_faction_leader = yes } 
                  }
                }
              }
              SCA = {
                has_war = yes
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              MRS = { has_government = fandong }
              MRS = { is_subject = no }
              or = {
                MRS = { is_faction_leader = no }
                NOT = {
                  MRS = { is_in_faction_with = HKR } 
                  HKR = { is_faction_leader = yes } 
                }
              }
              or = {
                MRS = { is_in_faction_with = SEJ }
                MRS = { is_in_faction_with = CIR }
                AND = {
                  SEJ = { has_government = fandong }
                  SEJ = { is_subject = no }
                  NOT = { country_exists = ALI }
                  NOT = { country_exists = MFA }
                  NOT = { country_exists = MYK }
                }
                AND = {
                  CIR = { has_government = fandong }
                  CIR = { is_subject = no }
                  NOT = { country_exists = MFA }
                }
              }
              SCA = {
                has_war = yes
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              or = {
                AND = {
                  or = {
                    AND = {
                      MRS = { has_government = guli }
                      or = {
                        MRS = { has_completed_focus = MRS_yaojingbangzhu }
                        MRS = { has_completed_focus = MRS_huizhenchengyiyuan }
                      }
                    }
                    MRS = { has_government = qinwai }
                  }
                  MRS = { is_subject = no }
                }
                AND = {
                  ALI = { has_government = qinwai }
                  ALI = { is_subject = no }
                }
              }
              or = {
                MRS = { is_in_faction_with = SEJ }
                MRS = { is_in_faction_with = CIR }
                ALI = { is_in_faction_with = SEJ }
                ALI = { is_in_faction_with = CIR }
                AND = {
                  SEJ = { has_government = qinwai }
                  SEJ = { is_subject = no }
                  NOT = { country_exists = MFA }
                  NOT = { country_exists = MYK }
                }
                AND = {
                  CIR = { has_government = qinwai }
                  CIR = { is_subject = no }
                  NOT = { country_exists = MFA }
                }
              }
              SCA = {
                has_war = yes
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              WAK = { controls_state = 173 } 
              WAK = { is_subject_of = SCA }
              SCA = {
                has_war_with = TKM
                is_subject = no
              }
              factor = 0
            }
            modifier = {
              or = {
                surrender_progress > 0
                has_army_manpower = { size < 5000 }
              }
              has_war = yes
              factor = 0
            }
            modifier = {
              MRS = { has_government = neworder }
              MRS = { is_subject = no }
              or = {
                MRS = { is_in_faction = no } 
                MRS = { is_faction_leader = yes }
              }
              factor = 15
            }
            modifier = {
              ALI = { has_government = neworder }
              ALI = { is_subject = no }
              or = {
                ALI = { is_in_faction = no } 
                ALI = { is_faction_leader = yes }
              }
              factor = 15
            }
            modifier = {
              ALI = { has_government = qinwai }
              ALI = { is_subject = no }
              or = {
                ALI = { is_in_faction = no } 
                ALI = { is_faction_leader = yes }
              }
              factor = 13
            }
            modifier = {
              MRS = { has_government = guli }
              MRS = { is_subject = no }
              or = {
                MRS = { is_in_faction = no } 
                MRS = { is_faction_leader = yes }
              }
              factor = 10
            }
            modifier = {
              ALI = { has_government = fandong }
              NOT = { ALI = { has_completed_focus = ALI_xunzhaogengduorenousucai } }
              ALI = { is_subject = no }
              factor = 0
            }
            modifier = {
              has_government = fandong
              MRS = { has_government = fandong }
              MRS = { is_subject = no }
              or = {
                MRS = { is_faction_leader = no }
                MRS = { is_in_faction = no }
                MRS = { is_in_faction_with = TKM }
              }
              factor = 0
            }
            modifier = {
              has_government = fandong
              NOT = { has_country_flag = TKM_Establish_Combined_Syndicates_flag }
              factor = 0
            }
            modifier = {
              has_government = neworder
              NOT = { has_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag }
              factor = 0
            }
            modifier = {
              has_government = fandong
              or = {
                AND = {
                  SEJ = { has_government = fandong }
                  SEJ = { is_in_faction_with = TKM }
                }
                AND = {
                  CIR = { has_government = fandong }
                  CIR = { is_in_faction_with = TKM }
                }
              }
              factor = 2
            }
        }

    }

    TKM_Final_victory_dec = {

		icon = hol_draw_up_staff_plans

        visible = {
            is_subject = no 
            has_completed_focus = TKM_Revolutionary_revolution
            country_exists = HUM
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HUM
          }
        }
        allowed = {
          tag = TKM
        }
        targets = {
          HUM
        }

        available = {

            or = {
              threat > 0.75
              date > 150.6.1
            }
            173 = { 
                is_owned_by = ROOT
            }
            177 = { 
                is_owned_by = ROOT
            }
            316 = { 
                is_owned_by = ROOT
            }
            165 = { 
                is_owned_by = ROOT
            }
            204 = { 
                is_owned_by = ROOT
            }
            or = { 
              NOT = { country_exists = NMS }
              NMS = { is_in_faction_with = TKM } 
              NMS = { is_subject_of = TKM } 
            }			
            HUM = {
              before_declare_war = yes
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_HUM_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                has_military_access_to = HUM
              }			
              diplomatic_relation = {
                  country = HUM
                  relation = military_access
                  active = no
              }
            }

            if = {
              limit = { 
                HUM = { has_military_access_to = TKM }
              }			
              HUM = {
                diplomatic_relation = {
                    country = TKM
                    relation = military_access
                    active = no
                }
              }
            }

            if = {
              limit = { 
                country_exists = HUM
                NOT = { has_war_with = HUM }
                NOT = { HUM = { is_in_faction_with = TKM } }
                NOT = { HUM = { is_subject_of = TKM } }
              }			
              HUM = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                NOT = { TAG = HUM }
                or = {
                  is_in_faction_with = HUM
                  is_subject_of = HUM
                }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {
          HUM = {
            bypass_declare_war = yes
          }
        }

        remove_effect = {

          every_other_country = {
            limit = {
              is_neighbor_of = TKM
              NOT = { TAG = HUM }
              or = {
                is_in_faction_with = HUM
                is_subject_of = HUM
              }
            }
            add_ai_strategy = {
              type = prepare_for_war
              id = ROOT
              value = -1000
            }
            ROOT = {
              add_ai_strategy = {
                type = prepare_for_war
                id = PREV
                value = -1000
              }
            }
          }

          HUM = {
              country_event = { days = 2 id = kog2.58}
          }
          custom_effect_tooltip = TEG_accept
          effect_tooltip = {
            HUM = {
              subject_level4 = yes
            }
            if = {
              limit = {
                ZBT = {
                  is_subject_of = HUM
                }
              }
              ZBT = {
                subject_level4 = yes
              }
            }
          }
          custom_effect_tooltip = TKM_renleishiwomendedaoju_tt

        }
        ai_will_do = {
            factor = 10
            modifier = {
              has_government = neworder
              factor = 10
            }
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Value_the_relationship_with_priyoukai_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
            }
            or = {
              threat > 0.30
              date > 148.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

          every_country = {
            limit = {
              or = {
                has_idea = Pri_youkai
                has_idea = Beast
              }
            }
            add_ai_strategy = {
              type = support
              id = ROOT
              value = 15
            }
            ROOT = {
              add_ai_strategy = {
                type = support
                id = PREV
                value = 15
              }
            }
            add_opinion_modifier = { modifier = TKM_zhongshihexiaoyaoguaideguanxi_op target = ROOT}
            reverse_add_opinion_modifier = { modifier = TKM_zhongshihexiaoyaoguaideguanxi_op target = ROOT}
          }
          lobbydecrease = yes

        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Value_the_relationship_with_priyoukai_flag

          custom_effect_tooltip = focus_warning3
          give_guarantee = RNS
          give_guarantee = SBK
          if = {
            limit = {
              KYK = { is_subject = no}
            }
            give_guarantee = KYK
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Priyoukai_Co_Prosperity_Circle_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
            }
            or = {
              threat > 0.30
              date > 148.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            has_country_flag = TKM_Value_the_relationship_with_priyoukai_flag
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Priyoukai_Co_Prosperity_Circle_flag

          add_ideas = can_create_faction_idea
          create_faction = TKM_caogenyaoguaigongrongquan_faction
          hidden_effect = {
              news_event = { days = 2 id = kog2.27 }
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Win_over_weak_youkai_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
            }
            or = {
              threat > 0.35
              date > 148.6.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            has_country_flag = TKM_Priyoukai_Co_Prosperity_Circle_flag
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Win_over_weak_youkai_flag

          custom_effect_tooltip = focus_warning3
          every_country = {
            limit = {
              or = {
                tag = RNS
                tag = SBK
                and = {
                  tag = KYK
                  is_subject = no
                }
                and = {
                  tag = MTM
                  is_subject = no
                }
              }
            }
            qiangjiemeng = yes
          }

          if = {
            limit = { 
              has_country_flag = TKM_gugelvse
            }			
            every_country = {
              limit = {
                or = {
                  tag = KAG
                  tag = MSD
                }
              }
              jiemeng = yes
            }
          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.28 }
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Liberation_Bamboo_Forest_youkai_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            KAG = { is_subject = yes }
            NOT = { KAG = { is_subject_of = TKM } }
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = KAG
          }
        }
        targets = {
          KAG
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.40
              date > 149.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            num_faction_members > 1
            or = {
              KAG = { is_neighbor_of = ROOT }
              SBK = { is_subject_of = ROOT }
              SBK = { is_in_faction_with = ROOT }
            }

            KAG = {
              before_declare_war = yes
            }

            or = {
              has_country_flag = TKM_Win_over_weak_youkai_flag
              has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_KAG_flag
              days = 90
              value = 1
            }

            if = {
              limit = {
                KAG = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    KAG = { is_subject_of = TKM }
                  }
                }
              }
              KAG = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

          if = {
            limit = { 
              is_ai = yes
            }			
            every_country = {
                limit = {
                    KAG = { is_subject_of = PREV}
                }
                ROOT = {
                  declare_war_on = {
                      type = liberate_wargoal
                      target = PREV
                  }
                }
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            every_country = {
                limit = {
                    KAG = { is_subject_of = PREV}
                }
                ROOT = {
                  create_wargoal = {
                      type = liberate_wargoal
                      target = PREV
                  }
                }
            }
          }
          
          hidden_effect = {
              news_event = { days = 2 id = kog2.29 }
          }

        }
        ai_will_do = {
            factor = 1
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Take_back_the_territory_of_the_bamboo_forest_youkai_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = EET
          }
        }
        targets = {
          EET
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.40
              date > 149.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            or = {
              and = {
                country_exists = KAG
                KAG = { is_in_faction_with = ROOT }
              }
              any_controlled_state = {
                any_neighbor_state = { 
                  or = {
                    state = 288
                    state = 293
                  }
                }
              }
              
            }
            or = {
              has_country_flag = TKM_Win_over_weak_youkai_flag
              has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_INB_flag
              days = 90
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_EET_flag
              days = 90
              value = 1
            }

            every_other_country = {
                limit = {
                    not = {
                        tag = KAG
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = KAG
                            is_claimed_by = KAG
                        }
                    }
                }
                add_ai_strategy = {
                  type = prepare_for_war
                  id = ROOT
                  value = 1000
                }
                ROOT = {
                  add_ai_strategy = {
                    type = prepare_for_war
                    id = PREV
                    value = 1000
                  }
                }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

          every_other_country = {
              limit = {
                  not = {
                      tag = KAG
                  }
                  any_owned_state = {
                      or = {  
                          is_core_of = KAG
                          is_claimed_by = KAG
                      }
                  }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = -1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = -1000
                }
              }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            every_country = {
                limit = {
                    not = {
                        tag = KAG
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = KAG
                            is_claimed_by = KAG
                        }
                    }
                }
                ROOT = {
                  declare_war_on = {
                      type = annex_everything
                      target = PREV
                  }
                }
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            every_country = {
                limit = {
                    not = {
                        tag = KAG
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = KAG
                            is_claimed_by = KAG
                        }
                    }
                }
                ROOT = {
                  create_wargoal = {
                      type = annex_everything
                      target = PREV
                  }
                }
            }
          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.30 }
          }

        }
        ai_will_do = {
            factor = 1
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Liberation_Trail_youkai_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            tag = TKM
            is_subject = no 
            MSD = { is_subject = yes }
            NOT = { MSD = { is_subject_of = TKM } }
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = MSD
          }
        }
        targets = {
          MSD
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.40
              date > 149.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            num_faction_members > 1
            or = {
              MSD = { is_neighbor_of = ROOT }
              RNS = {
                or = {
                  is_subject_of = ROOT
                  is_in_faction_with = ROOT
                }
              }
              SBK = {
                or = {
                  is_subject_of = ROOT
                  is_in_faction_with = ROOT
                }
              }
            }
            MSD = {
              before_declare_war = yes
            }
            or = {
              has_country_flag = TKM_Win_over_weak_youkai_flag
              has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_MSD_flag
              days = 90
              value = 1
            }

            if = {
              limit = {
                MSD = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    MSD = { is_subject_of = TKM }
                  }
                }
              }
              MSD = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

          if = {
            limit = { 
              is_ai = yes
            }			
            every_country = {
                limit = {
                    MSD = { is_subject_of = PREV}
                }
                ROOT = {
                  declare_war_on = {
                      type = liberate_wargoal
                      target = PREV
                  }
                }
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            every_country = {
                limit = {
                    MSD = { is_subject_of = PREV}
                }
                ROOT = {
                  create_wargoal = {
                      type = liberate_wargoal
                      target = PREV
                  }
                }
            }
          }
          
          hidden_effect = {
              news_event = { days = 2 id = kog2.31 }
          }

        }
        ai_will_do = {
            factor = 1
            modifier = {
              has_completed_focus = TKM_Revolutionary_vanguard
              SEJ = { has_government = fandong }
              MSD = { is_subject_of = SEJ }
              factor = 0
            }
            modifier = {
              NOT = {
                TKM = { has_full_control_of_state = 173 }
                any_other_country = {
                  or = {
                    is_subject_of = TKM
                    is_in_faction_with = TKM
                  }
                  has_full_control_of_state = 173
                }
              }
              MSD = { is_subject_of = HKR }
              factor = 0
            }
            modifier = {
              NOT = {
                TKM = { has_full_control_of_state = 173 }
                any_other_country = {
                  or = {
                    is_subject_of = TKM
                    is_in_faction_with = TKM
                  }
                  has_full_control_of_state = 173
                }
              }
              NOT = { SCA = { has_government = qinwai } }
              SCA = { is_subject = no }
              factor = 0
            }            
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Take_back_the_territory_of_the_Trail_youkai_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_xiaosan_tt
                has_government = qinwai
                not = { has_country_flag = TKM_gugelvse }
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = HKR
          }
        }
        targets = {
          HKR
        }

        available = {
            or = {
              has_completed_focus = TKM_Progressive_leader
              has_completed_focus = TKM_Returning_props
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.40
              date > 149.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            or = {
              and = {
                country_exists = MSD
                MSD = { is_in_faction_with = ROOT }
              }
              any_controlled_state = {
                any_neighbor_state = { 
                    state = 207
                }
              }
            }
            or = {
              has_country_flag = TKM_Win_over_weak_youkai_flag
              has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_HKR_flag
              days = 90
              value = 1
            }

            every_other_country = {
                limit = {
                    not = {
                        tag = MSD
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = MSD
                            is_claimed_by = MSD
                        }
                    }
                }
                add_ai_strategy = {
                  type = prepare_for_war
                  id = ROOT
                  value = 1000
                }
                ROOT = {
                  add_ai_strategy = {
                    type = prepare_for_war
                    id = PREV
                    value = 1000
                  }
                }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

          every_other_country = {
              limit = {
                  not = {
                      tag = MSD
                  }
                  any_owned_state = {
                      or = {  
                          is_core_of = MSD
                          is_claimed_by = MSD
                      }
                  }
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = -1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = -1000
                }
              }
          }

          if = {
            limit = { 
              is_ai = yes
            }			
            every_country = {
                limit = {
                    not = {
                        tag = MSD
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = MSD
                            is_claimed_by = MSD
                        }
                    }
                }
                ROOT = {
                  declare_war_on = {
                      type = annex_everything
                      target = PREV
                  }
                }
            }
          }

          if = {
            limit = { 
              is_ai = no
            }			
            every_country = {
                limit = {
                    not = {
                        tag = MSD
                    }
                    any_owned_state = {
                        or = {  
                            is_core_of = MSD
                            is_claimed_by = MSD
                        }
                    }
                }
                ROOT = {
                  create_wargoal = {
                      type = annex_everything
                      target = PREV
                  }
                }
            }

          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.32 }
          }

        }
        ai_will_do = {
            factor = 1
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Incorporate_priyoukai_into_the_circle_of_influence_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            tag = TKM
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_bianbian_tt
                has_government = neworder
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.35
              date > 148.6.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag

          add_named_threat = {
              name = TKM_Incorporate_priyoukai_into_the_circle_of_influence_dec
              threat = 2
          }
          add_political_power = 50
          lobbyincrease = yes

          hidden_effect = {
              news_event = { days = 2 id = kog2.33 }
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Ultimatum_to_SBK_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_bianbian_tt
                has_government = neworder
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = SBK
          }
        }
        targets = {
          SBK
        }

        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.35
              date > 148.6.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            SBK = {
              before_declare_war = yes
            }
            has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_SBK_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                country_exists = SBK
                NOT = { has_war_with = SBK }
                NOT = { SBK = { is_in_faction_with = TKM } }
                NOT = { SBK = { is_subject_of = TKM } }
              }			
              SBK = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                SBK = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    SBK = { is_subject_of = TKM }
                  }
                }
              }
              SBK = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

        }

        cancel_trigger = {
          SBK = {
              bypass_declare_war = yes
          }
        }

        remove_effect = {

        set_country_flag = TKM_Ultimatum_to_SBK_flag

        if = {
          limit = {
            SBK = { is_subject = no}
          }
          SBK = { country_event = { days = 2 id = kog2.35} }
          custom_effect_tooltip = TEG_accept
          effect_tooltip = {
            if = {
              limit = {
                ROOT = {
                  or = {
                    has_government = fandong
                    has_government = guli
                  }
                }
              }
              ROOT = {
                SBK = {
                  can_core = yes
                  subject_level4 = yes
                }
              }
              else = {
                ROOT = {
                  annex_country ={
                    target = SBK
                  }
                  state_race_manpower = yes
                }
              }
            }
          }
          else = {
            declare_war_on = {
              target = SBK
              type = puppet_wargoal_focus
            }
          }
        }

        }
        ai_will_do = {
            factor = 1000
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Ultimatum_to_RNS_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_bianbian_tt
                has_government = neworder
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = RNS
          }
        }
        targets = {
          RNS
        }

        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Revolutionary_vanguard
            }
            or = {
              threat > 0.35
              date > 148.6.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }
            RNS = {
              before_declare_war = yes
            }
            has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_RNS_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                country_exists = RNS
                NOT = { has_war_with = RNS }
                NOT = { RNS = { is_in_faction_with = TKM } }
                NOT = { RNS = { is_subject_of = TKM } }
              }			
              RNS = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                RNS = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    RNS = { is_subject_of = TKM }
                  }
                }
              }
              RNS = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

        }

        cancel_trigger = {
          RNS = {
              bypass_declare_war = yes
          }
        }

        remove_effect = {

        set_country_flag = TKM_Ultimatum_to_RNS_flag

          if = {
            limit = {
              RNS = { is_subject = no}
            }
            RNS = { country_event = { days = 2 id = kog2.35} }
            custom_effect_tooltip = TEG_accept
            effect_tooltip = {
              if = {
                limit = {
                  ROOT = {
                    or = {
                      has_government = fandong
                      has_government = guli
                    }
                  }
                }
                ROOT = {
                  RNS = {
                    can_core = yes
                    subject_level4 = yes
                  }
                }
                else = {
                  ROOT = {
                    annex_country ={
                      target = RNS
                    }
                    state_race_manpower = yes
                  }
                }
              }
            }
            else = {
              declare_war_on = {
                target = RNS
                type = puppet_wargoal_focus
              }
            }
          }

        }
        ai_will_do = {
            factor = 1000
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Ask_for_MTM_dec = {

		icon = hol_draw_up_staff_plans
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_bianbian_tt
                has_government = neworder
              }
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_guge_tt
                has_government = qinwai
                has_country_flag = TKM_gugelvse
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = MTM
          }
        }
        targets = {
          MTM
        }

        available = {
            or = {
              has_completed_focus = TKM_Revolutionary_revolution
              has_completed_focus = TKM_Revolutionary_vanguard
              has_completed_focus = TKM_Progressive_leader
            }
            or = {
              threat > 0.40
              date > 149.1.1
              custom_trigger_tooltip = {
              tooltip = TKM_The_eastern_buffer_zone_is_in_hurry_tt
                or = {
                  or = {
                    NOT = { country_exists = SBK }
                    AND = {
                      SBK = { is_subject = yes } 
                      NOT = { SBK = { is_subject_of = TKM } }
                     }
                    AND = {
                      SBK = { is_subject = no } 
                      NOT = { SBK = { has_war_with = TKM } }
                      SBK = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    NOT = { country_exists = RNS }
                    AND = {
                      RNS = { is_subject = yes } 
                      NOT = { RNS = { is_subject_of = TKM } }
                     }
                    AND = {
                      RNS = { is_subject = no } 
                      NOT = { RNS = { has_war_with = TKM } }
                      RNS = { has_defensive_war = yes }
                     }
                  }
                  or = {
                    AND = {
                      NOT = { country_exists = MRS }
                      NOT = { country_exists = ALI }
                     }
                    AND = {
                      MRS = { is_subject = yes } 
                      ALI = { is_subject = yes } 
                     }
                  }
                }
              }
            }

            or = {
              has_country_flag = TKM_Incorporate_priyoukai_into_the_circle_of_influence_flag
              AND = {
                has_country_flag = TKM_Priyoukai_Co_Prosperity_Circle_flag
                or = {
                  AND = {
                    or = {
                      AND = {                  
                        MRS = { is_subject = yes }
                        NOT = { MRS = { is_subject_of = ALI } }
                      }
                      MRS = { has_government = fandong }
                      MRS = { has_government = neworder }
                    }
                  }
                  AND = {
                    or = {
                      AND = {                  
                        ALI = { is_subject = yes }
                        NOT = { ALI = { is_subject_of = MRS } }
                      }
                      ALI = { has_government = fandong }
                      ALI = { has_government = neworder }
                    }
                  }
                }
              }
            }

            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {

            set_country_flag = {
              flag = TKM_war_preparation_flag
              days = 75
              value = 1
            }

            set_country_flag = {
              flag = TKM_prepare_for_war_MTM_flag
              days = 90
              value = 1
            }

            if = {
              limit = { 
                NOT = { country_exists = MTM }
                country_exists = MRS
                NOT = { has_war_with = MRS }
                NOT = { MRS = { is_in_faction_with = TKM } }
                NOT = { MRS = { is_subject_of = TKM } }
              }			
              MRS = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                NOT = { country_exists = MTM }
                MRS = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    MRS = { is_subject_of = TKM }
                  }
                }
              }
              MRS = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

            if = {
              limit = { 
                country_exists = MTM
                NOT = { has_war_with = MTM }
                NOT = { MTM = { is_in_faction_with = TKM } }
                NOT = { MTM = { is_subject_of = TKM } }
              }			
              MTM = {
                country_event = { id = kog2.76 days = 2}
              } 
            }

            if = {
              limit = {
                MTM = {
                  exists = yes
                  is_puppet = yes
                  NOT = {
                    has_war_with = TKM
                    MTM = { is_subject_of = TKM }
                  }
                }
              }
              MTM = { OVERLORD = { country_event = { id = kog2.76 days = 2} } }
            }

        }

        cancel_trigger = {
          or = {
              owns_state = 185
              any_country = {
                  is_subject_of = ROOT
                  owns_state = 185
              }
              any_country = {
                  owns_state = 185
                  has_war_with = ROOT
              }
              185 = {
                owner = {
                  bypass_declare_war = yes
                }
              }
          }
        }

        remove_effect = {

        set_country_flag = TKM_Ask_for_MTM_flag

          185 = { state_owner_get = yes }
          event_target:trigger_target = {country_event = { id = kog2.56 days = 2} }
          custom_effect_tooltip = TEG_accept
          effect_tooltip = {
            MTM = {
              can_core = yes
              subject_level2 = yes
            }
          }

        }
        ai_will_do = {
            factor = 750
            modifier = {
              ALI = { has_government = fandong }
              NOT = { ALI = { has_completed_focus = ALI_xunzhaogengduorenousucai } }
              ALI = { is_subject = no }
              factor = 0
            }
            modifier = {
              has_government = fandong
              MRS = { has_government = fandong }
              MRS = { is_subject = no }
              or = {
                MRS = { is_faction_leader = no }
                MRS = { is_in_faction = no }
                MRS = { is_in_faction_with = TKM }
                MRS = { is_in_faction_with = CIR }
                MRS = { is_in_faction_with = SEJ }
              }
              factor = 0
            }
            modifier = {
              MRS = { has_government = fandong }
              MRS = { is_subject = no }
              MRS = { is_faction_leader = no }
              or = {
                AND = {
                  SEJ = { has_government = fandong }
                  SEJ = { is_subject = no }
                  NOT = { country_exists = ALI }
                  NOT = { country_exists = MYK }
                }
                AND = {
                  CIR = { has_government = fandong }
                  CIR = { is_subject = no }
                  NOT = { country_exists = MFA }
                }
              }
              factor = 0
            }
            modifier = {
              185 = {
                owner = {
                  is_faction_leader = no
                  is_in_faction = yes
                  has_war = no
                }
              }
              factor = 0
            }
            modifier = {
              has_war = yes
              factor = 0
            }
            modifier = {
              has_country_flag = TKM_war_preparation_flag
              factor = 0
            }
        }

    }

    TKM_Formation_of_the_Greater_Tsukumo_Reich_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_bianbian_tt
                has_government = neworder
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            has_completed_focus = TKM_Revolutionary_revolution
            or = {
              has_country_flag = TKM_Ultimatum_to_SBK_flag
              NOT = { country_exists = SBK }
              SBK = { is_in_faction_with = TKM }
              SBK = { is_subject_of = TKM }
            }
            or = {
              has_country_flag = TKM_Ultimatum_to_RNS_flag
              NOT = { country_exists = RNS }
              RNS = { is_in_faction_with = TKM }
              RNS = { is_subject_of = TKM }
            }
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Formation_of_the_Greater_Tsukumo_Reich_flag

          set_cosmetic_tag = TKM_great
          add_ideas = Country
          hidden_effect = {
              news_event = { days = 2 id = kog2.37 }
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Establish_Combined_Syndicates_dec = {

		    icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
        }

        available = {
            has_completed_focus = TKM_Revolutionary_vanguard
            num_of_factories > 50
            has_country_flag = TKM_xuanjujieshu
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 60

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          set_country_flag = TKM_Establish_Combined_Syndicates_flag

          set_cosmetic_tag = TKM_gongtuan

          add_political_power = 50
          add_war_support = 0.15
          add_popularity = {
            ideology = fandong
            popularity = 0.15
          }
          hidden_effect = {
              news_event = { days = 2 id = kog2.38 }
          }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Seek_allies_1_dec = {
		    icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
            is_in_faction = no
            SEJ = { is_faction_leader = yes}
            SEJ = { has_government = fandong }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = SEJ
          }
        }
        targets = {
          SEJ
        }

        available = {
            has_completed_focus = TKM_Revolutionary_vanguard
            has_country_flag = TKM_xuanjujieshu
            has_country_flag = TKM_Establish_Combined_Syndicates_flag
            NOT = { has_war_with = SEJ } 
            or = {
              AND = {
                WAK = { has_completed_focus = WAK_anzhongtuolihongmoguan }
                WAK = { has_war_with = SCA }
              }
              has_war_together_with = SEJ
              any_other_country = {
                TAG = SEJ
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                  any_allied_country = {
                    is_neighbor_of = TKM
                  }
                  any_allied_country = {
                    any_neighbor_country = {
                      is_subject_of = TKM
                    }
                  }
                }
              }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 20

        fire_only_once = yes 


        complete_effect = {

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                has_war_with = SEJ
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                has_war_with = SEJ
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = -1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = -1000
                }
              }
            }

			      SEJ = { country_event = { id = kog2.89 } }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Seek_allies_2_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
            is_in_faction = no
            CIR = { is_faction_leader = yes}
            CIR = { has_government = fandong }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = CIR
          }
        }
        targets = {
          CIR
        }

        available = {
            has_completed_focus = TKM_Revolutionary_vanguard
            has_country_flag = TKM_xuanjujieshu
            has_country_flag = TKM_Establish_Combined_Syndicates_flag
            NOT = { has_war_with = CIR } 
            or = {
              AND = {
                WAK = { has_completed_focus = WAK_anzhongtuolihongmoguan }
                WAK = { has_war_with = SCA }
              }
              has_war_together_with = CIR
              any_other_country = {
                TAG = CIR
                or = {
                  is_neighbor_of = TKM
                  any_neighbor_country = {
                    is_subject_of = TKM
                  }
                  any_allied_country = {
                    is_neighbor_of = TKM
                  }
                  any_allied_country = {
                    any_neighbor_country = {
                      is_subject_of = TKM
                    }
                  }
                }
              }
            }
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 20

        fire_only_once = yes 


        complete_effect = {

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                has_war_with = CIR
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = 1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = 1000
                }
              }
            }

        }

        cancel_trigger = {

        }

        remove_effect = {

            every_other_country = {
              limit = {
                is_neighbor_of = TKM
                has_war_with = CIR
              }
              add_ai_strategy = {
                type = prepare_for_war
                id = ROOT
                value = -1000
              }
              ROOT = {
                add_ai_strategy = {
                  type = prepare_for_war
                  id = PREV
                  value = -1000
                }
              }
            }

			      CIR = { country_event = { id = kog2.91 } }

        }
        ai_will_do = {
            factor = 1
        }

    }

    TKM_Seek_allies_3_dec = {

		icon = generic_political_actions
        allowed = {
          tag = TKM
        }
        visible = {
            is_subject = no 
            or = {
              custom_trigger_tooltip = {
                tooltip = TKM_baqiao_tt
                has_government = fandong
              }
              custom_trigger_tooltip = {
                tooltip = TKM_qinxin_tt
                has_government = guli
              }
            }
            is_in_faction = no
            or = {
            NOT = { country_exists = SEJ }
            SEJ = { has_completed_focus = SEJ_xiaorengongzhu }
            SEJ = { has_completed_focus = SEJ_maixiangdayaoguai }
            SEJ = { has_completed_focus = SEJ_chedizhongzhihezuo }
            }
            or = {
            NOT = { country_exists = CIR }
            CIR = { has_completed_focus = CIR_yaojingpaiwaihua }
            CIR = { has_completed_focus = CIR_shunyingbianhua }
            AND = {
              or = {
              NOT = { country_exists = SEJ }
              SEJ = { has_completed_focus = SEJ_xiaorengongzhu }
              SEJ = { has_completed_focus = SEJ_maixiangdayaoguai }
              SEJ = { has_completed_focus = SEJ_chedizhongzhihezuo }
              }
              CIR = { has_completed_focus = CIR_zhenduiemo }
            }
            }
        }

		    target_trigger = {
			    FROM = {
			      original_tag = TKM
          }
        }
        targets = {
          TKM
        }

        available = {
            has_completed_focus = TKM_Revolutionary_vanguard
            has_country_flag = TKM_xuanjujieshu
            has_country_flag = TKM_Establish_Combined_Syndicates_flag
            custom_trigger_tooltip = {
                tooltip = TKM_Political_points_are_positive_tt
                or = {
                  has_political_power > 0
                  is_ai = yes
                }
            }
        }

        modifier = {
				    political_power_cost = 0.5
        }

        cost = 0

        days_remove = 10

        fire_only_once = yes 


        complete_effect = {


        }

        cancel_trigger = {

        }

        remove_effect = {

          add_ideas = can_create_faction_idea
          create_faction = TKM_daojuxiakeshanglianmeng_faction

        }
        ai_will_do = {
            factor = 1
        }

    }

}

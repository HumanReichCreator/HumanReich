focus_tree = {
	id = TKM_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = TKM
		}
	}

	shared_focus = ty_medium_main 

	continuous_focus_position = { x = 2800 y = 20 }

# GFX_goal_continuous_air_production
# GFX_goal_continuous_non_factory_construct
# GFX_goal_continuous_reduce_training_time
# GFX_goal_continuous_boost_freedom
# GFX_goal_continuous_suppression
# GFX_goal_continuous_restrict_freedom
# GFX_goal_continuous_def_against_influence
# GFX_goal_continuous_research
# GFX_goal_continuous_increase_nu
# GFX_goal_continuous_repairments
# GFX_goal_continuous_naval_production
# GFX_goal_continuous_armor_production
# GFX_focus_generic_steel
# GFX_focus_generic_aluminum
# GFX_focus_generic_tungsten
# GFX_focus_research2
# GFX_focus_generic_treaty
# GFX_focus_generic_military_academy
# GFX_focus_generic_military_mission
# GFX_focus_generic_concessions
# GFX_focus_generic_self_management
# GFX_focus_generic_license_production
# GFX_focus_smiling_buddha
# GFX_focus_generic_join_comintern
# GFX_focus_generic_home_defense
# GFX_focus_generic_the_giant_wakes
# GFX_focus_generic_cryptologic_bomb
# GFX_focus_generic_socialist_science
# GFX_focus_generic_italy_first
# GFX_focus_generic_little_entente
# GFX_focus_generic_soviet_politics
# GFX_focus_generic_strike_at_democracy3
# GFX_focus_generic_strike_at_democracy2
# GFX_focus_generic_strike_at_democracy1
# GFX_focus_generic_anti_fascist_diplomacy
# GFX_focus_generic_japanese_imperial_glory
# GFX_focus_generic_support_the_left_right
# GFX_focus_generic_polish_deal
# GFX_focus_generic_air_defense
# GFX_focus_generic_coastal_fort
# GFX_focus_generic_paratrooper
# GFX_focus_generic_diplomatic_treaty
# GFX_focus_NZL_bob_semple_tank
# GFX_goal_unknown
# GFX_goal_generic_production
# GFX_goal_shine_test
# GFX_goal_generic_attack_allies
# GFX_goal_generic_oil_refinery
# GFX_goal_generic_positive_trade_relations
# GFX_goal_generic_military_deal
# GFX_goal_generic_wolf_pack
# GFX_goal_generic_amphibious_assault
# GFX_goal_generic_dangerous_deal
# GFX_goal_generic_military_sphere
# GFX_goal_generic_major_alliance
# GFX_goal_generic_more_territorial_claims
# GFX_goal_generic_major_war
# GFX_goal_generic_soviet_construction
# GFX_goal_generic_fortify_city
# GFX_goal_generic_war_with_comintern
# GFX_goal_generic_territory_or_war
# GFX_goal_generic_forceful_treaty
# GFX_goal_generic_scientific_exchange
# GFX_goal_generic_intelligence_exchange
# GFX_goal_generic_small_arms
# GFX_goal_generic_trade
# GFX_goal_generic_consumer_goods
# GFX_goal_generic_defence
# GFX_goal_generic_air_production
# GFX_goal_generic_radar
# GFX_goal_generic_alliance
# GFX_goal_generic_construction2
# GFX_goal_generic_air_fighter2
# GFX_goal_generic_cavalry
# GFX_goal_generic_construction
# GFX_goal_generic_production2
# GFX_goal_generic_neutrality_focus
# GFX_goal_generic_secret_weapon
# GFX_goal_generic_navy_cruiser
# GFX_goal_generic_construct_naval_dockyard
# GFX_goal_generic_air_naval_bomber
# GFX_goal_generic_national_unity
# GFX_goal_generic_construct_infrastructure
# GFX_goal_generic_construct_mil_factory
# GFX_goal_generic_construct_civ_factory
# GFX_goal_generic_army_artillery2
# GFX_goal_generic_army_artillery
# GFX_goal_generic_army_doctrines
# GFX_goal_generic_army_tanks
# GFX_goal_generic_army_motorized
# GFX_goal_generic_navy_doctrines_tactics
# GFX_goal_generic_navy_anti_submarine
# GFX_goal_generic_navy_submarine
# GFX_goal_generic_navy_carrier
# GFX_goal_generic_navy_battleship
# GFX_goal_generic_air_doctrine
# GFX_goal_generic_CAS
# GFX_goal_generic_air_fighter
# GFX_goal_generic_air_bomber
# GFX_goal_generic_propaganda
# GFX_goal_generic_special_forces
# GFX_focus_wonderweapons
# GFX_focus_research
# GFX_focus_rocketry
# GFX_goal_support_fascism
# GFX_goal_support_communism
# GFX_goal_support_fourth_int
# GFX_goal_support_democracy
# GFX_goal_generic_allies_build_infantry
# GFX_goal_generic_build_tank
# GFX_goal_generic_build_airforce
# GFX_goal_generic_axis_build_infantry
# GFX_goal_generic_build_navy
# GFX_goal_generic_improve_relations
# GFX_goal_generic_political_pressure
# GFX_goal_generic_demand_territory
# GFX_goal_generic_occupy_start_war
# GFX_goal_generic_occupy_states_coastal
# GFX_goal_generic_occupy_states_ongoing_war
# GFX_goal_generic_position_armies
# GFX_goal_generic_construct_military
# GFX_goal_generic_construct_civilian
# GFX_focus_generic_cruiser2
# GFX_focus_generic_destroyer
# GFX_focus_generic_navy_battleship2
# GFX_focus_generic_industry_3
# GFX_focus_generic_industry_2
# GFX_focus_generic_industry_1
# GFX_focus_generic_combined_arms
# GFX_focus_generic_tank_production
# GFX_focus_generic_army_tanks2
# GFX_goal_fortify_the_westwall
# GFX_goal_reichsautobahn
# GFX_goal_panzerwaffe
# GFX_goal_expand_the_luftwaffe
# GFX_goal_molotov_ribbentrop_pact
# GFX_goal_anschluss
# GFX_goal_rhineland
# GFX_goal_poland_goal
# GFX_goal_demand_sudetenland
# GFX_goal_tripartite_pact
# GFX_goal_anti_comintern_pact
# GFX_focus_ger_reichskommisariats
# GFX_focus_generic_rubber
# GFX_focus_ger_revive_kaiserreich
# GFX_focus_ger_return_of_the_kaiser
# GFX_focus_ger_assassinate_mussolini
# GFX_focus_ger_great_red_menace
# GFX_focus_ger_oppose_hitler
# GFX_focus_ger_bulwark_against_bolshevism
# GFX_focus_ger_strike_at_the_source
# GFX_focus_ger_accept_british_naval_dominance
# GFX_focus_ger_break_anglo_french_colonial_hegemony
# GFX_goal_tfv_sever_ties_with_uk
# GFX_goal_tfv_strengthen_commonwealth_ties
# GFX_goal_tfv_generic_tech_sharing
# GFX_goal_tfv_burn_the_royal_portraits
# GFX_goal_tfv_can_forced_quebec_conscription
# GFX_goal_tfv_can_compromise_with_quebec
# GFX_focus_AST_never_gallipoli
# GFX_focus_generic_provoke_border_clashes
# GFX_focus_AST_rats_tobruk
# GFX_focus_AST_squander_bug
# GFX_focus_AST_war_japan
# GFX_goal_tfv_saf_anti_colonialist_crusade
# GFX_goal_tfv_saf_support_german_coup
# GFX_goal_tfv_saf_secure_interests_in_africa
# GFX_goal_tfv_saf_support_ossebrandwag
# GFX_focus_rom_preserve_romania
# GFX_focus_rom_abdicate
# GFX_focus_rom_coup
# GFX_focus_rom_handle_king
# GFX_focus_rom_royal_dictatorship
# GFX_focus_rom_parties_end
# GFX_focus_hun_elect_a_king
# GFX_focus_hun_assassinate_horthy
# GFX_focus_secret_rearmament
# GFX_focus_proclaim_the_restauration_of_Austria_Hungary
# GFX_focus_renounce_the_treaty_of_trianon
# GFX_focus_attack_switzerland
# GFX_focus_CZE_military_aeronautical_institute
# GFX_focus_CZE_german_puppet
# GFX_focus_CZE_military_research_institute
# GFX_focus_YUG_zmaj
# GFX_focus_YUG_rogozarski
# GFX_focus_YUG_ikarus
# GFX_focus_YUG_banovina_of_croatia
# GFX_focus_YUG_pan_slavic_congress
# GFX_focus_RAJ_all_india_forward_bloc
# GFX_focus_RAJ_british_investors
# GFX_focus_RAJ_clamp_down_on_corruption
# GFX_focus_RAJ_indian_gentlemen_offcers
# GFX_focus_RAJ_indian_gurkhas
# GFX_focus_RAJ_indianisation_of_army
# GFX_focus_RAJ_lions_of_the_great_war
# GFX_focus_RAJ_seek_help_from_germany
# GFX_focus_RAJ_seek_help_from_soviet
# GFX_focus_RAJ_two_nation_theory
# GFX_focus_generic_commonwealth_build_infantry
# GFX_focus_chi_legislative_yuan
# GFX_focus_chi_examination_yuan
# GFX_focus_chi_united_front
# GFX_focus_chi_army_reform
# GFX_focus_chi_flying_tigers
# GFX_focus_chi_whampoa_military_academy
# GFX_focus_chi_one_china_policy
# GFX_focus_chi_mission_to_germany
# GFX_focus_chi_mission_to_the_soviet_union
# GFX_focus_chi_reach_out_to_france
# GFX_focus_chi_british_cooperation
# GFX_focus_chi_mission_to_the_us
# GFX_focus_chi_collaboration_with_the_japanese
# GFX_focus_chi_cooperation_with_the_nationalists
# GFX_focus_chi_proclaim_rival_government
# GFX_focus_chi_cooperation_with_the_communists
# GFX_focus_man_claim_the_mandate_of_heaven
# GFX_focus_prc_proclaim_the_peoples_republic
# GFX_focus_prc_infiltration
# GFX_focus_prc_remove_chiang_kai_shek
# GFX_focus_prc_social_democracy
# GFX_focus_prc_agrarian_socialism
# GFX_focus_prc_maoism
# GFX_focus_generic_china1
# GFX_focus_jap_strike_south
# GFX_focus_jap_cast_the_die
# GFX_focus_jap_zaibatsu
# GFX_focus_jap_showa_restoration
# GFX_focus_jap_pacific_guardian
# GFX_focus_jap_manchurian_project
# GFX_focus_jap_spiritual_mobilization
# GFX_focus_jap_zero
# GFX_focus_mex_restore_the_army_of_christ
# GFX_focus_mex_soldaderas
# GFX_focus_mex_jefe_maximo
# GFX_focus_mex_exile_calles
# GFX_focus_mex_triumph_over_the_cristeros
# GFX_focus_mex_support_general_cedillo
# GFX_focus_mex_arrest_general_cedillo
# GFX_focus_mex_caudillo_private_armies
# GFX_focus_mex_redeem_aztlan
# GFX_focus_mex_privatisation
# GFX_focus_eng_special_air_service
# GFX_focus_eng_chiefs_of_staff_committee
# GFX_focus_eng_decolonization
# GFX_focus_eng_global_defense
# GFX_focus_eng_motion_of_no_confidence
# GFX_focus_eng_the_kings_party
# GFX_focus_eng_unite_the_anglosphere
# GFX_focus_eng_the_sun_never_sets
# GFX_focus_eng_liberate_the_home_of_marx
# GFX_focus_eng_expose_the_belly_of_the_bear
# GFX_focus_eng_move_to_secure_the_dominions
# GFX_focus_eng_crush_the_dream
# GFX_focus_eng_organise_the_blackshirts
# GFX_focus_eng_concessions_to_the_trade_unions
# GFX_focus_eng_bring_the_dominions_back_into_the_fold
# GFX_focus_eng_god_save_the_king
# GFX_focus_eng_imperial_federation
# GFX_focus_usa_reestablish_the_gold_standard
# GFX_focus_usa_focus_on_europe
# GFX_focus_usa_focus_on_asia
# GFX_focus_usa_escort_fighters
# GFX_focus_usa_build_the_pentagon
# GFX_focus_usa_voter_registration_act
# GFX_focus_usa_union_representation_act
# GFX_focus_usa_honor_the_confederacy
# GFX_focus_usa_guarantee_the_american_dream
# GFX_focus_usa_recruit_the_free_corps
# GFX_focus_usa_tank_destroyer_doctrine
# GFX_focus_attack_britain
# GFX_focus_attack_germany
# GFX_focus_attack_japan
# GFX_focus_attack_italy
# GFX_focus_attack_soviet
# GFX_focus_attack_france
# GFX_focus_attack_mexico
# GFX_focus_attack_china
# GFX_focus_attack_australia
# GFX_focus_attack_india
# GFX_focus_attack_canada
# GFX_focus_hol_abandon_the_gold_standard
# GFX_focus_hol_continue_the_war_in_batavia
# GFX_focus_hol_war_on_pacifism
# GFX_focus_hol_philips
# GFX_focus_hol_fokker
# GFX_focus_hol_daf
# GFX_focus_hol_prepare_the_inundation_lines
# GFX_focus_hol_gateway_to_europe
# GFX_focus_hol_united_netherlands
# GFX_focus_hol_legacy_of_the_de_zeven_provincien_mutiny
# GFX_focus_hol_oranje_boven
# GFX_focus_hol_the_only_man_in_the_dutch_government
# GFX_focus_hol_the_fourth_ally
# GFX_focus_hol_the_zuiderzee_works
# GFX_focus_hol_the_foundations_of_defense
# GFX_focus_hol_liberation
# GFX_focus_focus_fra_third_empire
# GFX_focus_focus_fra_revolution_utmost
# GFX_focus_focus_fra_ratify_stresa
# GFX_focus_focus_fra_orleans_restoration
# GFX_focus_focus_fra_national_resistance_council
# GFX_focus_focus_fra_maquis
# GFX_focus_focus_fra_liberte_egalite_solidarite
# GFX_focus_focus_fra_intervention_spain
# GFX_focus_focus_fra_fascist_threat
# GFX_focus_focus_fra_down_marianne
# GFX_focus_focus_fra_border
# GFX_focus_up_joan_of_arc
# GFX_focus_spa_caudillo_of_spain
# GFX_focus_spa_eliminate_the_carlists
# GFX_focus_spa_fuse_the_parties
# GFX_focus_spa_no_compromise_on_carlist_ideals
# GFX_focus_spa_save_the_alcazar
# GFX_focus_spa_strengthen_the_supreme_reality_of_spain
# GFX_focus_spa_supremacy_of_the_communion
# GFX_focus_spa_the_phalanx_ascendant
# GFX_focus_spa_the_spanish_miracle
# GFX_focus_spa_the_war_of_vengeance
# GFX_focus_spa_unify_the_nationalist_front
# GFX_focus_spr_anarchism_knows_no_borders
# GFX_focus_spr_class_war
# GFX_focus_spr_crush_the_revolution
# GFX_focus_spr_maintain_the_republic
# GFX_focus_spr_masters_of_our_own_fate
# GFX_focus_spr_no_pasaran
# GFX_focus_spr_regional_defense_council_of_aragon
# GFX_focus_spr_the_anti_fascist_workers_revolution
# GFX_focus_spr_torchbearers_of_tomorrow
# GFX_focus_spr_unify_the_london_bureau
# GFX_focus_spr_war_of_independence
# GFX_focus_generic_befriend_portugal
# GFX_focus_generic_attack_portugal
# GFX_focus_fra_devalue_the_franc
# GFX_focus_fra_le_deluge
# GFX_focus_fra_loyalty_stalin
# GFX_focus_fra_loyalty_trotzky
# GFX_focus_befriend_italy
# GFX_focus_intervention_spain_republic
# GFX_focus_intervention_spain_nationalists
# GFX_focus_generic_manpower
# GFX_focus_fra_regiment_normandie
# GFX_focus_fra_milice
# GFX_focus_fra_french_union
# GFX_focus_invite_finland
# GFX_focus_invite_yugoslavia
# GFX_focus_invite_romania
# GFX_focus_generic_africa_infrastructure
# GFX_focus_generic_africa_factory
# GFX_focus_generic_africa_naval
# GFX_focus_generic_africa_production
# GFX_focus_generic_monarchy_1
# GFX_focus_generic_monarchy_2
# GFX_focus_generic_royal_wedding
# GFX_focus_por_estado_novo
# GFX_focus_por_limited_self_rule
# GFX_focus_por_luso_tropicalism
# GFX_focus_por_portuguese_legion
# GFX_focus_por_reclaim_crown_jewel
# GFX_focus_por_recover_brazil
# GFX_focus_por_remember_olivenca
# GFX_focus_por_the_fifth_empire
# GFX_focus_por_the_kingdom_reunited
# GFX_focus_por_the_pink_map
# GFX_focus_por_workers_of_iberia
# GFX_focus_por_recover_latin_america
# GFX_focus_por_latin_american_communism
# GFX_focus_por_iberian_summit
# GFX_focus_por_salazar
# GFX_focus_por_concordat
		# ai_will_do = {
		# 	factor = 1
		# }

		# bypass = {
			
		# }

		# cancel_if_invalid = no
		# continue_if_invalid = yes
		# available_if_capitulated = yes
	# default = no
  ##########鼓哥#########
  focus = {
      id = TKM_Progressive_leader
      icon = focus_Horikawa_Raiko
      cost = 14
      x = 5
      y = 0

      # prerequisite = {
      #    focus = ty_kejichuangxin
      # }


      # relative_position_id = ty_medium_main

      mutually_exclusive = {
          focus = TKM_Revolutionary_vanguard
          focus = TKM_Revolutionary_revolution
          focus = TKM_Returning_props
      }

      available = {
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_guge_tt
            has_government = qinwai
            has_country_flag = TKM_gugelvse
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {
          TKM_Political_concept_establishment = yes

          add_political_power = 50

		      add_popularity = {
	    	    ideology = qinwai
	    	    popularity = 0.10
	        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Incarnation_of_knowledge
      icon = GFX_focus_research2
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Progressive_leader
      }


      relative_position_id = TKM_Progressive_leader

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = -30

          add_ideas = tkm_Technocratic_system_idea

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Independent_technological_innovation
      icon = GFX_goal_generic_production2
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Incarnation_of_knowledge
      }


      relative_position_id = TKM_Incarnation_of_knowledge

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_tech_bonus = {
            bonus = 0.50
            uses = 1
            category = math
          }

          add_tech_bonus = {
            bonus = 0.50
            uses = 2
            category = industrys
          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.15 }
          }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Compromise_with_radicals
      icon = GFX_focus_por_workers_of_iberia
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Progressive_leader
      }


      relative_position_id = TKM_Progressive_leader

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = 25

		      add_popularity = {
	    	    ideology = fandong
	    	    popularity = 0.05
	        }

	      unlock_decision_tooltip = TKM_Compromise_with_radicals_dec

        lobbyincrease = yes

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Proper_nationalism
      icon = GFX_goal_tfv_saf_support_ossebrandwag
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Compromise_with_radicals
      }


      relative_position_id = TKM_Compromise_with_radicals

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = 25

		      add_popularity = {
	    	    ideology = neworder
	    	    popularity = 0.05
	        }

	      unlock_decision_tooltip = TKM_Proper_nationalism_dec

        lobbyincrease = yes

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Power_transfer_course
      icon = GFX_focus_generic_manpower
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Incarnation_of_knowledge
      }

      prerequisite = {
         focus = TKM_Compromise_with_radicals
      }

      relative_position_id = TKM_Incarnation_of_knowledge

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes
          custom_effect_tooltip = TKM_leiguyaolizhuanyikecheng_tt
          add_ideas = TKM_leiguyaolizhuanyikecheng_idea
          hidden_effect = {
              news_event = { days = 2 id = kog2.14 }
          }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Electrification_across_the_country
      icon = GFX_focus_eng_organise_the_blackshirts
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Independent_technological_innovation
      }

      prerequisite = {
         focus = TKM_Power_transfer_course
      }

      relative_position_id = TKM_Independent_technological_innovation

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

			if = {
				limit = {
					299 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = industrial_complex
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}							

				}
			}
			299 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}

				}
			}

			if = {
				limit = {
					237 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = industrial_complex
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}							

				}
			}
			237 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}

				}
			}

			if = {
				limit = {
					211 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = industrial_complex
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}							

				}
			}
			211 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}

				}
			}

			if = {
				limit = {
					196 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = industrial_complex
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}							

				}
			}
			196 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
          add_resource = {
              type = gas
              amount = 3
          }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}

				}
			}

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Pan_Youkaism
      icon = focus_KOG_pan_youkaism
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Power_transfer_course
      }

      prerequisite = {
         focus = TKM_Proper_nationalism
      }

      relative_position_id = TKM_Power_transfer_course

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        if = {
          limit = { 
            YKR = {
              faqiqingqiu = yes
            }
            YKR = {
              is_subject = no
            }
          }
          YKR = {
            add_opinion_modifier = { target = ROOT modifier = TKM_kaolongzi_op}
            reverse_add_opinion_modifier = { target = ROOT modifier = TKM_kaolongzi_op}
            can_use = yes
            ROOT = {
               can_use = yes
            }
          }
        }

        if = {
          limit = { 
            MEL = {
              faqiqingqiu = yes
            }
            MEL = {
              is_subject = no
            }
          }
          MEL = {
            add_opinion_modifier = { target = ROOT modifier = TKM_kaolongzi_op}
            reverse_add_opinion_modifier = { target = ROOT modifier = TKM_kaolongzi_op}
            can_use = yes
            ROOT = {
               can_use = yes
            }
          }
        }


        add_ideas = tkm_Pan_Hobism_idea
        conservativeincrease = yes

        hidden_effect = {
            news_event = { days = 2 id = kog2.50 }
        }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Guide_the_progress_of_the_youkai
      icon = focus_youkai_co_prosperty_sphere
      cost = 16
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Electrification_across_the_country
      }

      prerequisite = {
         focus = TKM_Pan_Youkaism
      }

      relative_position_id = TKM_Electrification_across_the_country

      available ={
          is_faction_leader = yes
          num_faction_members > 1
      }

      bypass = {
      
      }

      completion_reward = {

          add_political_power = 50

          set_cosmetic_tag = TKM_reb

          add_ideas = Country

          FT_power_factor_add0.3 = yes

          if = {
            limit = {
              NOT = {
                is_in_tech_sharing_group = lihuaxueyanjiusuo
              }
            }
            add_to_tech_sharing_group = lihuaxueyanjiusuo
          }

          custom_effect_tooltip = TKM_Guide_the_progress_of_the_youkai_tt

          conservativeincrease = yes

          hidden_effect = {
              news_event = { days = 2 id = kog2.100 }
          }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  ##########八桥#########

  focus = {
      id = TKM_Revolutionary_vanguard
      icon = focus_Tsukumo_Yatsuhashi
      cost = 14
      x = 6
      y = 0

      mutually_exclusive = {
          focus = TKM_Progressive_leader
          focus = TKM_Revolutionary_revolution
          focus = TKM_Returning_props
      }

      relative_position_id = TKM_Progressive_leader

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_war_support = 0.05

		      add_popularity = {
	    	    ideology = fandong
	    	    popularity = 0.10
	        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Take_over_production_equipment
      icon = GFX_focus_spr_masters_of_our_own_fate
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Revolutionary_vanguard
      }


      relative_position_id = TKM_Revolutionary_vanguard

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_stability = -0.05

		      add_popularity = {
	    	    ideology = fandong
	    	    popularity = 0.10
	        }

          add_ideas = tkm_Tool_self_management_idea

          conservativeincrease = yes

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Tool_wisdom
      icon = GFX_focus_generic_socialist_science
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Take_over_production_equipment
      }


      relative_position_id = TKM_Take_over_production_equipment

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_tech_bonus = {
            category = fuzhu
            bonus = 0.60
            uses = 1
          }
          add_tech_bonus = {
            category = jiegou
            bonus = 0.60
            uses = 1
          }
          add_tech_bonus = {
            category = resource
            bonus = 0.60
            uses = 1
          } 
      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_The_liberation_of_props
      icon = GFX_focus_TUR_ratify_the_six_arrows
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Revolutionary_vanguard
      }


      relative_position_id = TKM_Revolutionary_vanguard

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = 50

	        unlock_decision_tooltip = TKM_Liberation_Item_Agreement_dec

          add_ideas = tkm_Target_lock_idea
          lobbyincrease = yes
          hidden_effect = {
              news_event = { days = 2 id = kog2.18 }
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_uninterrupted_genkokujyo
      icon = focus_generic_anarchist_Gekokujo
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_The_liberation_of_props
      }


      relative_position_id = TKM_The_liberation_of_props

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_war_support = 0.15

		      add_popularity = {
	    	    ideology = fandong
	    	    popularity = 0.15
	        }

         custom_effect_tooltip = CIR_anzhihoufang_tt
         add_to_variable = { EXHC_time_base_add = 0.33}

         conservativeincrease = yes

		  	 lobbyincrease = yes

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Militarization_of_labor
      icon = focus_KOG_syndicalist_revolution
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Take_over_production_equipment
      }

      prerequisite = {
         focus = TKM_The_liberation_of_props
      }

      relative_position_id = TKM_Take_over_production_equipment

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_stability = -0.05

          add_tech_bonus = {
            category = primary_weapons
            category = mortar
            uses = 2
            bonus = 0.5
          }

          swap_ideas = { remove_idea = tkm_Tool_self_management_idea add_idea = tkm_Militarization_of_labor_idea }

          lobbyincrease = yes

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Pay_attention_to_old_props
      icon = GFX_focus_focus_fra_maquis
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Tool_wisdom
      }

      prerequisite = {
         focus = TKM_Militarization_of_labor
      }

      relative_position_id = TKM_Tool_wisdom

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_political_power = 50

        add_stability = 0.1

	      unlock_decision_tooltip = TKM_Fix_old_props_dec

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Initiate_a_strike
      icon = GFX_goal_tfv_burn_the_royal_portraits
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Militarization_of_labor
      }

      prerequisite = {
         focus = TKM_uninterrupted_genkokujyo
      }

      relative_position_id = TKM_Militarization_of_labor

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          if = {
            limit = { 
              country_exists = SBK
              NOT = { SBK = { has_government = fandong } }
              NOT = { SBK = { is_in_faction_with = TKM } }
              NOT = { SBK = { is_subject_of = TKM } }
            }			
            SBK = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = RNS
              NOT = { RNS = { has_government = fandong } }
              NOT = { RNS = { is_in_faction_with = TKM } }
              NOT = { RNS = { is_subject_of = TKM } }
            }			
            RNS = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = ALI
              NOT = { ALI = { has_government = fandong } }
              NOT = { ALI = { is_in_faction_with = TKM } }
              NOT = { ALI = { is_subject_of = TKM } }
            }			
            ALI = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = MRS
              NOT = { MRS = { has_government = fandong } }
              NOT = { MRS = { is_in_faction_with = TKM } }
              NOT = { MRS = { is_subject_of = TKM } }
            }			
            MRS = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = WAK
              NOT = { WAK = { has_government = fandong } }
              NOT = { WAK = { is_in_faction_with = TKM } }
              NOT = { WAK = { is_subject_of = TKM } }
              NOT = { WAK = { has_country_flag = WAK_kogdaying } }
            }			
            WAK = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = SCA
              NOT = { SCA = { has_government = fandong } }
              NOT = { SCA = { is_in_faction_with = TKM } }
              NOT = { SCA = { is_subject_of = TKM } }
            }			
            SCA = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = KYK
              NOT = { KYK = { has_government = fandong } }
              NOT = { KYK = { is_in_faction_with = TKM } }
              NOT = { KYK = { is_subject_of = TKM } }
              NOT = { KYK = { has_completed_focus = KYK_TKMjiemeng } }
            }			
            KYK = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = NMS
              NOT = { NMS = { has_government = fandong } }
              NOT = { NMS = { is_in_faction_with = TKM } }
              NOT = { NMS = { is_subject_of = TKM } }
            }			
            NMS = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = MNM
              NOT = { MNM = { has_government = fandong } }
              NOT = { MNM = { is_in_faction_with = TKM } }
              NOT = { MNM = { is_subject_of = TKM } }
            }			
            MNM = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

          if = {
            limit = { 
              country_exists = NUE
              NOT = { NUE = { has_government = fandong } }
              NOT = { NUE = { is_in_faction_with = TKM } }
              NOT = { NUE = { is_subject_of = TKM } }
            }			
            NUE = {
              add_ideas = TKM_Prop_riot_idea
              add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
              reverse_add_opinion_modifier = { modifier = TKM_Prop_riot_op target = ROOT}
            } 
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_The_beacon_of_revolution_in_the_south
      icon = focus_KOG_lighthouse_of_revolutionaries
      cost = 16
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Pay_attention_to_old_props
      }

      prerequisite = {
         focus = TKM_Initiate_a_strike
      }

      relative_position_id = TKM_Pay_attention_to_old_props

      available ={
          is_in_faction = yes
      }

      bypass = {
      
      }

      completion_reward = {

        add_political_power = 50

        add_ideas = TKM_Revolutionary_Guidance_Department_idea

        if = {
          limit = {
            NOT = {
              is_in_tech_sharing_group = jingjihezuoshe
            }
          }
          add_to_tech_sharing_group = jingjihezuoshe
        }

        custom_effect_tooltip = TKM_The_beacon_of_revolution_in_the_south_tt

        conservativeincrease = yes

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  ##########弁弁#########

  focus = {
      id = TKM_Revolutionary_revolution
      icon = focus_Tsukumo_Benben
      cost = 14
      x = 6
      y = 0

      mutually_exclusive = {
          focus = TKM_Progressive_leader
          focus = TKM_Revolutionary_vanguard
          focus = TKM_Returning_props
      }

      relative_position_id = TKM_Revolutionary_vanguard

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_war_support = 0.05

		      add_popularity = {
	    	    ideology = neworder
	    	    popularity = 0.10
	        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Gesetz_zur_Behebung_der
      icon = GFX_focus_hol_the_foundations_of_defense
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Revolutionary_revolution
      }


      relative_position_id = TKM_Revolutionary_revolution

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = -50

          add_ideas = TKM_Gesetz_zur_Behebung_der_idea
          add_stability = 0.05

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Tsukumogami_Schutzstaffel
      icon = focus_Tsukumo_Guard
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Gesetz_zur_Behebung_der
      }


      relative_position_id = TKM_Gesetz_zur_Behebung_der

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_ideas = TKM_Tsukumogami_Schutzstaffel_idea
          add_stability = 0.05
          add_war_support = 0.05
          conservativedecrease = yes

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Stabbed_back
      icon = GFX_focus_spa_the_war_of_vengeance
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Revolutionary_revolution
      }


      relative_position_id = TKM_Revolutionary_revolution

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_ai_strategy = {
            type = antagonize
            id = YKR
            value = 50
          }
          YKR = {
            add_ai_strategy = {
              type = antagonize
              id = TKM
              value = 50
            }
          }

          add_opinion_modifier = { modifier = TKM_Stabbed_back_YKR_op target = YKR }
          reverse_add_opinion_modifier = { modifier = TKM_Stabbed_back_YKR_op target = YKR }

          add_ai_strategy = {
            type = befriend
            id = HUM
            value = 20
          }
          HUM = {
            add_ai_strategy = {
              type = befriend
              id = TKM
              value = 20
            }
          }

          add_opinion_modifier = { modifier = TKM_Stabbed_back_HUM_op target = HUM }
          reverse_add_opinion_modifier = { modifier = TKM_Stabbed_back_HUM_op target = HUM }

          add_political_power = 150
          add_war_support = 0.10
          lobbyincrease = yes

          hidden_effect = {
              news_event = { days = 2 id = kog2.51 }
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_The_genkokujyo_of_props
      icon = focus_generic_national_Gekokujo
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Stabbed_back
      }


      relative_position_id = TKM_Stabbed_back

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          every_country = {
            limit = {
              has_government = fandong
              or = {
                TAG = SEJ
                TAG = CIR
                TAG = MRS
                TAG = ALI
              }
            }
            add_ai_strategy = {
              type = antagonize
              id = ROOT
              value = 15
            }
            ROOT = {
              add_ai_strategy = {
                type = antagonize
                id = PREV
                value = 15
              }
            }
            add_opinion_modifier = { modifier = TKM_The_genkokujyo_of_props_op target = ROOT}
            reverse_add_opinion_modifier = { modifier = TKM_The_genkokujyo_of_props_op target = ROOT}
          }

          add_war_support = 0.10

		      add_popularity = {
	    	    ideology = neworder
	    	    popularity = 0.20
	        }

          if = {
            limit = { is_in_faction = yes }
            leave_faction = yes
          }

          swap_ideas = { add_idea = TKM_Triumph_of_will_idea remove_idea = TKM_Fear_of_destruction_idea }

		  	  lobbyincrease = yes

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Military_complex
      icon = GFX_focus_jap_zaibatsu
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Gesetz_zur_Behebung_der
      }

      prerequisite = {
         focus = TKM_Stabbed_back
      }

      relative_position_id = TKM_Gesetz_zur_Behebung_der

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_political_power = -150

        TKM_Political_concept_establishment = yes

			if = {
				limit = {
					299 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = arms_factory
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}							

				}
			}
			299 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}

				}
			}

			if = {
				limit = {
					237 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = arms_factory
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}							

				}
			}
			237 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}

				}
			}

			if = {
				limit = {
					211 = {
						OR = {
							NOT = { is_controlled_by = TKM }
							AND = {
								is_controlled_by = TKM
								free_building_slots = {
									building = arms_factory
									size < 1
									include_locked = yes
								}
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = { 
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}							

				}
			}
			211 = {
				if = {
					limit = { 
						is_controlled_by = TKM
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}

				}
			}

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Armaments_payment_promissory_note
      icon = GFX_focus_mex_privatisation
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Tsukumogami_Schutzstaffel
      }

      prerequisite = {
         focus = TKM_Military_complex
      }

      relative_position_id = TKM_Tsukumogami_Schutzstaffel

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

		    add_timed_idea = { idea = TKM_mefo_bills_1_idea days = 180 }

	      unlock_decision_tooltip = TKM_mefo_bills_dec

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Tsukumogami
      icon = GFX_focus_GRE_reviving_the_double_headed_eagle
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Military_complex
      }

      prerequisite = {
         focus = TKM_The_genkokujyo_of_props
      }

      relative_position_id = TKM_Military_complex

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_political_power = 50

	      unlock_decision_tooltip = TKM_Define_Tsukumogami_dec

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Our_time
      icon = GFX_focus_spa_strengthen_the_supreme_reality_of_spain
      cost = 16
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Armaments_payment_promissory_note
      }

      prerequisite = {
         focus = TKM_Tsukumogami
      }

      relative_position_id = TKM_Armaments_payment_promissory_note

      available ={
        custom_trigger_tooltip = {
          tooltip = TKM_Our_time_tt
          any_state = {
            is_claimed_by = ROOT
            or = {
              is_controlled_by = ROOT
              any_country = {
                is_subject_of = ROOT
                controls_state = PREV
              }
            }
          }
        }
      }

      bypass = {
      
      }

      completion_reward = {

          add_state_claim = 243

          add_state_claim = 347

          swap_ideas = { add_idea = TKM_For_end_sieg_idea remove_idea = TKM_Triumph_of_will_idea }

          add_ideas = can_create_faction_idea

          if = {
            limit = { is_in_faction = no }
            create_faction = TKM_New_order_faction
          }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  ##########小伞#########

  focus = {
      id = TKM_Returning_props
      icon = focus_Tatara_Kogasa
      cost = 14
      x = 6
      y = 0

      mutually_exclusive = {
          focus = TKM_Progressive_leader
          focus = TKM_Revolutionary_vanguard
          focus = TKM_Revolutionary_revolution
      }

      relative_position_id = TKM_Revolutionary_revolution

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not = { has_country_flag = TKM_gugelvse }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_stability = 0.05

		      add_popularity = {
	    	    ideology = qinwai
	    	    popularity = 0.10
	        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Open_border
      icon = GFX_goal_generic_national_unity
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Returning_props
      }

      relative_position_id = TKM_Returning_props

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_political_power = -50

          if = {
            limit = {
               has_idea = close_border
            }
            swap_ideas = { remove_idea = close_border add_idea = loose_border }
          }

          if = {
            limit = {
               has_idea = strict_border
            }
            swap_ideas = { remove_idea = strict_border add_idea = loose_border }
          }

          if = {
            limit = {
               has_idea = normal_border
            }
            swap_ideas = { remove_idea = normal_border add_idea = loose_border }
          }

          set_country_flag = OL_to_weixin
          conservativeincrease = yes
          hidden_effect = {
              news_event = { days = 2 id = kog2.22 }
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Human_chaebol_investment
      icon = focus_Motoori_Kosuzu_investment
      cost = 14
      x = -1
      y = 1

      prerequisite = {
         focus = TKM_Open_border
      }

      relative_position_id = TKM_Open_border

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Political_concept_establishment = yes

        add_ideas = TKM_Human_chaebol_investment_idea

        if = {
          limit = { 
            ZBT = {
              faqiqingqiu = yes
            }
          }
          ZBT = {
            add_offsite_building = {
                type = industrial_complex
                level = 3
            }
          }
        }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Reiterate_our_origin
      icon = GFX_goal_generic_alliance
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Returning_props
      }

      relative_position_id = TKM_Returning_props

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_stability = 0.10

          conservativeincrease = yes

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Pan_humanism
      icon = focus_pan_humanism
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Reiterate_our_origin
      }

      relative_position_id = TKM_Reiterate_our_origin

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          add_opinion_modifier = { target = HUM modifier = TKM_fanrenzhuyi_op }
          reverse_add_opinion_modifier = { target = HUM modifier = TKM_fanrenzhuyi_op }

          if = {
            limit = { 
              country_exists = RNS
              RNS = { is_subject = no } 
              NOT = { has_war_with = RNS }
              NOT = { RNS = { has_war_with = HUM } }
              or = { 
                RNS = { has_government = guli } 
                RNS = { has_government = qinwai } 
              }
            }			
            RNS = {      
              add_opinion_modifier = { target = TKM modifier = TKM_fanrenzhuyi_op }
              reverse_add_opinion_modifier = { target = TKM modifier = TKM_fanrenzhuyi_op }

              add_opinion_modifier = { target = HUM modifier = TKM_fanrenzhuyi_op }
              reverse_add_opinion_modifier = { target = HUM modifier = TKM_fanrenzhuyi_op }
            }
          }

          if = {
            limit = { 
              country_exists = SBK
              SBK = { is_subject = no } 
              NOT = { has_war_with = SBK }
              NOT = { SBK = { has_war_with = HUM } }
              or = { 
                SBK = { has_government = guli } 
                SBK = { has_government = qinwai } 
              }
            }			
            SBK = {      
              country_event = { days = 2 id = kog2.84 }
            }
          }

          if = {
            limit = { 
              country_exists = KYK
              KYK = { is_subject = no } 
              NOT = { has_war_with = KYK }
              NOT = { KYK = { has_war_with = HUM } }
              or = { 
                KYK = { has_government = guli } 
                KYK = { has_government = qinwai } 
              }
            }			
            KYK = {      
              country_event = { days = 2 id = kog2.93 }
            }
          }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Prop_Claim_Station
      icon = GFX_focus_hol_the_foundations_of_defense
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Open_border
      }

      prerequisite = {
         focus = TKM_Reiterate_our_origin
      }

      relative_position_id = TKM_Open_border

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          TKM_Political_concept_establishment = yes

          PO_add3 = yes
          OL_add5 = yes
          HMIF_daily_add0.02 = yes
          add_opinion_modifier = { target = HUM modifier = TKM_jianlidaojurenlingsuo_op}
          reverse_add_opinion_modifier = { target = HUM modifier = TKM_jianlidaojurenlingsuo_op}
          hidden_effect = {
              news_event = { days = 2 id = kog2.23 }
          }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Cooperative_Military_Project
      icon = GFX_focus_generic_the_giant_wakes
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Human_chaebol_investment
      }

      prerequisite = {
         focus = TKM_Prop_Claim_Station
      }

      relative_position_id = TKM_Human_chaebol_investment

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          set_global_flag = TKM_Cooperative_Military_Project_flag

          add_political_power = 50

          add_ideas = TKM_jianliduoduolangduanzaogongsi_idea
          HUM = {
              add_ideas = TKM_jianliduoduolangduanzaogongsi_idea
          }

	        unlock_decision_tooltip = TKM_Secretly_rearm_dec          
          
          hidden_effect = {
              news_event = { days = 2 id = kog2.42 }
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Return_to_the_original_owner
      icon = focus_generic_interest_exchange
      cost = 14
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Prop_Claim_Station
      }

      prerequisite = {
         focus = TKM_Pan_humanism
      }

      relative_position_id = TKM_Prop_Claim_Station

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          set_global_flag = TKM_Return_to_the_original_owner_flag

          HMIF_daily_add0.02 = yes
          conservativeincrease = yes

		      add_ideas = TKM_Human_immigration_idea

          HUM = {
            swap_ideas = { add_idea = TKM_Protection_of_props_2_idea remove_idea = TKM_Protection_of_props_idea }

            remove_opinion_modifier = {
                target = TKM
                modifier = background_enemy2
            }
          }

          ZBT = {
            swap_ideas = { add_idea = TKM_Protection_of_props_2_idea remove_idea = TKM_Protection_of_props_idea }

          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.24 }
          }

      }

      ai_will_do = {
        factor = 8
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Business_as_usual
      icon = focus_KOG_guardian_of_humanity
      cost = 16
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Cooperative_Military_Project
      }

      prerequisite = {
         focus = TKM_Return_to_the_original_owner
      }

      relative_position_id = TKM_Cooperative_Military_Project

      available ={
          is_subject = no 
          has_idea = TKM_Guardian_of_mankind_idea
      }

      bypass = {
      
      }

      completion_reward = {

          set_global_flag = TKM_Business_as_usual_flag
          custom_effect_tooltip = TKM_chengweishouhushen_tt
          add_ideas = God
          race_tech_clear = yes

          hidden_effect = {
            every_owned_state = {
              limit = {
                or = {
                  is_core_of = TKM 
                  is_claimed_by = TKM
                }
              }
              set_variable = { ST_present_race = 3}
            }

            if = {
              limit = {
                MTM = { is_subject_of = TKM }
              }
              MTM = {
                every_owned_state = {
                  limit = {
                    is_core_of = MTM 
                  }
                  set_variable = { ST_present_race = 3}
                }
              }
            }
          }

          HUM = {
              qiangjiemeng = yes
	            unlock_decision_tooltip = TKM_For_HUM_TKM_dec
          }


          hidden_effect = {
              news_event = { days = 2 id = kog2.46 }
          }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  ##########工业#########

  focus = {
      id = TKM_neizhengbianhua
      icon = GFX_goal_generic_propaganda
      cost = 12
      x = 0
      y = 2

      relative_position_id = TKM_The_beacon_of_revolution_in_the_south

      available ={
         has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {
          add_political_power = 100
      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_huifuzhanzhengdesunshang
      icon = GFX_goal_continuous_repairments
      cost = 12
      x = -2
      y = 1

      prerequisite = {
          focus = TKM_neizhengbianhua
      }

      relative_position_id = TKM_neizhengbianhua

      available ={

      }

      bypass = {
      
      }

      completion_reward = {
          EXHC_exhaustion_minus15 = yes
          add_stability = 0.05
      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_wendinggedangpaizhenglun
      icon = GFX_goal_generic_national_unity
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_neizhengbianhua
      }

      relative_position_id = TKM_neizhengbianhua

      available ={

      }

      bypass = {
      
      }

      completion_reward = {
          add_stability = 0.1
          add_timed_idea = { idea = TKM_wendinggedangpaizhenglun_idea days = 365}
      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_gaishanshouduzhuangkuang
      icon = GFX_goal_generic_construct_infrastructure
      cost = 12
      x = 2
      y = 1

      prerequisite = {
          focus = TKM_neizhengbianhua
      }

      relative_position_id = TKM_neizhengbianhua

      available ={

      }

      bypass = {
      
      }

      completion_reward = {
          capital_scope = {
              add_extra_state_shared_building_slots = 4
              add_building_construction = {
                  instant_build = yes
                  type = infrastructure
                  level = 4
              }
          }
      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Improve_the_industrial_system
      icon = GFX_goal_generic_construct_civ_factory
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_huifuzhanzhengdesunshang
      }

      prerequisite = {
          focus = TKM_wendinggedangpaizhenglun
      }

      prerequisite = {
          focus = TKM_gaishanshouduzhuangkuang
      }

      mutually_exclusive = {
          focus = TKM_Continue_military_supremacy
      }

      relative_position_id = TKM_huifuzhanzhengdesunshang

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_guge_tt
            has_government = qinwai
            has_country_flag = TKM_gugelvse
          }
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not = { has_country_flag = TKM_gugelvse }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {

        add_stability = 0.05

        random_owned_controlled_state = {
          limit = { 
            free_building_slots = {
              building = industrial_complex
              size > 0
              include_locked = yes
            }
          }
          add_extra_state_shared_building_slots = 2
          add_building_construction = {
            type = industrial_complex
            level = 2
            instant_build = yes
          }							

        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Sword_for_Plow
      icon = GFX_goal_generic_construction2
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Improve_the_industrial_system
      }

      relative_position_id = TKM_Improve_the_industrial_system

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Develop_civil_industry = yes

        add_political_power = -50

        add_stability = 0.10

        custom_effect_tooltip = TKM_Sword_for_Plow_tt

        hidden_effect = {
          every_owned_state = {
            if = {
              limit = {
                is_owned_by = ROOT
                arms_factory > 1
              }
              remove_building = {
                type = arms_factory
                level = 1
              }
              add_building_construction = {
                type = industrial_complex
                level = 1
                instant_build = yes
              }
            }
          }
        }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Planning_land_use
      icon = GFX_goal_generic_construct_infrastructure
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Sword_for_Plow
      }

      relative_position_id = TKM_Sword_for_Plow

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Develop_civil_industry = yes

        add_stability = 0.05

        every_owned_state = {
          if = {
            limit = {
              is_owned_by = ROOT
            }
            add_extra_state_shared_building_slots = 1
          }
        }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Improve_the_living_environment
      icon = GFX_focus_usa_guarantee_the_american_dream
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Sword_for_Plow
      }

      prerequisite = {
          focus = TKM_Recycling_industrial_raw_materials
      }

      relative_position_id = TKM_Sword_for_Plow

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Develop_civil_industry = yes

        add_stability = 0.05

        every_owned_state = {
          if = {
            limit = {
              is_owned_by = ROOT
            }
            add_building_construction = {
              type = infrastructure
              level = 1
              instant_build = yes
            }
          }
        }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Recycling_industrial_raw_materials
      icon = GFX_goal_generic_positive_trade_relations
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Improve_the_industrial_system
          focus = TKM_Continue_military_supremacy
      }

      relative_position_id = TKM_Improve_the_industrial_system

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

            custom_effect_tooltip = tkm_Recycling_industrial_raw_materials_tt

            if = {
              limit = { 
                has_completed_focus = TKM_Improve_the_industrial_system
              }			
              add_tech_bonus = {
                bonus = 1.5
                uses = 1
                category = build
              }
            }

            if = {
              limit = { 
                has_completed_focus = TKM_Continue_military_supremacy
              }			
              add_tech_bonus = {
                bonus = 0.7
                uses = 1
                category = fuzhu
              }
              add_tech_bonus = {
                bonus = 0.7
                uses = 1
                category = jiegou
              }
            }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Continue_military_supremacy
      icon = GFX_goal_generic_construct_mil_factory
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_huifuzhanzhengdesunshang
      }

      prerequisite = {
          focus = TKM_wendinggedangpaizhenglun
      }

      prerequisite = {
          focus = TKM_gaishanshouduzhuangkuang
      }

      mutually_exclusive = {
          focus = TKM_Improve_the_industrial_system
      }

      relative_position_id = TKM_wendinggedangpaizhenglun

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        has_country_flag = TKM_xuanjujieshu
      }

      bypass = {
      
      }

      completion_reward = {

        add_war_support = 0.05

        random_owned_controlled_state = {
          limit = { 
            free_building_slots = {
              building = arms_factory
              size > 0
              include_locked = yes
            }
          }
          add_extra_state_shared_building_slots = 2
          add_building_construction = {
            type = arms_factory
            level = 2
            instant_build = yes
          }							

        }

      }

      ai_will_do = {
        factor = 15
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Knife_out_of_the_sheath
      icon = GFX_focus_RAJ_lions_of_the_great_war
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Continue_military_supremacy
      }

      relative_position_id = TKM_Continue_military_supremacy

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Continue_military_industry = yes

        add_war_support = 0.05

        add_equipment_to_stockpile = {
          type = gun_a
          amount = 5000
          producer = TKM
        }

        add_equipment_to_stockpile = {
          type = mortar_a
          amount = 500
          producer = TKM
        }

        add_equipment_to_stockpile = {
          type = support_equipment
          amount = 500
          producer = TKM
        }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_War_brings_progress
      icon = GFX_focus_chi_army_reform
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Recycling_industrial_raw_materials
      }

      prerequisite = {
          focus = TKM_Knife_out_of_the_sheath
      }

      relative_position_id = TKM_Recycling_industrial_raw_materials

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Continue_military_industry = yes

			  army_experience = 10

          add_tech_bonus = {
              category = basic_doctrine
              uses = 1
              bonus = 1.0
          }

          add_tech_bonus = {
              category = land_doctrine
              bonus = 0.5
              uses = 1
          }

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_War_makes_unity
      icon = GFX_focus_usa_honor_the_confederacy
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Knife_out_of_the_sheath
      }

      relative_position_id = TKM_Knife_out_of_the_sheath

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Continue_military_industry = yes

        add_stability = 0.10

        add_war_support = 0.05

      }

      ai_will_do = {
        factor = 6
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_New_Industrial_Park
      icon = GFX_focus_generic_industry_3
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Planning_land_use
      }

      prerequisite = {
          focus = TKM_Improve_the_living_environment
      }

      relative_position_id = TKM_Planning_land_use

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Develop_civil_industry = yes

        random_owned_controlled_state = {
          limit = { 
            free_building_slots = {
              building = industrial_complex
              size > 1
              include_locked = yes
            }
          }
          add_building_construction = {
            type = industrial_complex
            level = 2
            instant_build = yes
          }							

        }

        random_owned_controlled_state = {
          limit = { 
            free_building_slots = {
              building = industrial_complex
              size > 1
              include_locked = yes
            }
          }
          add_building_construction = {
            type = industrial_complex
            level = 2
            instant_build = yes
          }							

        }

        random_owned_controlled_state = {
          limit = { 
            free_building_slots = {
              building = industrial_complex
              size > 1
              include_locked = yes
            }
          }
          add_building_construction = {
            type = industrial_complex
            level = 2
            instant_build = yes
          }							

        }

      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Technology_academy
      icon = GFX_focus_research
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Improve_the_living_environment
          focus = TKM_War_brings_progress
      }

      relative_position_id = TKM_Improve_the_living_environment

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

          add_research_slot = 1

      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_United_wartime_economy
      icon = GFX_focus_BUL_condemn_macedonian_organizations
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_War_brings_progress
      }

      prerequisite = {
          focus = TKM_War_makes_unity
      }

      relative_position_id = TKM_War_brings_progress

      available ={

      }

      bypass = {
      
      }

      completion_reward = {
        remove_ideas = tkm_bupaoqijiudaoju_idea
        TKM_Continue_military_industry = yes

          if = {
            limit = {
               has_idea = tot_economic_mobilisation
            }
            add_political_power = 50
          }

          if = {
            limit = {
               has_idea = war_economy
            }
            swap_ideas = { remove_idea = war_economy add_idea = tot_economic_mobilisation }
          }


          if = {
            limit = {
               has_idea = partial_economic_mobilisation
            }
            swap_ideas = { remove_idea = partial_economic_mobilisation add_idea = war_economy }
          }

          if = {
            limit = {
               has_idea = low_economic_mobilisation
            }
            swap_ideas = { remove_idea = low_economic_mobilisation add_idea = partial_economic_mobilisation }
          }

          if = {
            limit = {
               has_idea = civilian_economy
            }
            swap_ideas = { remove_idea = civilian_economy add_idea = partial_economic_mobilisation }
          }

      }

      ai_will_do = {
        factor = 10
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Pay_attention_to_civil_research
      icon = GFX_focus_generic_industry_3
      cost = 12
      x = 0
      y = 1

      prerequisite = {
         focus = TKM_New_Industrial_Park
         focus = TKM_Technology_academy
      }

      relative_position_id = TKM_New_Industrial_Park

      mutually_exclusive = {
        focus = TKM_Return_to_our_course
        focus = TKM_Weapons_of_war
      }

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_guge_tt
            has_government = qinwai
            has_country_flag = TKM_gugelvse
          }
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not ={
              has_country_flag = TKM_gugelvse
            }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        
      }

      bypass = {
        
      }

      completion_reward = {

          add_tech_bonus = {
              category = industrys
              uses = 3
              bonus = 0.5
              ahead_reduction = 1
          }
      }

      ai_will_do = {
        factor = 5
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Return_to_our_course
      icon = GFX_focus_generic_combined_arms
      cost = 12
      x = 0
      y = 1

      prerequisite = {
         focus = TKM_New_Industrial_Park
         focus = TKM_Technology_academy
         focus = TKM_United_wartime_economy
      }

      relative_position_id = TKM_Technology_academy

      mutually_exclusive = {
        focus = TKM_Pay_attention_to_civil_research
        focus = TKM_Weapons_of_war
      }

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not ={
              has_country_flag = TKM_gugelvse
            }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        
      }

      bypass = {
        
      }

      completion_reward = {

          add_tech_bonus = {
              category = jiegou
              uses = 1
              bonus = 0.5
              ahead_reduction = 1
          }

          add_tech_bonus = {
              category = fuzhu
              uses = 1
              bonus = 0.5
              ahead_reduction = 1
          }

          add_tech_bonus = {
              category = primary_weapons
              category = mortar
              uses = 1
              bonus = 0.5
              ahead_reduction = 1
          }

      }

      ai_will_do = {
        factor = 5
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Weapons_of_war
      icon = GFX_goal_generic_military_sphere
      cost = 12
      x = 0
      y = 1

      prerequisite = {
         focus = TKM_Technology_academy
         focus = TKM_United_wartime_economy
      }

      relative_position_id = TKM_United_wartime_economy

      mutually_exclusive = {
        focus = TKM_Pay_attention_to_civil_research
        focus = TKM_Return_to_our_course
      }

      available ={
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
        
      }

      bypass = {
        
      }

      completion_reward = {

          add_tech_bonus = {
              category = primary_weapons
              category = mortar
              uses = 3
              bonus = 0.5
              ahead_reduction = 1
          }

      }

      ai_will_do = {
        factor = 5
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Real_industrial_area
      icon = GFX_goal_generic_construct_civilian
      cost = 12
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Pay_attention_to_civil_research
         focus = TKM_Return_to_our_course
      }


      relative_position_id = TKM_Pay_attention_to_civil_research

      available ={
        has_completed_focus = TKM_Improve_the_industrial_system
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_guge_tt
            has_government = qinwai
            has_country_flag = TKM_gugelvse
          }
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not ={
              has_country_flag = TKM_gugelvse
            }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }

        custom_trigger_tooltip = {
          tooltip = MRY_xuanchengshoushidiguo_tt
          check_variable = {
            all_value > 850
          }
        }
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Develop_civil_industry = yes

      }

      ai_will_do = {
        factor = 5
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Real_war_machine
      icon = GFX_goal_generic_construct_military
      cost = 12
      x = 1
      y = 1

      prerequisite = {
         focus = TKM_Return_to_our_course
         focus = TKM_Weapons_of_war
      }


      relative_position_id = TKM_Return_to_our_course

      available ={
        has_completed_focus = TKM_Continue_military_supremacy
        or = {
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }

        custom_trigger_tooltip = {
          tooltip = MRY_xuanchengshoushidiguo_tt
          check_variable = {
            all_value > 850
          }
        }
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Continue_military_industry = yes

      }

      ai_will_do = {
        factor = 5
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  #军事线

  focus = {
      id = TKM_Set_up_the_military_band
      icon = GFX_focus_generic_license_production
      cost = 12
      x = 0
      y = 2

      prerequisite = {

      }


      relative_position_id = TKM_Business_as_usual

      available ={
         has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

          army_experience = 10
          add_ideas = TKM_Set_up_the_military_band_idea
      }

      ai_will_do = {
        factor = 5
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Refurbished_rifle
      icon = GFX_goal_generic_small_arms
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Set_up_the_military_band
      }


      relative_position_id = TKM_Set_up_the_military_band

      available ={
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {
          add_tech_bonus = {
              category = primary_weapons
              uses = 3
              bonus = 0.5
          }

          custom_effect_tooltip = TKM_wuqixinghaochongzheng_tt
          add_to_variable = { sc_p_s = 1}
          hidden_effect = {
              news_event = { days = 2 id = kog2.7 }
          }

      }

      ai_will_do = {
        factor = 5
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Learn_the_concept_of_land_warfare
      icon = GFX_goal_generic_army_doctrines
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Set_up_the_military_band
      }


      relative_position_id = TKM_Set_up_the_military_band

      available ={
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

          army_experience = 15

          add_tech_bonus = {
              category = basic_doctrine
              uses = 1
              bonus = 1.0
          }

          add_tech_bonus = {
            bonus = 0.5
            uses = 2
            category = land_doctrine
          }

      }

      ai_will_do = {
        factor = 5
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Support_firepower
      icon = GFX_focus_generic_concessions
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Refurbished_rifle
      }


      relative_position_id = TKM_Refurbished_rifle

      available ={
         # has_global_flag = main_scenario
      }

      bypass = {
          
      }

      completion_reward = {

        army_experience = 5

    		add_tech_bonus = {
    			bonus = 1.5
    			uses = 1
    			category = mortar
    		}

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Accept_human_veterans
      icon = GFX_focus_generic_little_entente
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Refurbished_rifle
      }

      prerequisite = {
          focus = TKM_Learn_the_concept_of_land_warfare
      }

      relative_position_id = TKM_Refurbished_rifle

      available ={
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

          set_technology = { wunvzhiyuan149 = 1 }

          army_experience = 15
          add_manpower = 500

          custom_effect_tooltip = TKM_1_tt
          hidden_effect = {
            load_oob = TKM_1
          }

          hidden_effect = {
              news_event = { days = 2 id = kog2.8 }
              news_event = { days = 2 id = kog2.9 }
          }
      }

      ai_will_do = {
        factor = 15
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Aircraft_tsukumo
      icon = GFX_focus_generic_military_mission
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Learn_the_concept_of_land_warfare
      }


      relative_position_id = TKM_Learn_the_concept_of_land_warfare

      available ={
         # has_global_flag = main_scenario
      }

      bypass = {
      
      }

      completion_reward = {

        air_experience = 15

        add_tech_bonus = {
          category = fighter
          uses = 1
          bonus = 1.0
        }

        add_tech_bonus = {
          category = bomber
          uses = 1
          bonus = 1.0
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Raiko_reform_plan
      icon = GFX_focus_generic_license_production
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Support_firepower
      }

      prerequisite = {
          focus = TKM_Accept_human_veterans
      }

      prerequisite = {
          focus = TKM_Aircraft_tsukumo
      }

      mutually_exclusive = {
          focus = TKM_Yatsuhashi_reform_plan
          focus = TKM_benben_reform_plan
          focus = TKM_Kogasa_reform_plan
      }


      relative_position_id = TKM_Support_firepower

      available ={
         or = {
          custom_trigger_tooltip = {
            tooltip = TKM_guge_tt
            has_government = qinwai
            has_country_flag = TKM_gugelvse
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
      }

      bypass = {
      
      }

      completion_reward = {

          random_army_leader = {
            limit = {
              has_id = 32
            }
            add_planning = 1
          }

          custom_effect_tooltip = TKM_leigudegaizaofangan_tt
          add_to_variable = { sc_p_s = 1}
          add_to_variable = { sc_a_s = 1}

          swap_ideas = { remove_idea = TKM_Set_up_the_military_band_idea add_idea = TKM_Raiko_reform_plan_idea }
          
      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }
      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Yatsuhashi_reform_plan
      icon = GFX_focus_generic_license_production
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Support_firepower
      }

      prerequisite = {
          focus = TKM_Accept_human_veterans
      }

      prerequisite = {
          focus = TKM_Aircraft_tsukumo
      }

      mutually_exclusive = {
          focus = TKM_Raiko_reform_plan
          focus = TKM_benben_reform_plan
          focus = TKM_Kogasa_reform_plan
      }


      relative_position_id = TKM_Support_firepower

      available ={
         or = {
          custom_trigger_tooltip = {
            tooltip = TKM_baqiao_tt
            has_government = fandong
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
      }

      bypass = {
      
      }

      completion_reward = {

          random_army_leader = {
            limit = {
              has_id = 31
            }
            add_attack = 1
          }

          custom_effect_tooltip = TKM_baqiaodegaizaofangan_tt
          add_to_variable = { sc_p_d = 1}
          add_to_variable = { sc_a_d = 1}
          add_to_variable = { sc_p_h = 1}
          add_to_variable = { sc_a_h = 1}

          swap_ideas = { remove_idea = TKM_Set_up_the_military_band_idea add_idea = TKM_Yatsuhashi_reform_plan_idea }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_benben_reform_plan
      icon = GFX_focus_generic_license_production
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Support_firepower
      }

      prerequisite = {
          focus = TKM_Accept_human_veterans
      }

      prerequisite = {
          focus = TKM_Aircraft_tsukumo
      }

      mutually_exclusive = {
          focus = TKM_Raiko_reform_plan
          focus = TKM_Yatsuhashi_reform_plan
          focus = TKM_Kogasa_reform_plan
      }


      relative_position_id = TKM_Aircraft_tsukumo

      available ={
         or = {
          custom_trigger_tooltip = {
            tooltip = TKM_bianbian_tt
            has_government = neworder
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
      }

      bypass = {
      
      }

      completion_reward = {

          random_army_leader = {
            limit = {
              has_id = 30
            }
            add_attack = 1
          }

          custom_effect_tooltip = TKM_bianbiandegaizaofangan_tt
          add_to_variable = { sc_p_b = 1}
          add_to_variable = { sc_a_b = 1}

          swap_ideas = { remove_idea = TKM_Set_up_the_military_band_idea add_idea = TKM_benben_reform_plan_idea }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Kogasa_reform_plan
      icon = GFX_focus_generic_license_production
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Support_firepower
      }

      prerequisite = {
          focus = TKM_Accept_human_veterans
      }

      prerequisite = {
          focus = TKM_Aircraft_tsukumo
      }

      mutually_exclusive = {
          focus = TKM_Raiko_reform_plan
          focus = TKM_Yatsuhashi_reform_plan
          focus = TKM_benben_reform_plan
      }


      relative_position_id = TKM_Aircraft_tsukumo

      available ={
         or = {
          custom_trigger_tooltip = {
            tooltip = TKM_xiaosan_tt
            has_government = qinwai
            not = { has_country_flag = TKM_gugelvse }
          }
          custom_trigger_tooltip = {
            tooltip = TKM_qinxin_tt
            has_government = guli
          }
        }
      }

      bypass = {
      
      }

      completion_reward = {

          random_army_leader = {
            limit = {
              has_id = 29
            }
            add_logistics = 1
          }

          custom_effect_tooltip = TKM_xiaosandegaizaofangan_tt
          add_to_variable = { sc_p_i = 1}
          add_to_variable = { sc_a_i = 1}
          add_to_variable = { sc_p_r = 1}
          add_to_variable = { sc_a_r = 1}

          swap_ideas = { remove_idea = TKM_Set_up_the_military_band_idea add_idea = TKM_Kogasa_reform_plan_idea }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Lessons_from_the_war
      icon = GFX_goal_generic_military_sphere
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Raiko_reform_plan
          focus = TKM_Yatsuhashi_reform_plan
          focus = TKM_benben_reform_plan
          focus = TKM_Kogasa_reform_plan
      }

      relative_position_id = TKM_Yatsuhashi_reform_plan

      available ={
        has_war = yes
        or = {
          NOT = { date < 150.1.1 }
          AND = {
            any_enemy_country = {
              is_major = yes
            }
            casualties > 500
          }
          casualties > 1000
        }
      }

      bypass = {
      
      }

      completion_reward = {

        TKM_Political_concept_establishment = yes

			  army_experience = 30

        add_tech_bonus = {
            category = land_doctrine
            bonus = 1.0
            uses = 2
        }

        if = {
          limit = {
            has_idea = TKM_Raiko_reform_plan_idea
          }
          swap_ideas = { remove_idea = TKM_Raiko_reform_plan_idea add_idea = TKM_Joint_command_idea }
        }

        if = {
          limit = {
            has_idea = TKM_Yatsuhashi_reform_plan_idea
          }
          swap_ideas = { remove_idea = TKM_Yatsuhashi_reform_plan_idea add_idea = TKM_Joint_command_idea }
        }

        if = {
          limit = {
            has_idea = TKM_benben_reform_plan_idea
          }
          swap_ideas = { remove_idea = TKM_benben_reform_plan_idea add_idea = TKM_Joint_command_idea }
        }

        if = {
          limit = {
            has_idea = TKM_Kogasa_reform_plan_idea
          }
          swap_ideas = { remove_idea = TKM_Kogasa_reform_plan_idea add_idea = TKM_Joint_command_idea }
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Strategic_Planning
      icon = focus_Horikawa_Raiko
      cost = 6
      x = -3
      y = 1

      prerequisite = {
          focus = TKM_Lessons_from_the_war
      }

      mutually_exclusive = {
          focus = TKM_Will_win
          focus = TKM_Joint_operations
          focus = TKM_Logistics_supplies
      }

      relative_position_id = TKM_Lessons_from_the_war

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        random_army_leader = {
          limit = {
            has_id = 32
          }
          add_skill_level = 1
          
          add_attack = 1
          add_planning = 1
          add_logistics = 1
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Formation_of_the_General_Staff
      icon = GFX_focus_eng_chiefs_of_staff_committee
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Strategic_Planning
      }

      relative_position_id = TKM_Strategic_Planning

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        swap_ideas = { remove_idea = TKM_Joint_command_idea add_idea = TKM_general_staff_idea_1 }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Training_officer_corps
      icon = GFX_focus_usa_honor_the_confederacy
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_Formation_of_the_General_Staff
      }

      relative_position_id = TKM_Formation_of_the_General_Staff

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        swap_ideas = { remove_idea = TKM_general_staff_idea_1 add_idea = TKM_general_staff_idea_2 }

          random_army_leader = {
            limit = {
              has_id = 32
            }
            add_skill_level = 1
            
            add_attack = 1
            add_planning = 1
            add_logistics = 1
          }

          random_army_leader = {
            limit = {
              has_id = 31
            }
            add_skill_level = 1
            
            add_attack = 1
            add_planning = 1
            add_logistics = 1
          }

          random_army_leader = {
            limit = {
              has_id = 30
            }
            add_skill_level = 1
            
            add_attack = 1
            add_planning = 1
            add_logistics = 1
          }

          random_army_leader = {
            limit = {
              has_id = 29
            }
            add_skill_level = 1
            
            add_attack = 1
            add_planning = 1
            add_logistics = 1
          }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Trench_warfare
      icon = GFX_goal_generic_defence
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Training_officer_corps
      }

      prerequisite = {
          focus = TKM_Field_repair
      }

      relative_position_id = TKM_Training_officer_corps

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Trench_warfare_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Will_win
      icon = focus_Tsukumo_Yatsuhashi
      cost = 6
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Lessons_from_the_war
      }

      mutually_exclusive = {
          focus = TKM_Strategic_Planning
          focus = TKM_Joint_operations
          focus = TKM_Logistics_supplies
      }

      relative_position_id = TKM_Lessons_from_the_war

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        random_army_leader = {
          limit = {
            has_id = 31
          }
          add_skill_level = 1
          
          add_attack = 1
          add_planning = 1
          add_logistics = 1
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Forced_conscription
      icon = GFX_focus_YUG_pan_slavic_congress
      cost = 12
      x = -1
      y = 1

      prerequisite = {
          focus = TKM_Strategic_Planning
          focus = TKM_Will_win
      }

      relative_position_id = TKM_Will_win

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Forced_conscription_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Field_repair
      icon = GFX_focus_spr_torchbearers_of_tomorrow
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_Forced_conscription
      }

      relative_position_id = TKM_Forced_conscription

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Field_repair_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Conventional_weapons_improvement
      icon = GFX_goal_generic_army_artillery2
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Will_win
          focus = TKM_Joint_operations
      }

      relative_position_id = TKM_Will_win

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_tech_bonus = {
          category = primary_weapons
          category = mortar
          uses = 3
          bonus = 1.0
        }

        add_tech_bonus = {
          category = support_tech
          uses = 2
          bonus = 0.5
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_banzai_charge
      icon = GFX_focus_generic_japanese_imperial_glory
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_Conventional_weapons_improvement
      }

      relative_position_id = TKM_Conventional_weapons_improvement

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_banzai_charge_idea

        custom_effect_tooltip = TKM_banzai_charge_tt

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Assault
      icon = GFX_focus_prc_infiltration
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Field_repair
      }

      prerequisite = {
          focus = TKM_banzai_charge
      }

      relative_position_id = TKM_Field_repair

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Assault_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Joint_operations
      icon = focus_Tsukumo_Benben
      cost = 6
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Lessons_from_the_war
      }

      mutually_exclusive = {
          focus = TKM_Strategic_Planning
          focus = TKM_Will_win
          focus = TKM_Logistics_supplies
      }

      relative_position_id = TKM_Lessons_from_the_war

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        random_army_leader = {
          limit = {
            has_id = 30
          }
          add_skill_level = 1
          
          add_attack = 1
          add_planning = 1
          add_logistics = 1
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Developing_new_weapons
      icon = GFX_focus_generic_tank_production
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Joint_operations
          focus = TKM_Logistics_supplies
      }

      relative_position_id = TKM_Joint_operations

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        add_tech_bonus = {
          category = fighter
          uses = 1
          ahead_reduction = 2.0
          bonus = 1.0
        }

        add_tech_bonus = {
          category = bomber
          uses = 1
          ahead_reduction = 2.0
          bonus = 1.0
        }

        add_tech_bonus = {
          category = shield_weapons
          uses = 1
          ahead_reduction = 2.0
          bonus = 1.0
        }

        add_tech_bonus = {
          category = heavy
          uses = 1
          ahead_reduction = 2.0
          bonus = 2.0
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Space_ground_collaboration
      icon = GFX_focus_generic_license_production
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_Developing_new_weapons
      }

      relative_position_id = TKM_Developing_new_weapons

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Space_ground_collaboration_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Mobile_warfare
      icon = GFX_goal_generic_cavalry
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_banzai_charge
      }

      prerequisite = {
          focus = TKM_Space_ground_collaboration
      }

      relative_position_id = TKM_banzai_charge

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Mobile_warfare_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Logistics_supplies
      icon = focus_Tatara_Kogasa
      cost = 6
      x = 3
      y = 1

      prerequisite = {
          focus = TKM_Lessons_from_the_war
      }

      mutually_exclusive = {
          focus = TKM_Strategic_Planning
          focus = TKM_Will_win
          focus = TKM_Joint_operations
      }

      relative_position_id = TKM_Lessons_from_the_war

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        random_army_leader = {
          limit = {
            has_id = 29
          }
          add_skill_level = 1
          
          add_attack = 1
          add_planning = 1
          add_logistics = 1
        }

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Simplify_weapons_production
      icon = GFX_focus_generic_combined_arms
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Logistics_supplies
      }

      relative_position_id = TKM_Logistics_supplies

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Simplify_weapons_production_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Advanced_supply_line
      icon = GFX_goal_generic_army_motorized
      cost = 12
      x = 0
      y = 1

      prerequisite = {
          focus = TKM_Simplify_weapons_production
      }

      relative_position_id = TKM_Simplify_weapons_production

      available = {

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Advanced_supply_line_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Armored_warfare
      icon = GFX_goal_generic_army_tanks
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Space_ground_collaboration
      }

      prerequisite = {
          focus = TKM_Advanced_supply_line
      }

      relative_position_id = TKM_Space_ground_collaboration

      available ={

      }

      bypass = {
      
      }

      completion_reward = {

        add_ideas = TKM_Armored_warfare_idea

      }

      ai_will_do = {
        factor = 1
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = yes
      available_if_capitulated = yes
  }

  focus = {
      id = TKM_Operation_No_99
      icon = GFX_focus_jap_cast_the_die
      cost = 12
      x = 1
      y = 1

      prerequisite = {
          focus = TKM_Trench_warfare
          focus = TKM_Assault
          focus = TKM_Mobile_warfare
          focus = TKM_Armored_warfare
      }

      relative_position_id = TKM_Assault

      available = {
        is_subject = no 
        has_war = yes
        any_country = {
          is_major = yes
          has_war_with = TKM
          or = {
            is_neighbor_of = TKM
            any_neighbor_country = {
              or = {
                is_in_faction_with = TKM
                is_subject_of = TKM
              }
            }
          }
        }
        or = {
          any_country = {
            has_war_with = TKM
            strength_ratio = { tag = TKM ratio > 1.30 }
            NOT = { surrender_progress > 0.25 }
          }
          casualties > 1500
          surrender_progress > 0
        }
      }

      bypass = {
      
      }

      completion_reward = {

        if = {
          limit = { 
            has_full_control_of_state = 299
          }			
          add_stability = -0.05

          add_manpower = 1999

          299 = {
            add_manpower = -1999
          }
        }

		    add_timed_idea = { idea = TKM_go_idea days = 365 }

			  activate_mission_tooltip = TKM_Operation_No_99_dec

      }

      ai_will_do = {
        factor = 10
        modifier = {
          factor = 0.6
          and = {
            has_war = no
            date < 150.6.1
          }
        }
      }

      cancel_if_invalid = no
      continue_if_invalid = no
      available_if_capitulated = yes
  }

}
manufacture_conditions = {
	exists = yes
	custom_trigger_tooltip = {
    	tooltip = manufacturer_condition
    	#下面这些如果无特殊需求请不要改	
		not = {
			tag = ROOT
			has_war_with = ROOT
			has_opinion = {
              target = PREV
              value < -100
            }
		}
    	or = {
	    	ROOT = {
		    	has_country_flag = use_by_focus_@PREV
	    	}
	    	and = {
				or = {
			        and = {
			        	or = {
			        		is_in_faction_with = ROOT
			        		is_subject_of = ROOT
			        		ROOT = { is_subject_of = PREV}
			        	}
			        }
			        and = {
			        	has_country_flag = {
			                flag = openvalue
			                value > -1
			            }
			            ROOT = {
			                has_country_flag = {
				                flag = openvalue     
				                value > -1
			                }
			            } 
			            has_opinion = { target = ROOT value > 39 }  
			        }
			        has_opinion = { target = ROOT value > 99 }  
				    
				}
				ROOT = {
					not = { has_country_flag = owns_core_state@PREV }
				}
		    }     
    	}	
	}
}


shiyaojingzijide = {
	and = {
		has_idea = Fairy
		or = {
			not = {
				tag = SCA
				tag = YUK
			}
			and = {
				tag = SCA
				or = {
					is_subject = yes
					has_country_flag = ducaibeituifan
				}
			}
			and = {
				tag = YUK
				or = {
					is_subject = yes
					has_country_flag = ducaibeituifan
				}
			}
		}
	}
}
# is_pure_waike_tech = {
#     OR = {
#         is_researching_technology = waike
#         has_tech = waike
#     }
#     NOT = {has_tech = lingkejiehe154}
# }

# is_pure_lingben_tech = {
#     OR = {
#         is_researching_technology = lingben
#         has_tech = lingben
#     }
#     NOT = {has_tech = lingkejiehe154}  
# }

# is_combined_tech = {
#     has_tech = lingkejiehe154
# }

bypass_declare_war = {
	or = {
		has_war_with = PREV
  		is_subject_of = ROOT
  		not = { country_exists = THIS }
  		# has_non_aggression_pact_with = PREV
	}
}

is_same_race = {
	or = {
		and = {
			has_idea = Human
			PREV = {
				has_idea = Human
			}
		}
		and = {
			has_idea = Ghost
			PREV = {
				has_idea = Ghost
			}
		}
		and = {
			has_idea = Fairy
			PREV = {
				has_idea = Fairy
			}
		}
		and = {
			has_idea = Pri_youkai
			PREV = {
				has_idea = Pri_youkai
			}
		}
		and = {
			has_idea = Youkai
			PREV = {
				has_idea = Youkai
			}
		}
		and = {
			has_idea = Tenggu
			PREV = {
				has_idea = Tenggu
			}
		}
		and = {
			has_idea = Kappa
			PREV = {
				has_idea = Kappa
			}
		}
		and = {
			has_idea = God
			PREV = {
				has_idea = God
			}
		}
		and = {
			has_idea = Magician
			PREV = {
				has_idea = Magician
			}
		}
		and = {
			has_idea = Beast
			PREV = {
				has_idea = Beast
			}
		}
	}
}

is_same_view = {
	or = {
		and = {
			check_variable = { OL_view_type = 0}
			PREV = {
				check_variable = { OL_view_type = 0}
			}
		}
		and = {
			check_variable = { OL_view_type = 1}
			PREV = {
				check_variable = { OL_view_type = 1}
			}
		}
		and = {
			check_variable = { OL_view_type = 2}
			PREV = {
				check_variable = { OL_view_type = 2}
			}
		}
	}
}

is_same_government = {
	or = {
		and = {
			has_government = guli
			PREV = {
				has_government = guli
			}
		}
		and = {
			has_government = qinwai
			PREV = {
				has_government = qinwai
			}
		}
		and = {
			has_government = fandong
			PREV = {
				has_government = fandong
			}
		}
		and = {
			has_government = neworder
			PREV = {
				has_government = neworder
			}
		}
		and = {
			has_government = oldorder
			PREV = {
				has_government = oldorder
			}
		}
	}
}

before_declare_war = {
	if = {
		limit = {
			THIS = { exists = yes }
		}
		if = {
			limit = {
				is_subject = yes
			}
			custom_trigger_tooltip = {
				tooltip = before_declare_war2_tt
				OVERLORD = {
					not = {
						has_non_aggression_pact_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = before_declare_war1_tt
					not = {
						has_non_aggression_pact_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = before_declare_war3_tt
			if = {
				limit = {
					is_subject = yes
				}
				OVERLORD = {
					or = {
						is_neighbor_of = ROOT

						any_neighbor_country = {
							is_subject_of = ROOT
						}

						any_allied_country = {
							is_neighbor_of = ROOT
						}

						any_allied_country = {
							any_neighbor_country = {
								is_subject_of = ROOT
							}
						}

						any_country = {
							is_subject_of = PREV
							is_neighbor_of = ROOT
						}

						any_country = {
							is_subject_of = PREV
							any_neighbor_country = {
								is_subject_of = ROOT
							}
						}
					}
				}
			}
			else = {
				or = {
					is_neighbor_of = ROOT

					any_neighbor_country = {
						is_subject_of = ROOT
					}

					any_allied_country = {
						is_neighbor_of = ROOT
					}

					any_allied_country = {
						any_neighbor_country = {
							is_subject_of = ROOT
						}
					}

					any_country = {
						is_subject_of = PREV
						is_neighbor_of = ROOT
					}

					any_country = {
						is_subject_of = PREV
						any_neighbor_country = {
							is_subject_of = ROOT
						}
					}
				}
			}
		}
	}
	ROOT = {
		is_subject = no
	}
}
faqiqingqiu = {
	country_exists = THIS
	not = {
   		has_war_with = ROOT
  	}
	ROOT = {
		is_subject = no
	}
}

youkai_mountain_country = {
	or = {
		tag = TEG#
		tag = OTG#

		tag = MRY#

		tag = KAP#
		tag = SAP#
		tag = GRS#
		tag = NTR#

		tag = KAS#

		tag = NMN#
		tag = AKI#

		tag = HU5

	}
}

SW_country = {
	or = {
		tag = GH1
		tag = GH2
		tag = GH3
		tag = HU3
		tag = ZYD
		tag = HU6
		tag = MEL
		tag = SGS
	}
}

Ghost_country = {
	or = {
		tag = YYK
		tag = NG1
		tag = NG2
		tag = NG3
		tag = NG4
		tag = PRI
		tag = UUG
		tag = ACE
		tag = GH1
		tag = GH2
		tag = GH3

		tag = YCE
		tag = SAK
		tag = GYK
		tag = HGH
		tag = YYG
		tag = YYH
	}
}

Fairy_country = {
	or = {
		#8
		tag = CFA
		tag = CIR
		tag = HKM
		tag = SC2
		tag = SC3
		tag = SCA
		tag = SGS
		tag = LIL
		tag = YUK
		tag = MFA

		tag = UFA
		tag = CLO
	}
}

Human_country = {
	or = {
		#6
		# tag = HKR
		tag = HUM
		tag = HU1
		tag = HU2
		tag = HU3
		tag = HU4
		tag = EMB
		# tag = HU4
		# tag = ZYD
		tag = HU6
		tag = HU7
		tag = HU8
		tag = MHV
		tag = ZBT
	}
}

Magician_country = {
	or = {
		#5
		tag = MRS
		tag = HKR
		tag = ZYD
		tag = ALI
		tag = HU5
		tag = SRB
		tag = MOK
	}
}

Kappa_country = {
	or = {
		#4
		tag = GRS
		tag = KAP
		tag = NTR
		tag = SAP
	}
}

God_country = {
	or = {
		#8
		tag = AKI
		tag = OKI
		tag = SKI
		tag = TES
		tag = CCA
		tag = KTK
		# tag = IKU
		tag = KMC
		tag = HCT
		tag = KEK
	}
}

Pri_youkai_country = {
	or = {
		#9
		# tag = KYK
		# tag = CHE
		# tag = EET
		# tag = INB
		# tag = KAG
		tag = TKM
		tag = MEL
		# tag = MSD
		# tag = NIB
		tag = NMS
		tag = NUC
		tag = ONS
		tag = RMI
		# tag = RNS
		# tag = UTH
		tag = SC1
		tag = SEJ
		# tag = UDO
		# tag = WAK
		tag = SBK
		tag = MTM
		tag = MYK
		
		tag = MNM
		tag = ICR

		tag = YKV
	}
}

Beast_country = {
	or = {
		#12
		tag = KYK
		tag = CHE
		tag = EET
		tag = INB
		tag = KAG
		# tag = TKM
		# tag = MEL
		tag = MSD
		tag = NIB
		# tag = NMS
		# tag = NUC
		# tag = ONS
		# tag = RMI
		tag = RNS
		tag = UTH
		# tag = SC1
		# tag = SEJ
		tag = UDO
		tag = WAK
		# tag = SBK
		tag = KAS
		tag = SAT
		tag = BYA
		tag = RGO
		
	}
}

Youkai_country = {
	or = {
		#14
		tag = IKU
		
		tag = YUG
		tag = MAM
		tag = PRS
		# tag = ONI
		tag = NMN
		# tag = SAT
		tag = UNA
		tag = UNL
		tag = YKR
		tag = MRY

		tag = GOL
		tag = HUB
		tag = HB1
		tag = URM
		tag = YMM

		tag = AKO
		tag = AOO
		tag = ONI

		tag = NUE
	}
}

Tenggu_country = {
	or = {
		#2
		tag = OTG
		tag = TEG
	}
}
go_weiwu_condition = {
	or = {
        and = {
            check_variable = { PO_average_mp < 30}
        }

        and = {
        	check_variable = { PO_average_mp < 35}
        	check_variable = { OL_view_value < 65}
        }
        
        and = {
            has_country_flag = OL_to_pingheng
            check_variable = { OL_view_type = 0 }
        }

        and = {
            has_country_flag = OL_to_weiwu
            not = { check_variable = { OL_view_type = 2} }
        }

    }
}

go_weixin_condition = {
	or = {
        and = {
            check_variable = { PO_average_mp > 70}
        }

        and = {
            check_variable = { PO_average_mp > 65}
            check_variable = { OL_view_value > 50}
        }

        
        and = {
            has_country_flag = OL_to_pingheng
            check_variable = { OL_view_type = 2 }
        }

        and = {
            has_country_flag = OL_to_weixin
            not = { check_variable = { OL_view_type = 0} }
        }
            
    }
}

random_leader = {
	or = {
		tag = CFA
		# tag = GH1
		# tag = GH2
		# tag = GH3
		tag = SAP
		tag = MTM
		tag = MYK
		tag = MFA
		# tag = HKM
		tag = BYA
		# tag = ONI
		tag = UFA
		tag = GYK
		tag = SC1
		tag = SC2
		tag = SC3
		# tag = UUG
		# tag = ACE
		# tag = NG1
		# tag = NG2
		# tag = NG3
		# tag = NG4
		# tag = ONS
	}
}

lv2_manpower = {
	NOT = { has_idea = isolation }
}
lv3_manpower = {
	has_war_support > 0.3
	NOT = { has_idea = isolation }
}
lv4_manpower = {
	has_war_support > 0.5
	NOT = { has_idea = isolation }
}
lv5_manpower = {
	has_war_support > 0.7
	NOT = { has_idea = isolation }
}
lv6_manpower = {
	has_war_support > 0.9
	NOT = { has_idea = isolation }
}
lv7_manpower = {
	has_war_support > 1.2
	NOT = { has_idea = isolation }
}

caidankaiqi = {
	always = no
}

ST_origin_same_race = {
	or = {
		and = {
			controller = {
				has_idea = Beast
			}
			check_variable = { ST_origin_race = 0}
		}
		and = {
			controller = {
				has_idea = Pri_youkai
			}
			check_variable = { ST_origin_race = 1}
		}
		and = {
			controller = {
				has_idea = Youkai
			}
			check_variable = { ST_origin_race = 2}
		}
		and = {
			controller = {
				has_idea = God
			}
			check_variable = { ST_origin_race = 3}
		}
		and = {
			controller = {
				has_idea = Human
			}
			check_variable = { ST_origin_race = 4}
		}
		and = {
			controller = {
				has_idea = Magician
			}
			check_variable = { ST_origin_race = 5}
		}
		and = {
			controller = {
				has_idea = Fairy
			}
			check_variable = { ST_origin_race = 6}
		}
		and = {
			controller = {
				has_idea = Ghost
			}
			check_variable = { ST_origin_race = 7}
		}
		and = {
			controller = {
				has_idea = Kappa
			}
			check_variable = { ST_origin_race = 8}
		}
		and = {
			controller = {
				has_idea = Tenggu
			}
			check_variable = { ST_origin_race = 9}
		}
	}
}
ST_present_same_race = {
	or = {
		and = {
			controller = {
				has_idea = Beast
			}
			check_variable = { ST_present_race = 0}
		}
		and = {
			controller = {
				has_idea = Pri_youkai
			}
			check_variable = { ST_present_race = 1}
		}
		and = {
			controller = {
				has_idea = Youkai
			}
			check_variable = { ST_present_race = 2}
		}
		and = {
			controller = {
				has_idea = God
			}
			check_variable = { ST_present_race = 3}
		}
		and = {
			controller = {
				has_idea = Human
			}
			check_variable = { ST_present_race = 4}
		}
		and = {
			controller = {
				has_idea = Magician
			}
			check_variable = { ST_present_race = 5}
		}
		and = {
			controller = {
				has_idea = Fairy
			}
			check_variable = { ST_present_race = 6}
		}
		and = {
			controller = {
				has_idea = Ghost
			}
			check_variable = { ST_present_race = 7}
		}
		and = {
			controller = {
				has_idea = Kappa
			}
			check_variable = { ST_present_race = 8}
		}
		and = {
			controller = {
				has_idea = Tenggu
			}
			check_variable = { ST_present_race = 9}
		}
	}
}

dont_annex = {
	or = {
		and = {
			ROOT = { 
				tag = SEJ

				not = { has_country_flag = SEJ_fankangchenggong }

				not = {
					has_completed_focus = SEJ_sixianggonggu
					has_completed_focus = SEJ_shuliweiyan
				}
			}
		}
		

		and = {
			ROOT = { 
				tag = MRS

				has_country_flag = MRS_lvse

				not = {
					has_completed_focus = MRS_xiaochuzhongzugehe
				}
			}
		}

		and = {
			ROOT = { 
				tag = MRS

				has_country_flag = MRS_hongse

				not = {
					has_completed_focus = MRS_mofashiyaoguailianbang
				}
			}
		}

		and = {
			ROOT = { 
				tag = SCA

				PREV = {
					tag = CIR
				}

				has_completed_focus = SCA_gongjizhunbei

				not = {
					has_completed_focus = SCA_shouhuidongbeiwuzhihu
				}

				
			}
		}

		and = {
			ROOT = { 
				tag = MRY

				PREV = {
					tag = KAP
				}

				not = {
					has_completed_focus = MRY_ronghehetong
				}
			}
		}

		and = {
			ROOT = { 
				tag = NMS

				PREV = {
					or = {
						tag = KYK
						tag = MAM
					}
				}

				not = {
					has_completed_focus = NMS_duineiyingxianglikuoda
				}
			}
		}

		and = {
			ROOT = { 
				tag = NMS

				PREV = {
					or = {
						tag = ICR
						tag = MNM
					}
				}

				not = {
					has_completed_focus = NMS_jiuzhengyaoguaidecuowulinian
				}
			}
		}
	}
	
}

is_same_continent = {
	or = {
		and = {
			capital_scope = {
				is_on_continent = Gensokyo
			}
			PREV = {
				capital_scope = {
					is_on_continent = Gensokyo
				}
			}
		}
		and = {
			capital_scope = {
				is_on_continent = Underground
			}
			PREV = {
				capital_scope = {
					is_on_continent = Underground
				}
			}
		}
		and = {
			capital_scope = {
				is_on_continent = Celestial
			}
			PREV = {
				capital_scope = {
					is_on_continent = Celestial
				}
			}
		}
		and = {
			capital_scope = {
				is_on_continent = Netherworld
			}
			PREV = {
				capital_scope = {
					is_on_continent = Netherworld
				}
			}
		}
		and = {
			capital_scope = {
				is_on_continent = Hell
			}
			PREV = {
				capital_scope = {
					is_on_continent = Hell
				}
			}
		}
	}
}

ST_race_is_Beast = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_0_tt
		check_variable = { ST_present_race = 0 }
	}
}
ST_race_is_Pri_youkai = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_1_tt
		check_variable = { ST_present_race = 1 }
	}
}
ST_race_is_Youkai = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_2_tt
		check_variable = { ST_present_race = 2 }
	}
}
ST_race_is_God = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_3_tt
		check_variable = { ST_present_race = 3 }
	}
}
ST_race_is_Human = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_4_tt
		check_variable = { ST_present_race = 4 }
	}
}
ST_race_is_Magician = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_5_tt
		check_variable = { ST_present_race = 5 }
	}
}
ST_race_is_Fairy = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_6_tt
		check_variable = { ST_present_race = 6 }
	}
}
ST_race_is_Ghost = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_7_tt
		check_variable = { ST_present_race = 7 }
	}
}
ST_race_is_Kappa = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_8_tt
		check_variable = { ST_present_race = 8 }
	}
}
ST_race_is_Tengu = {
	custom_trigger_tooltip = {
		tooltip = ST_race_is_9_tt
		check_variable = { ST_present_race = 9 }
	}
}